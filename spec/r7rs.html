<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Revised(7) Scheme</title>

<meta name="description" content="Revised(7) Scheme">
<meta name="keywords" content="Revised(7) Scheme">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="#Introduction" rel="start" title="Introduction">
<link href="#Index" rel="index" title="Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="#Overview-of-Scheme" rel="next" title="Overview of Scheme">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Revised(7) Scheme</h1>









                         

                         


                                
                                









<div class="unnumbered" id="Summary">
<div class="header">
<p>
Next: <a href="#Overview-of-Scheme" accesskey="n" rel="next">Overview of Scheme</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered">Summary</h2>

<span id="index-summary"></span>

<p>The report gives a defining description of the programming language
Scheme.  Scheme is a statically scoped and properly tail recursive
dialect of the Lisp programming language [McCarthy] invented by Guy Lewis
Steele Jr. and Gerald Jay Sussman.  It was designed to have
exceptionally clear and simple semantics and few different ways to
form expressions.  A wide variety of programming paradigms, including
imperative, functional, and object-oriented styles, find convenient
expression in Scheme.
</p>
<p>The introduction offers a brief history of the language and of
the report.
</p>
<p>The first three chapters present the fundamental ideas of the
language and describe the notational conventions used for describing the
language and for writing programs in the language.
</p>
<p>Chapters <a href="#Expressions">Expressions</a> and <a href="#Program-structure">Program structure</a> describe
the syntax and semantics of expressions, definitions, programs, and libraries.
</p>
<p>Chapter <a href="#Standard-procedures">Standard procedures</a> describes Scheme&rsquo;s built-in
procedures, which include all of the language&rsquo;s data manipulation and
input/output primitives.
</p>
<p>Chapter <a href="#Formal-syntax-and-semantics">Formal syntax and semantics</a> provides a formal syntax for Scheme
written in extended BNF, along with a formal denotational semantics.
An example of the use of the language follows the formal syntax and
semantics.
</p>
<p>Appendix <a href="#Standard-Libraries">Standard Libraries</a> provides a list of the standard libraries
and the identifiers that they export.
</p>
<p>Appendix <a href="#Standard-Feature-Identifiers">Standard Feature Identifiers</a> provides a list of optional but standardized
implementation feature names.
</p>

<p>The report concludes with a list of references and an
alphabetic index.
</p>

<blockquote>
<p><em>Note:</em>
The editors of the R<sup>5</sup>RS and R<sup>6</sup>RS reports are
listed as authors of this report in recognition of the substantial
portions of this report that are copied directly from R<sup>5</sup>RS and R<sup>6</sup>RS.
There is no intended implication that those editors, individually or
collectively, support or do not support this report.
</p></blockquote>

















   
</div>
<div class="unnumbered" id="Introduction">
<span id="Introduction-1"></span><h2 class="unnumbered">Introduction</h2>


<span id="index-introduction"></span>



<p>Programming languages should be designed not by piling feature on top of
feature, but by removing the weaknesses and restrictions that make additional
features appear necessary.  Scheme demonstrates that a very small number
of rules for forming expressions, with no restrictions on how they are
composed, suffice to form a practical and efficient programming language
that is flexible enough to support most of the major programming
paradigms in use today.
</p>
<p>Scheme
was one of the first programming languages to incorporate first-class
procedures as in the lambda calculus, thereby proving the usefulness of
static scope rules and block structure in a dynamically typed language.
Scheme was the first major dialect of Lisp to distinguish procedures
from lambda expressions and symbols, to use a single lexical
environment for all variables, and to evaluate the operator position
of a procedure call in the same way as an operand position.  By relying
entirely on procedure calls to express iteration, Scheme emphasized the
fact that tail-recursive procedure calls are essentially GOTOs that
pass arguments, thus allowing a programming style that is both coherent
and efficient.  Scheme was the first widely used programming language to
embrace first-class escape procedures, from which all previously known
sequential control structures can be synthesized.  A subsequent
version of Scheme introduced the concept of exact and inexact numbers,
an extension of Common Lisp&rsquo;s generic arithmetic.
More recently, Scheme became the first programming language to support
hygienic macros, which permit the syntax of a block-structured language
to be extended in a consistent and reliable manner.
</p>

<ul class="section-toc">
<li><a href="#Background" accesskey="1">Background</a></li>
<li><a href="#Acknowledgments" accesskey="2">Acknowledgments</a></li>
</ul>
<hr>
<div class="unnumberedsec" id="Background">
<div class="header">
<p>
Next: <a href="#Acknowledgments" accesskey="n" rel="next">Acknowledgments</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Background-1"></span><h3 class="unnumberedsec">Background</h3>

<span id="index-background"></span>

<p>The first description of Scheme was written in
1975 [Scheme75].  A revised report [Scheme78]
appeared in 1978, which described the evolution
of the language as its MIT implementation was upgraded to support an
innovative compiler [Rabbit].  Three distinct projects began in
1981 and 1982 to use variants of Scheme for courses at MIT, Yale, and
Indiana University [Rees82], [MITScheme], [Scheme311].  An introductory
computer science textbook using Scheme was published in
1984 [SICP].
</p>
<p>As Scheme became more widespread,
local dialects began to diverge until students and researchers
occasionally found it difficult to understand code written at other
sites.
Fifteen representatives of the major implementations of Scheme therefore
met in October 1984 to work toward a better and more widely accepted
standard for Scheme.
Their report, the RRRS [RRRS],
was published at MIT and Indiana University in the summer of 1985.
Further revision took place in the spring of 1986, resulting in the
R<sup>3</sup>RS [R3RS].
Work in the spring of 1988 resulted in R<sup>4</sup>RS [R4RS],
which became the basis for the
IEEE Standard for the Scheme Programming Language in 1991 [IEEEScheme].
In 1998, several additions to the IEEE standard, including high-level
hygienic macros, multiple return values, and &lsquo;<samp>eval</samp>&rsquo;, were finalized
as the R<sup>5</sup>RS [R5RS].
</p>


<p>In the fall of 2006, work began on a more ambitious standard,
including many new improvements and stricter requirements made in the
interest of improved portability.  The resulting standard, the
R<sup>6</sup>RS, was completed in August 2007 [R6RS], and was organized
as a core language and set of mandatory standard libraries.  
Several new implementations of Scheme conforming to it were created.
However, most existing R<sup>5</sup>RS implementations (even excluding those
which are essentially unmaintained) did not adopt R<sup>6</sup>RS, or adopted
only selected parts of it.
</p>
<p>In consequence, the Scheme Steering Committee decided in August 2009 to divide the
standard into two separate but compatible languages &mdash; a &ldquo;small&rdquo;
language, suitable for educators, researchers, and users of embedded languages,
focused on R<sup>5</sup>RS compatibility, and a &ldquo;large&rdquo; language focused
on the practical needs of mainstream software development,
intended to become a replacement for R<sup>6</sup>RS.
The present report describes the &ldquo;small&rdquo; language of that effort:
therefore it cannot be considered in isolation as the successor
to R<sup>6</sup>RS.
</p>


<br>
<br>
<br>

<p>We intend this report to belong to the entire Scheme community, and so
we grant permission to copy it in whole or in part without fee.  In
particular, we encourage implementers of Scheme to use this report as
a starting point for manuals and other documentation, modifying it as
necessary.
</p>



<hr>
</div>
<div class="unnumberedsec" id="Acknowledgments">
<div class="header">
<p>
Previous: <a href="#Background" accesskey="p" rel="prev">Background</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Acknowledgments-1"></span><h3 class="unnumberedsec">Acknowledgments</h3>

<span id="index-acknowledgments"></span>

<p>We would like to thank the members of the Steering Committee, William
Clinger, Marc Feeley, Chris Hanson, Jonathan Rees, and Olin Shivers, for
their support and guidance.
</p>
<p>This report is very much a community effort, and we&rsquo;d like to
thank everyone who provided comments and feedback, including
the following people: David Adler, Eli Barzilay, Taylan Ulrich
Bayirli/Kammer, Marco Benelli, Pierpaolo Bernardi,
Peter Bex, Per Bothner, John Boyle, Taylor Campbell, Raffael Cavallaro,
Ray Dillinger, Biep Durieux, Sztefan Edwards, Helmut Eller, Justin
Ethier, Jay Reynolds Freeman, Tony Garnock-Jones, Alan Manuel Gloria,
Steve Hafner, Sven Hartrumpf, Brian Harvey, Moritz Heidkamp, Jean-Michel
Hufflen, Aubrey Jaffer, Takashi Kato, Shiro Kawai, Richard Kelsey, Oleg
Kiselyov, Pjotr Kourzanov, Jonathan Kraut, Daniel Krueger, Christian
Stigen Larsen, Noah Lavine, Stephen Leach, Larry D. Lee, Kun Liang,
Thomas Lord, Vincent Stewart Manis, Perry Metzger, Michael Montague,
Mikael More, Vitaly Magerya, Vincent Manis, Vassil Nikolov, Joseph
Wayne Norton, Yuki Okumura, Daichi Oohashi, Jeronimo Pellegrini, Jussi
Piitulainen, Alex Queiroz, Jim Rees, Grant Rettke, Andrew Robbins, Devon
Schudy, Bakul Shah, Robert Smith, Arthur Smyles, Michael Sperber, John
David Stone, Jay Sulzberger, Malcolm Tredinnick, Sam Tobin-Hochstadt,
Andre van Tonder, Daniel Villeneuve, Denis Washington, Alan Watson,
Mark H.  Weaver, G&quot;oran Weinholt, David A. Wheeler, Andy Wingo, James
Wise, J&quot;org F. Wittenberger, Kevin A. Wortman, Sascha Ziemann.
</p>
<p>In addition we would like to thank all the past editors, and the
people who helped them in turn: Hal Abelson, Norman Adams, David
Bartley, Alan Bawden, Michael Blair, Gary Brooks, George Carrette,
Andy Cromarty, Pavel Curtis, Jeff Dalton, Olivier Danvy, Ken Dickey,
Bruce Duba, Robert Findler, Andy Freeman, Richard Gabriel, Yekta
G&quot;ursel, Ken Haase, Robert Halstead, Robert Hieb, Paul Hudak, Morry
Katz, Eugene Kohlbecker, Chris Lindblad, Jacob Matthews, Mark Meyer,
Jim Miller, Don Oxley, Jim Philbin, Kent Pitman, John Ramsdell,
Guillermo Rozas, Mike Shaff, Jonathan Shapiro, Guy Steele, Julie
Sussman, Perry Wagle, Mitchel Wand, Daniel Weise, Henry Wu, and Ozan
Yigit.  We thank Carol Fessenden, Daniel Friedman, and Christopher
Haynes for permission to use text from the Scheme 311 version 4
reference manual.  We thank Texas Instruments, Inc. for permission to
use text from the <em>TI Scheme Language Reference
Manual</em> [TImanual85].  We gladly acknowledge the influence of
manuals for MIT Scheme [MITScheme], T [Rees84], Scheme
84 [Scheme84], Common Lisp [CLtL], and Algol 60 [Naur63],
as well as the following SRFIs:  0, 1, 4, 6, 9, 11, 13, 16, 30, 34, 39, 43, 46, 62, and 87,
all of which are available at <a href="http://srfi.schemers.org">http://srfi.schemers.org</a>.
</p>

   

<br>
<br>



<hr>
</div>
</div>
<div class="chapter" id="Overview-of-Scheme">
<div class="header">
<p>
Next: <a href="#Lexical-conventions" accesskey="n" rel="next">Lexical conventions</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Overview-of-Scheme-1"></span><h2 class="chapter">1 Overview of Scheme</h2>


<span id="index-overview-of-scheme"></span>

<ul class="section-toc">
<li><a href="#Semantics" accesskey="1">Semantics</a></li>
<li><a href="#Syntax" accesskey="2">Syntax</a></li>
<li><a href="#Notation-and-terminology" accesskey="3">Notation and terminology</a></li>
</ul>
<hr>
<div class="section" id="Semantics">
<div class="header">
<p>
Next: <a href="#Syntax" accesskey="n" rel="next">Syntax</a>, Previous: <a href="#Overview-of-Scheme" accesskey="p" rel="prev">Overview of Scheme</a>, Up: <a href="#Overview-of-Scheme" accesskey="u" rel="up">Overview of Scheme</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Semantics-1"></span><h3 class="section">1.1 Semantics</h3>

<span id="index-semantics"></span>


<p>This section gives an overview of Scheme&rsquo;s semantics.  A
detailed informal semantics is the subject of
chapters <a href="#Basic-concepts">Basic concepts</a> through <a href="#Standard-procedures">Standard procedures</a>.  For reference
purposes, section <a href="#Formal-semantics">Formal semantics</a> provides a formal
semantics of Scheme.
</p>
<p>Scheme is a statically scoped programming
language.  Each use of a variable is associated with a lexically
apparent binding of that variable.
</p>
<p>Scheme is a dynamically typed language.  Types
are associated with values (also called objects) rather than
<span id="index-object"></span>
with variables.  
Statically typed languages, by contrast, associate types with
variables and expressions as well as with values.
</p>
<p>All objects created in the course of a Scheme computation, including
procedures and continuations, have unlimited extent.
No Scheme object is ever destroyed.  The reason that
implementations of Scheme do not (usually!) run out of storage is that
they are permitted to reclaim the storage occupied by an object if
they can prove that the object cannot possibly matter to any future
computation.  
</p>
<p>Implementations of Scheme are required to be properly tail-recursive.
This allows the execution of an iterative computation in constant space,
even if the iterative computation is described by a syntactically
recursive procedure.  Thus with a properly tail-recursive implementation,
iteration can be expressed using the ordinary procedure-call
mechanics, so that special iteration constructs are useful only as
syntactic sugar.  See section <a href="#Proper-tail-recursion">Proper tail recursion</a>.
</p>
<p>Scheme procedures are objects in their own right.  Procedures can be
created dynamically, stored in data structures, returned as results of
procedures, and so on.  
</p>
<p>One distinguishing feature of Scheme is that continuations, which
in most other languages only operate behind the scenes, also have
&ldquo;first-class&rdquo; status.  Continuations are useful for implementing a
wide variety of advanced control constructs, including non-local exits,
backtracking, and coroutines.  See section <a href="#Control-features">Control features</a>.
</p>
<p>Arguments to Scheme procedures are always passed by value, which
means that the actual argument expressions are evaluated before the
procedure gains control, regardless of whether the procedure needs the
result of the evaluation.  
</p>
<p>Scheme&rsquo;s model of arithmetic is designed to remain as independent as
possible of the particular ways in which numbers are represented within a
computer. In Scheme, every integer is a rational number, every rational is a
real, and every real is a complex number.  Thus the distinction between integer
and real arithmetic, so important to many programming languages, does not
appear in Scheme.  In its place is a distinction between exact arithmetic,
which corresponds to the mathematical ideal, and inexact arithmetic on
approximations.  Exact arithmetic is not limited to integers.
</p>
<hr>
</div>
<div class="section" id="Syntax">
<div class="header">
<p>
Next: <a href="#Notation-and-terminology" accesskey="n" rel="next">Notation and terminology</a>, Previous: <a href="#Semantics" accesskey="p" rel="prev">Semantics</a>, Up: <a href="#Overview-of-Scheme" accesskey="u" rel="up">Overview of Scheme</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Syntax-1"></span><h3 class="section">1.2 Syntax</h3>

<span id="index-syntax"></span>

<p>Scheme, like most dialects of Lisp, employs a fully parenthesized prefix
notation for programs and other data; the grammar of Scheme generates a
sublanguage of the language used for data.  An important
consequence of this simple, uniform representation is that
Scheme programs and data can easily be treated uniformly by other Scheme programs.
For example, the &lsquo;<samp>eval</samp>&rsquo; procedure evaluates a Scheme program expressed
as data.
</p>
<p>The &lsquo;<samp>read</samp>&rsquo; procedure performs syntactic as well as lexical decomposition of
the data it reads.  The &lsquo;<samp>read</samp>&rsquo; procedure parses its input as data
(section see <a href="#External-representation">External representations</a>), not as program.
</p>
<p>The formal syntax of Scheme is described in section <a href="#Formal-syntax">Formal syntax</a>.
</p>

<hr>
</div>
<div class="section" id="Notation-and-terminology">
<div class="header">
<p>
Previous: <a href="#Syntax" accesskey="p" rel="prev">Syntax</a>, Up: <a href="#Overview-of-Scheme" accesskey="u" rel="up">Overview of Scheme</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Notation-and-terminology-1"></span><h3 class="section">1.3 Notation and terminology</h3>


<span id="index-notation-and-terminology"></span>


<ul class="section-toc">
<li><a href="#Base-and-optional-features" accesskey="1">Base and optional features</a></li>
<li><a href="#Error-situations-and-unspecified-behavior" accesskey="2">Error situations and unspecified behavior</a></li>
<li><a href="#Entry-format" accesskey="3">Entry format</a></li>
<li><a href="#Evaluation-examples" accesskey="4">Evaluation examples</a></li>
<li><a href="#Naming-conventions" accesskey="5">Naming conventions</a></li>
</ul>
<hr>
<div class="subsection" id="Base-and-optional-features">
<div class="header">
<p>
Next: <a href="#Error-situations-and-unspecified-behavior" accesskey="n" rel="next">Error situations and unspecified behavior</a>, Previous: <a href="#Notation-and-terminology" accesskey="p" rel="prev">Notation and terminology</a>, Up: <a href="#Notation-and-terminology" accesskey="u" rel="up">Notation and terminology</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Base-and-optional-features-1"></span><h4 class="subsection">1.3.1 Base and optional features</h4>

<span id="index-base-and-optional-features"></span>


<p>Every identifier defined in this report appears in one or more of several
<em>libraries</em>.  Identifiers defined in the <em>base library</em>
<span id="index-base-library"></span>
<span id="index-libraries"></span>
are not marked specially in the body of the report.  
This library includes the core syntax of Scheme
and generally useful procedures that manipulate data.  For example, the
variable &lsquo;<samp>abs</samp>&rsquo; is bound to a
procedure of one argument that computes the absolute value of a
number, and the variable &lsquo;<samp>+</samp>&rsquo; is bound to a procedure that computes
sums.  The full list 
all the standard libraries and the identifiers they export is given in
Appendix <a href="#Standard-Libraries">Standard Libraries</a>.
</p>
<p>All implementations of Scheme:
</p>

<ul>
<li> Must provide the base library and all the identifiers
exported from it.

</li><li> May provide or omit the other
libraries given in this report, but each library must either be provided
in its entirety, exporting no additional identifiers, or else omitted
altogether.

</li><li> May provide other libraries not described in this report.

</li><li> May also extend the function of any identifier in this
report, provided the extensions are not in conflict with the language
reported here.

</li><li> Must support portable
code by providing a mode of operation in which the lexical syntax does
not conflict with the lexical syntax described in this report.

</li></ul>


<hr>
</div>
<div class="subsection" id="Error-situations-and-unspecified-behavior">
<div class="header">
<p>
Next: <a href="#Entry-format" accesskey="n" rel="next">Entry format</a>, Previous: <a href="#Base-and-optional-features" accesskey="p" rel="prev">Base and optional features</a>, Up: <a href="#Notation-and-terminology" accesskey="u" rel="up">Notation and terminology</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Error-situations-and-unspecified-behavior-1"></span><h4 class="subsection">1.3.2 Error situations and unspecified behavior</h4>

<span id="index-error-situations-and-unspecified-behavior"></span>



<span id="index-error"></span>
<p>When speaking of an error situation, this report uses the phrase &ldquo;an
error is signaled&rdquo; to indicate that implementations must detect and
report the error.
An error is signaled by raising a non-continuable exception, as if by
the procedure &lsquo;<samp>raise</samp>&rsquo; as described in section <a href="#Exceptions">Exceptions</a>.  The object raised is implementation-dependent
and need not be distinct from objects previously used for the same purpose.
In addition to errors signaled in situations described in this
report, programmers can signal their own errors and handle signaled errors.
</p>
<p>The phrase &ldquo;an error that satisfies <em>predicate</em> is signaled&rdquo; means that an error is
signaled as above.  Furthermore, if the object that is signaled is
passed to the specified predicate (such as &lsquo;<samp>file-error?</samp>&rsquo; or &lsquo;<samp>read-error?</samp>&rsquo;), the predicate returns <tt>#t</tt>.
</p>
<p>If such wording does not appear in the discussion of
an error, then implementations are not required to detect or report the
error, though they are encouraged to do so.
Such a situation is sometimes, but not always, referred to with the phrase
&ldquo;an error.&rdquo;
In such a situation, an implementation may or may not signal an error;
if it does signal an error, the object that is signaled may or may not
satisfy the predicates &lsquo;<samp>error-object?</samp>&rsquo;, &lsquo;<samp>file-error?</samp>&rsquo;, or
&lsquo;<samp>read-error?</samp>&rsquo;.
Alternatively, implementations may provide non-portable extensions.
</p>
<p>For example, it is an error for a procedure to be passed an argument of a type that
the procedure is not explicitly specified to handle, even though such
domain errors are seldom mentioned in this report.  Implementations may
signal an error,
extend a procedure&rsquo;s domain of definition to include such arguments,
or fail catastrophically.
</p>
<p>This report uses the phrase &ldquo;may report a violation of an
implementation restriction&rdquo; to indicate circumstances under which an
implementation is permitted to report that it is unable to continue
execution of a correct program because of some restriction imposed by the
implementation.  Implementation restrictions are discouraged,
but implementations are encouraged to report violations of implementation
restrictions.
<span id="index-implementation-restriction"></span>
</p>
<p>For example, an implementation may report a violation of an
implementation restriction if it does not have enough storage to run a
program,
or if an arithmetic operation would produce an exact number that is
too large for the implementation to represent.
</p>
<p>If the value of an expression is said to be &ldquo;unspecified,&rdquo; then
the expression must evaluate to some object without signaling an error,
but the value depends on the implementation; this report explicitly does
not say what value is returned. 
<span id="index-unspecified"></span>
</p>
<p>Finally, the words and phrases &ldquo;must,&rdquo; &ldquo;must not,&rdquo; &ldquo;shall,&rdquo;
&ldquo;shall not,&rdquo; &ldquo;should,&rdquo; &ldquo;should not,&rdquo; &ldquo;may,&rdquo; &ldquo;required,&rdquo;
&ldquo;recommended,&rdquo; and &ldquo;optional,&rdquo; although not capitalized in this
report, are to be interpreted as described in RFC 2119 [rfc2119].
They are used only with reference to implementer or implementation behavior,
not with reference to programmer or program behavior.
</p>


<hr>
</div>
<div class="subsection" id="Entry-format">
<div class="header">
<p>
Next: <a href="#Evaluation-examples" accesskey="n" rel="next">Evaluation examples</a>, Previous: <a href="#Error-situations-and-unspecified-behavior" accesskey="p" rel="prev">Error situations and unspecified behavior</a>, Up: <a href="#Notation-and-terminology" accesskey="u" rel="up">Notation and terminology</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Entry-format-1"></span><h4 class="subsection">1.3.3 Entry format</h4>

<span id="index-entry-format"></span>

<p>Chapters <a href="#Expressions">Expressions</a> and <a href="#Standard-procedures">Standard procedures</a> are organized
into entries.  Each entry describes one language feature or a group of
related features, where a feature is either a syntactic construct or a
procedure.  An entry begins with one or more header lines of the form
</p>

<dl class="def">
<dt id="index-template"><span class="category"><var>category</var>: </span><span><strong><var>template</var></strong><a href='#index-template' class='copiable-anchor'> &para;</a></span></dt>
</dl>

<p>for identifiers in the base library, or
</p>

<dl class="def">
<dt id="index-template-1"><span class="category"><var>name</var> library <var>category</var>: </span><span><strong><var>template</var></strong><a href='#index-template-1' class='copiable-anchor'> &para;</a></span></dt>
</dl>

<p>where <var>name</var> is the short name of a library
as defined in Appendix <a href="#Standard-Libraries">Standard Libraries</a>.
</p>
<p>If <var>category</var> is &ldquo;syntax,&rdquo; the entry describes an expression
type, and the template gives the syntax of the expression type.
Components of expressions are designated by syntactic variables, which
are written using angle brackets, for example <span class="roman">&lt;expression&gt;</span> and
<span class="roman">&lt;variable&gt;</span>.  Syntactic variables are intended to denote segments of
program text; for example, <span class="roman">&lt;expression&gt;</span> stands for any string of
characters which is a syntactically valid expression.  The notation
</p>
<div class="format">
<pre class="format"> <span class="roman">&lt;thing1&gt;</span> &hellip;
</pre></div>

<p>indicates zero or more occurrences of a <span class="roman">&lt;thing&gt;</span>, and
</p>
<div class="format">
<pre class="format"> <span class="roman">&lt;thing1&gt;</span> <span class="roman">&lt;thing2&gt;</span> &hellip;
</pre></div>

<p>indicates one or more occurrences of a <span class="roman">&lt;thing&gt;</span>.
</p>
<p>If <var>category</var> is &ldquo;auxiliary syntax,&rdquo; then the entry describes a
syntax binding that occurs only as part of specific surrounding
expressions. Any use as an independent syntactic construct or
variable is an error.
</p>
<p>If <var>category</var> is &ldquo;procedure,&rdquo; then the entry describes a procedure, and
the header line gives a template for a call to the procedure.  Argument
names in the template are <var>italicized</var>.  Thus the header line
</p>

<dl class="def">
<dt id="index-_0028vector_002dref"><span class="category">procedure: </span><span><strong>(vector-ref</strong> <em><var>vector</var> <var>k</var>)</em><a href='#index-_0028vector_002dref' class='copiable-anchor'> &para;</a></span></dt>
</dl>

<p>indicates that the procedure bound to the <tt>vector-ref</tt> variable takes
two arguments, a vector <var>vector</var> and an exact non-negative integer
<var>k</var> (see below).  The header lines
</p>


<dl class="def">
<dt id="index-_0028make_002dvector"><span class="category">procedure: </span><span><strong>(make-vector</strong> <em><var>k</var>)</em><a href='#index-_0028make_002dvector' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_0028make_002dvector-1"><span class="category">procedure: </span><span><strong>(make-vector</strong> <em><var>k</var> <var>fill</var>)</em><a href='#index-_0028make_002dvector-1' class='copiable-anchor'> &para;</a></span></dt>
</dl>

<p>indicate that the <tt>make-vector</tt> procedure must be defined to take
either one or two arguments.
</p>

<p>It is an error for a procedure to be presented with an argument that it
is not specified to handle.  For succinctness, we follow the convention
that if an argument name is also the name of a type listed in
section <a href="#Disjointness-of-types">Disjointness of types</a>, then it is an error if that argument is not of the named type.
For example, the header line for <tt>vector-ref</tt> given above dictates that the
first argument to <tt>vector-ref</tt> is a vector.  The following naming
conventions also imply type restrictions:
</p>

<blockquote>
<dl compact="compact">
<dt><span><var>alist</var></span></dt>
<dd><p>association list (list of pairs)
</p></dd>
<dt><span><var>boolean</var></span></dt>
<dd><p>boolean value (<tt>#t</tt> or <tt>#f</tt>)
</p></dd>
<dt><span><var>byte</var></span></dt>
<dd><p>exact integer 0 &lt;= byte &lt; 256
</p></dd>
<dt><span><var>bytevector</var></span></dt>
<dd><p>bytevector
</p></dd>
<dt><span><var>char</var></span></dt>
<dd><p>character
</p></dd>
<dt><span><var>end</var></span></dt>
<dd><p>exact non-negative integer
</p></dd>
<dt><span><var>k</var>, <var>k1</var>, &hellip; <var>kj</var>, &hellip;</span></dt>
<dd><p>exact non-negative integer
</p></dd>
<dt><span><var>letter</var></span></dt>
<dd><p>alphabetic character
</p></dd>
<dt><span><var>list</var>, <var>list1</var>, &hellip; <var>listj</var>, &hellip;</span></dt>
<dd><p>list (see section see <a href="#Pairs-and-lists">Pairs and lists</a>)
</p></dd>
<dt><span><var>n</var>, <var>n1</var>, &hellip; <var>nj</var>, &hellip;</span></dt>
<dd><p>integer
</p></dd>
<dt><span><var>obj</var></span></dt>
<dd><p>any object
</p></dd>
<dt><span><var>pair</var></span></dt>
<dd><p>pair
</p></dd>
<dt><span><var>port</var></span></dt>
<dd><p>port
</p></dd>
<dt><span><var>proc</var></span></dt>
<dd><p>procedure
</p></dd>
<dt><span><var>q</var>, <var>q1</var>, &hellip; <var>qj</var>, &hellip;</span></dt>
<dd><p>rational number
</p></dd>
<dt><span><var>start</var></span></dt>
<dd><p>exact non-negative integer
</p></dd>
<dt><span><var>string</var></span></dt>
<dd><p>string
</p></dd>
<dt><span><var>symbol</var></span></dt>
<dd><p>symbol
</p></dd>
<dt><span><var>thunk</var></span></dt>
<dd><p>zero-argument procedure
</p></dd>
<dt><span><var>vector</var></span></dt>
<dd><p>vector
</p></dd>
<dt><span><var>x</var>, <var>x1</var>, &hellip; <var>xj</var>, &hellip;</span></dt>
<dd><p>real number
</p></dd>
<dt><span><var>y</var>, <var>y1</var>, &hellip; <var>yj</var>, &hellip;</span></dt>
<dd><p>real number
</p></dd>
<dt><span><var>z</var>, <var>z1</var>, &hellip; <var>zj</var>, &hellip;</span></dt>
<dd><p>complex number
</p></dd>
</dl>
</blockquote>




<p>The names <var>start</var> and <var>end</var> are used as indexes into strings,
vectors, and bytevectors.  Their use implies the following:
</p>


<ul>
<li> It is an error if <var>start</var> is greater than <var>end</var>.

</li><li> It is an error if <var>end</var> is greater than the length of the
string, vector, or bytevector.

</li><li> If <var>start</var> is omitted, it is assumed to be zero.

</li><li> If <var>end</var> is omitted, it assumed to be the length of the string,
vector, or bytevector.

</li><li> The index <var>start</var> is always inclusive and the index <var>end</var> is always
exclusive.  As an example, consider a string.  If
<var>start</var> and <var>end</var> are the same, an empty
substring is referred to, and if <var>start</var> is zero and <var>end</var> is
the length of <var>string</var>, then the entire string is referred to.


</li></ul>


<hr>
</div>
<div class="subsection" id="Evaluation-examples">
<div class="header">
<p>
Next: <a href="#Naming-conventions" accesskey="n" rel="next">Naming conventions</a>, Previous: <a href="#Entry-format" accesskey="p" rel="prev">Entry format</a>, Up: <a href="#Notation-and-terminology" accesskey="u" rel="up">Notation and terminology</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Evaluation-examples-1"></span><h4 class="subsection">1.3.4 Evaluation examples</h4>

<span id="index-evaluation-examples"></span>

<p>The symbol &ldquo;&rArr;&rdquo; used in program examples is read
&ldquo;evaluates to.&rdquo;  For example,
</p>

<div class="example">
<pre class="example">

(* 5 8)                                ==&gt;  40

</pre></div>


<p>means that the expression <tt>(* 5 8)</tt> evaluates to the object <tt>40</tt>.
Or, more precisely:  the expression given by the sequence of characters
&ldquo;<tt>(* 5 8)</tt>&rdquo; evaluates, in an environment containing the base library, to an object
that can be represented externally by the sequence of characters &ldquo;<tt>40</tt>.&rdquo;  See section <a href="#External-representations">External representations</a> for a discussion of external
representations of objects.
</p>
<hr>
</div>
<div class="subsection" id="Naming-conventions">
<div class="header">
<p>
Previous: <a href="#Evaluation-examples" accesskey="p" rel="prev">Evaluation examples</a>, Up: <a href="#Notation-and-terminology" accesskey="u" rel="up">Notation and terminology</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Naming-conventions-1"></span><h4 class="subsection">1.3.5 Naming conventions</h4>

<span id="index-naming-conventions"></span>

<p>By convention, <code>?</code> is the final character of the names
<span id="index-_003f"></span>
of procedures that always return a boolean value.
Such procedures are called <em>predicates</em>.
<span id="index-predicates"></span>
Predicates are generally understood to be side-effect free, except that they
may raise an exception when passed the wrong type of argument.
</p>
<p>Similarly, <code>!</code> is the final character of the names
<span id="index-_0021"></span>
of procedures that store values into previously
allocated locations (see section see <a href="#Storage-model">Storage model</a>).
Such procedures are called <em>mutation procedures</em>.
<span id="index-mutation-procedures"></span>
The value returned by a mutation procedure is unspecified.
</p>
<p>By convention, &ldquo;<code>-&gt;</code>&rdquo; appears within the names of procedures that
<span id="index-_002d_003e"></span>
take an object of one type and return an analogous object of another type.
For example, &lsquo;<samp>list-&gt;vector</samp>&rsquo; takes a list and returns a vector whose
elements are the same as those of the list.
</p>
<p>A <em>command</em> is a procedure that does not return useful values
<span id="index-command"></span>
to its continuation.
</p>        
<p>A <em>thunk</em> is a procedure that does not accept arguments.
<span id="index-thunk"></span>
</p>  


<hr>
</div>
</div>
</div>
<div class="chapter" id="Lexical-conventions">
<div class="header">
<p>
Next: <a href="#Basic-concepts" accesskey="n" rel="next">Basic concepts</a>, Previous: <a href="#Overview-of-Scheme" accesskey="p" rel="prev">Overview of Scheme</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Lexical-conventions-1"></span><h2 class="chapter">2 Lexical conventions</h2>


<span id="index-lexical-conventions"></span>

<p>This section gives an informal account of some of the lexical
conventions used in writing Scheme programs.  For a formal syntax of
Scheme, see section <a href="#Formal-syntax">Formal syntax</a>.
</p>
<ul class="section-toc">
<li><a href="#Identifiers" accesskey="1">Identifiers</a></li>
<li><a href="#Whitespace-and-comments" accesskey="2">Whitespace and comments</a></li>
<li><a href="#Other-notations" accesskey="3">Other notations</a></li>
<li><a href="#Datum-labels" accesskey="4">Datum labels</a></li>
</ul>
<hr>
<div class="section" id="Identifiers">
<div class="header">
<p>
Next: <a href="#Whitespace-and-comments" accesskey="n" rel="next">Whitespace and comments</a>, Previous: <a href="#Lexical-conventions" accesskey="p" rel="prev">Lexical conventions</a>, Up: <a href="#Lexical-conventions" accesskey="u" rel="up">Lexical conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Identifiers-1"></span><h3 class="section">2.1 Identifiers</h3>

<span id="index-identifiers"></span>


<p>An identifier is any sequence of letters, digits, and
<span id="index-identifier"></span>
&ldquo;extended identifier characters&rdquo; provided that it does not have a prefix
which is a valid number.  
However, the  <code>.</code> token (a single period) used in the list syntax
<span id="index-_002e"></span>
is not an identifier.
</p>
<p>All implementations of Scheme must support the following extended identifier
characters:
</p>

<div class="example">
<pre class="example">

! $ % &amp; * + - . / : &lt; = &gt; ? @ ^ _ ~ 
</pre></div>


<p>Alternatively, an identifier can be represented by a sequence of zero or more
characters enclosed within vertical lines (&lsquo;<samp>|</samp>&rsquo;), analogous to
string literals.  Any character, including whitespace characters, but
excluding the backslash and vertical line characters,
can appear verbatim in such an identifier.
In addition, characters can be
specified using either an &lt;inline hex escape&gt; or
the same escapes
available in strings.
</p>
<p>For example, the
identifier |H\x65;llo| is the same identifier as
Hello, and in an implementation that supports the appropriate
Unicode character the identifier |\x3BB;| is the same as the
identifier lambda.
What is more, |\t\t| and |\x9;\x9;| are the
same.
Note that || is a valid identifier that is different from any other
identifier.
</p>
<p>Here are some examples of identifiers:
</p>

<div class="example">
<pre class="example">

...                      +
+soup+                   &lt;=?
-&gt;string                 a34kTMNs
lambda                   list-&gt;vector
q                        V17a
|two words|              |two\x20;words|
the-word-recursion-has-many-meanings

</pre></div>


<p>See section <a href="#Lexical-structure">Lexical structure</a> for the formal syntax of identifiers.
</p>
<p>Identifiers have two uses within Scheme programs:
</p>

<ul>
<li> Any identifier can be used as a variable
or as a syntactic keyword
(see sections see <a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a> and see <a href="#Macros">Macros</a>).

</li><li> When an identifier appears as a literal or within a literal
(see section see <a href="#Literal-expressions">Literal expressions</a>), it is being used to denote a <em>symbol</em>
(see section see <a href="#Symbols">Symbols</a>).

</li></ul>

<span id="index-syntactic-keyword"></span>
<span id="index-variable"></span>

<p>In contrast with earlier revisions of the report [R5RS], the
syntax distinguishes between upper and lower case in
identifiers and in characters specified using their names.  However, it
does not distinguish between upper and lower case in numbers,
nor in &lt;inline hex escapes&gt; used
in the syntax of identifiers, characters, or strings.
None of the identifiers defined in this report contain upper-case
characters, even when they appear to do so as a result
of the English-language convention of capitalizing the first word of
a sentence.
</p>
<p>The following directives give explicit control over case
folding.
</p>

<p>&lsquo;<samp></samp>&rsquo;#!fold-case
&lsquo;<samp></samp>&rsquo;#!no-fold-case
<span id="index-_0023_0021no_002dfold_002dcase"></span>
<span id="index-_0023_0021fold_002dcase"></span>
</p>
<p>These directives can appear anywhere comments are permitted (see
section see <a href="#Whitespace-and-comments">Whitespace and comments</a>) but must be followed by a delimiter.
They are treated as comments, except that they affect the reading
of subsequent data from the same port. The &lsquo;<samp></samp>&rsquo;#!fold-case directive causes
subsequent identifiers and character names to be case-folded
as if by &lsquo;<samp>string-foldcase</samp>&rsquo; (see section see <a href="#Strings">Strings</a>).
It has no effect on character
literals.  The &lsquo;<samp></samp>&rsquo;#!no-fold-case directive
causes a return to the default, non-folding behavior.
</p>


<hr>
</div>
<div class="section" id="Whitespace-and-comments">
<div class="header">
<p>
Next: <a href="#Other-notations" accesskey="n" rel="next">Other notations</a>, Previous: <a href="#Identifiers" accesskey="p" rel="prev">Identifiers</a>, Up: <a href="#Lexical-conventions" accesskey="u" rel="up">Lexical conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Whitespace-and-comments-1"></span><h3 class="section">2.2 Whitespace and comments</h3>

<span id="index-whitespace-and-comments"></span>


<p><em>Whitespace</em> characters include the space, tab, and newline characters.
<span id="index-whitespace"></span>
(Implementations may provide additional whitespace characters such
as page break.)  Whitespace is used for improved readability and
as necessary to separate tokens from each other, a token being an
indivisible lexical unit such as an identifier or number, but is
otherwise insignificant.  Whitespace can occur between any two tokens,
but not within a token.  Whitespace occurring inside a string
or inside a symbol delimited by vertical lines
is significant.
</p>
<p>The lexical syntax includes several comment forms.  
Comments are treated exactly like whitespace.
</p>
<p>A semicolon (<tt>;</tt>) indicates the start of a line
comment.  The comment continues to the
<span id="index-_003b"></span>
<span id="index-comment"></span>
end of the line on which the semicolon appears.  
</p>
<p>Another way to indicate a comment is to prefix a <span class="roman">&lt;datum&gt;</span>
(cf. section see <a href="#External-representation">External representations</a>) with <tt>#;</tt> and optional
<span id="index-_0023_003b"></span>
&lt;whitespace&gt;.  The comment consists of
the comment prefix <tt>#;</tt>, the space, and the <span class="roman">&lt;datum&gt;</span> together.  This
notation is useful for &ldquo;commenting out&rdquo; sections of code.
</p>
<p>Block comments are indicated with properly nested <tt>#|</tt>
<span id="index-_0022_007c_0023_0040_007c_0023"></span>
<span id="index-_0023_0022_007c_0040_0023_007c"></span>
and <tt>|#</tt> pairs.
</p>

<div class="example">
<pre class="example">

#|
   The FACT procedure computes the factorial
   of a non-negative integer.
|#
(define fact
  (lambda (n)
    (if (= n 0)
        #;(= n 1)
        1        ;Base case: return 1
        (* n (fact (- n 1))))))

</pre></div>



<hr>
</div>
<div class="section" id="Other-notations">
<div class="header">
<p>
Next: <a href="#Datum-labels" accesskey="n" rel="next">Datum labels</a>, Previous: <a href="#Whitespace-and-comments" accesskey="p" rel="prev">Whitespace and comments</a>, Up: <a href="#Lexical-conventions" accesskey="u" rel="up">Lexical conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Other-notations-1"></span><h3 class="section">2.3 Other notations</h3>

<span id="index-other-notations"></span>



<p>For a description of the notations used for numbers, see
section <a href="#Numbers">Numbers</a>.
</p>

<dl compact="compact">
<dt><span><tt><tt>. + -</tt></tt></span></dt>
<dd><p>These are used in numbers, and can also occur anywhere in an identifier.
A delimited plus or minus sign by itself
is also an identifier.
A delimited period (not occurring within a number or identifier) is used
in the notation for pairs (section see <a href="#Pairs-and-lists">Pairs and lists</a>), and to indicate a
rest-parameter in a  formal parameter list (section see <a href="#Procedures">Procedures</a>).
Note that a sequence of two or more periods <em>is</em> an identifier.
</p>
</dd>
<dt><span><tt><tt>( )</tt></tt></span></dt>
<dd><p>Parentheses are used for grouping and to notate lists
(section see <a href="#Pairs-and-lists">Pairs and lists</a>).
</p>
</dd>
<dt><span><tt><tt>'</tt></tt></span></dt>
<dd><p>The apostrophe (single quote) character is used to indicate literal data (section see <a href="#Literal-expressions">Literal expressions</a>).
</p>
</dd>
<dt><span><tt><tt>`</tt></tt></span></dt>
<dd><p>The grave accent (backquote) character is used to indicate partly constant
data (section see <a href="#Quasiquotation">Quasiquotation</a>).
</p>
</dd>
<dt><span><tt><tt>, ,@</tt></tt></span></dt>
<dd><p>The character comma and the sequence comma at-sign are used in conjunction
with quasiquotation (section see <a href="#Quasiquotation">Quasiquotation</a>).
</p>
</dd>
<dt><span><tt><tt>&quot;</tt></tt></span></dt>
<dd><p>The quotation mark character is used to delimit strings (section see <a href="#Strings">Strings</a>).
</p>
</dd>
<dt><span><tt>\</tt></span></dt>
<dd><p>Backslash is used in the syntax for character constants
(section see <a href="#Characters">Characters</a>) and as an escape character within string
constants (section see <a href="#Strings">Strings</a>) and identifiers
(section see <a href="#Lexical-structure">Lexical structure</a>).
</p>

</dd>
<dt><span><tt><tt>[&nbsp;]&nbsp;{&nbsp;}</tt><!-- /@w --></tt></span></dt>
<dd><p>Left and right square and curly brackets (braces)
are reserved for possible future extensions to the language.
</p>
</dd>
<dt><span><tt>#</tt></span></dt>
<dd><p>The number sign is used for a variety of purposes depending on
the character that immediately follows it:
</p>
</dd>
<dt><span><tt><tt>#t</tt> <tt>#f</tt></tt></span></dt>
<dd><p>These are the boolean constants (section see <a href="#Booleans">Booleans</a>),
along with the alternatives <tt>#true</tt> and <tt>#false</tt>.
</p>
</dd>
<dt><span><tt>#\</tt></span></dt>
<dd><p>This introduces a character constant (section see <a href="#Characters">Characters</a>).
</p>
</dd>
<dt><span><tt>#<tt>(</tt></tt></span></dt>
<dd><p>This introduces a vector constant (section see <a href="#Vectors">Vectors</a>).  Vector constants
are terminated by <tt>)</tt> .
</p>
</dd>
<dt><span><tt>#<tt> u8(</tt></tt></span></dt>
<dd><p>This introduces a bytevector constant (section see <a href="#Bytevectors">Bytevectors</a>).  Bytevector constants
are terminated by <tt>)</tt> .
</p>
</dd>
<dt><span><tt><tt>#e #i #b #o #d #x</tt></tt></span></dt>
<dd><p>These are used in the notation for numbers (section see <a href="#Syntax-of-numerical-constants">Syntax of numerical constants</a>).
</p>
</dd>
<dt><span><tt><tt>SHARP<span class="roman">&lt;n&gt;</span>= SHARP<span class="roman">&lt;n&gt;</span>#</tt></tt></span></dt>
<dd><p>These are used for labeling and referencing other literal data (section see <a href="#Datum-labels">Datum labels</a>).
</p>
</dd>
</dl>


<hr>
</div>
<div class="section" id="Datum-labels">
<div class="header">
<p>
Previous: <a href="#Other-notations" accesskey="p" rel="prev">Other notations</a>, Up: <a href="#Lexical-conventions" accesskey="u" rel="up">Lexical conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Datum-labels-1"></span><h3 class="section">2.4 Datum labels</h3>

<span id="index-datum-labels"></span>



<dl class="def">
<dt id="index-SHARP_003cn_003e_003d_003cdatum_003e"><span class="category">lexical syntax: </span><span><strong>SHARP<span class="roman">&lt;n&gt;</span>=<span class="roman">&lt;datum&gt;</span></strong><a href='#index-SHARP_003cn_003e_003d_003cdatum_003e' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-SHARP_003cn_003e_0023"><span class="category">lexical syntax: </span><span><strong>SHARP<span class="roman">&lt;n&gt;</span>#</strong><a href='#index-SHARP_003cn_003e_0023' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>The lexical syntax
<tt>SHARP<span class="roman">&lt;n&gt;</span>=<span class="roman">&lt;datum&gt;</span></tt> reads the same as <span class="roman">&lt;datum&gt;</span>, but also
results in <span class="roman">&lt;datum&gt;</span> being labelled by <span class="roman">&lt;n&gt;</span>.
It is an error if <span class="roman">&lt;n&gt;</span> is not a sequence of digits.
</p>
<p>The lexical syntax <tt>SHARP<span class="roman">&lt;n&gt;</span>#</tt> serves as a reference to some
object labelled by <tt>SHARP<span class="roman">&lt;n&gt;</span>=</tt>; the result is the same
object as the <tt>SHARP<span class="roman">&lt;n&gt;</span></tt>= 
(see section see <a href="#Equivalence-predicates">Equivalence predicates</a>). 
</p>
<p>Together, these syntaxes permit the notation of
structures with shared or circular substructure.
</p>

<div class="format">
<pre class="format"><tt>(let ((x (list 'a 'b 'c)))
  (set-cdr! (cddr x) x)
  x)                                   ==&gt; #0=(a b c . #0#)
</tt>
</pre></div>


<p>The scope of a datum label is the portion of the outermost datum in which it appears
that is to the right of the label.
Consequently, a reference <tt>SHARP<span class="roman">&lt;n&gt;</span>#</tt> can occur only after a label
<tt>SHARP<span class="roman">&lt;n&gt;</span>=</tt>; it is an error to attempt a forward reference.  In
addition, it is an error if the reference appears as the labelled object itself
(as in <tt>SHARP<span class="roman">&lt;n&gt;</span>= SHARP<span class="roman">&lt;n&gt;</span>#</tt>),
because the object labelled by <tt>SHARP<span class="roman">&lt;n&gt;</span>=</tt> is not well
defined in this case.
</p>
<p>It is an error for a <span class="roman">&lt;program&gt;</span> or <span class="roman">&lt;library&gt;</span> to include
circular references except in literals.  In particular,
it is an error for &lsquo;<samp>quasiquote</samp>&rsquo; (section see <a href="#Quasiquotation">Quasiquotation</a>) to contain them.
</p>

<div class="format">
<pre class="format"><tt>#1=(begin (display #\x) #1#)
                                       ==&gt; <em>error</em>
</tt>
</pre></div>

</dd></dl>

       

<hr>
</div>
</div>
<div class="chapter" id="Basic-concepts">
<div class="header">
<p>
Next: <a href="#Expressions" accesskey="n" rel="next">Expressions</a>, Previous: <a href="#Lexical-conventions" accesskey="p" rel="prev">Lexical conventions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Basic-concepts-1"></span><h2 class="chapter">3 Basic concepts</h2>


<span id="index-basic-concepts"></span>


<ul class="section-toc">
<li><a href="#Variables_003b-syntactic-keywords_003b-and-regions" accesskey="1">Variables; syntactic keywords; and regions</a></li>
<li><a href="#Disjointness-of-types" accesskey="2">Disjointness of types</a></li>
<li><a href="#External-representations" accesskey="3">External representations</a></li>
<li><a href="#Storage-model" accesskey="4">Storage model</a></li>
<li><a href="#Proper-tail-recursion" accesskey="5">Proper tail recursion</a></li>
</ul>
<hr>
<div class="section" id="Variables_003b-syntactic-keywords_003b-and-regions">
<div class="header">
<p>
Next: <a href="#Disjointness-of-types" accesskey="n" rel="next">Disjointness of types</a>, Previous: <a href="#Basic-concepts" accesskey="p" rel="prev">Basic concepts</a>, Up: <a href="#Basic-concepts" accesskey="u" rel="up">Basic concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variables_003b-syntactic-keywords_003b-and-regions-1"></span><h3 class="section">3.1 Variables; syntactic keywords; and regions</h3>

<span id="index-variables_003b-syntactic-keywords_003b-and-regions"></span>



<p>An identifier can name either a type of syntax or
<span id="index-identifier-1"></span>
a location where a value can be stored.  An identifier that names a type
of syntax is called a <em>syntactic keyword</em>
<span id="index-syntactic-keyword-1"></span>
and is said to be <em>bound</em> to a transformer for that syntax.  An identifier that names a
location is called a <em>variable</em> and is said to be
<span id="index-variable-1"></span>
<em>bound</em> to that location.  The set of all visible
bindings in effect at some point in a program is
<span id="index-binding"></span>
known as the <em>environment</em> in effect at that point.  The value
stored in the location to which a variable is bound is called the
variable&rsquo;s value.  By abuse of terminology, the variable is sometimes
said to name the value or to be bound to the value.  This is not quite
accurate, but confusion rarely results from this practice.
</p>
<p>Certain expression types are used to create new kinds of syntax
and to bind syntactic keywords to those new syntaxes, while other
expression types create new locations and bind variables to those
locations.  These expression types are called <em>binding constructs</em>.
</p>
<span id="index-binding-construct"></span>
<p>Those that bind syntactic keywords are listed in section <a href="#Macros">Macros</a>.
The most fundamental of the variable binding constructs is the
&lsquo;<samp>lambda</samp>&rsquo; expression, because all other variable binding constructs
(except top-level bindings)
can be explained in terms of &lsquo;<samp>lambda</samp>&rsquo; expressions.  The other
variable binding constructs are &lsquo;<samp>let</samp>&rsquo;, &lsquo;<samp>let*</samp>&rsquo;, &lsquo;<samp>letrec</samp>&rsquo;,
&lsquo;<samp>letrec*</samp>&rsquo;, &lsquo;<samp>let-values</samp>&rsquo;, &lsquo;<samp>let*-values</samp>&rsquo;,
and &lsquo;<samp>do</samp>&rsquo; expressions (see sections see <a href="#Procedures">Procedures</a>, see <a href="#Binding-constructs">Binding constructs</a>, and
see <a href="#Iteration">Iteration</a>).
</p>

<p>Scheme is a language with
block structure.  To each place where an identifier is bound in a program
there corresponds a <em>region</em> of the program text within which
<span id="index-region"></span>
the binding is visible.  The region is determined by the particular
binding construct that establishes the binding; if the binding is
established by a &lsquo;<samp>lambda</samp>&rsquo; expression, for example, then its region
is the entire &lsquo;<samp>lambda</samp>&rsquo; expression.  Every mention of an identifier
refers to the binding of the identifier that established the
innermost of the regions containing the use.  If there is no binding of
the identifier whose region contains the use, then the use refers to the
binding for the variable in the global environment, if any
(chapters see <a href="#Expressions">Expressions</a> and see <a href="#Standard-procedures">Standard procedures</a>); if there is no
binding for the identifier,
it is said to be <em>unbound</em>.
<span id="index-global-environment"></span>
<span id="index-bound"></span>
<span id="index-unbound"></span>
</p>
<hr>
</div>
<div class="section" id="Disjointness-of-types">
<div class="header">
<p>
Next: <a href="#External-representations" accesskey="n" rel="next">External representations</a>, Previous: <a href="#Variables_003b-syntactic-keywords_003b-and-regions" accesskey="p" rel="prev">Variables; syntactic keywords; and regions</a>, Up: <a href="#Basic-concepts" accesskey="u" rel="up">Basic concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Disjointness-of-types-1"></span><h3 class="section">3.2 Disjointness of types</h3>

<span id="index-disjointness-of-types"></span>


<p>No object satisfies more than one of the following predicates:
</p>

<div class="example">
<pre class="example">

boolean?          bytevector?
char?             eof-object?
null?             number?
pair?             port?
procedure?        string?
symbol?           vector?

</pre></div>


<p>and all predicates created by &lsquo;<samp>define-record-type</samp>&rsquo;.
</p>
<p>These predicates define the types 
<em>boolean, bytevector, character</em>, the empty list object,
<em>eof-object, number, pair, port, procedure, string, symbol, vector</em>,
and all record types.
</p>
<span id="index-symbol_003f-1"></span>
<span id="index-pair_003f-1"></span>
<span id="index-boolean_003f-1"></span>
<span id="index-type"></span>

<span id="index-vector_003f-1"></span>
<span id="index-string_003f-1"></span>
<span id="index-char_003f-1"></span>
<span id="index-number_003f-1"></span>

<span id="index-empty-list"></span>
<span id="index-procedure_003f-1"></span>
<span id="index-port_003f-1"></span>
<span id="index-bytevector_003f-1"></span>

<span id="index-eof_002dobject_003f-1"></span>

<p>Although there is a separate boolean type,
any Scheme value can be used as a boolean value for the purpose of a
conditional test.  As explained in section <a href="#Booleans">Booleans</a>, all
values count as true in such a test except for <tt>#f</tt>.
This report uses the word &ldquo;true&rdquo; to refer to any
Scheme value except <tt>#f</tt>, and the word &ldquo;false&rdquo; to refer to
<tt>#f</tt>.  
<span id="index-false"></span>
<span id="index-true"></span>
</p>
<hr>
</div>
<div class="section" id="External-representations">
<div class="header">
<p>
Next: <a href="#Storage-model" accesskey="n" rel="next">Storage model</a>, Previous: <a href="#Disjointness-of-types" accesskey="p" rel="prev">Disjointness of types</a>, Up: <a href="#Basic-concepts" accesskey="u" rel="up">Basic concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="External-representations-1"></span><h3 class="section">3.3 External representations</h3>

<span id="index-external-representations"></span>


<p>An important concept in Scheme (and Lisp) is that of the <em>external
representation</em> of an object as a sequence of characters.  For example,
an external representation of the integer 28 is the sequence of
characters &ldquo;<tt>28</tt>&rdquo;, and an external representation of a list consisting
of the integers 8 and 13 is the sequence of characters &ldquo;<tt>(8 13)</tt>&rdquo;.
</p>
<p>The external representation of an object is not necessarily unique.  The
integer 28 also has representations &ldquo;<tt>#e28.000</tt>&rdquo; and &ldquo;<tt>#x1c</tt>&rdquo;, and the
list in the previous paragraph also has the representations &ldquo;<tt>( 08 13
)</tt>&rdquo; and &ldquo;<tt>(8 . (13 . ()))</tt>&rdquo; (see section see <a href="#Pairs-and-lists">Pairs and lists</a>).
</p>
<p>Many objects have standard external representations, but some, such as
procedures, do not have standard representations (although particular
implementations may define representations for them).
</p>
<p>An external representation can be written in a program to obtain the
corresponding object (see &lsquo;<samp>quote</samp>&rsquo;, section see <a href="#Literal-expressions">Literal expressions</a>).
</p>
<p>External representations can also be used for input and output.  The
procedure &lsquo;<samp>read</samp>&rsquo; (section see <a href="#Input">Input</a>) parses external
representations, and the procedure &lsquo;<samp>write</samp>&rsquo; (section see <a href="#Output">Output</a>)
generates them.  Together, they provide an elegant and powerful
input/output facility.
</p>
<p>Note that the sequence of characters &ldquo;<tt>(+ 2 6)</tt>&rdquo; is <em>not</em> an
external representation of the integer 8, even though it <em>is</em> an
expression evaluating to the integer 8; rather, it is an external
representation of a three-element list, the elements of which are the symbol
<tt>+</tt> and the integers 2 and 6.  Scheme&rsquo;s syntax has the property that
any sequence of characters that is an expression is also the external
representation of some object.  This can lead to confusion, since it is not always
obvious out of context whether a given sequence of characters is
intended to denote data or program, but it is also a source of power,
since it facilitates writing programs such as interpreters and
compilers that treat programs as data (or vice versa).
</p>
<p>The syntax of external representations of various kinds of objects
accompanies the description of the primitives for manipulating the
objects in the appropriate sections of chapter <a href="#Standard-procedures">Standard procedures</a>.
</p>
<hr>
</div>
<div class="section" id="Storage-model">
<div class="header">
<p>
Next: <a href="#Proper-tail-recursion" accesskey="n" rel="next">Proper tail recursion</a>, Previous: <a href="#External-representations" accesskey="p" rel="prev">External representations</a>, Up: <a href="#Basic-concepts" accesskey="u" rel="up">Basic concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Storage-model-1"></span><h3 class="section">3.4 Storage model</h3>

<span id="index-storage-model"></span>


<p>Variables and objects such as pairs, strings, vectors, and bytevectors implicitly
denote locations or sequences of locations.  A string, for
<span id="index-location"></span>
example, denotes as many locations as there are characters in the string. 
A new value can be
stored into one of these locations using the <tt>string-set!</tt> procedure, but
the string continues to denote the same locations as before.
</p>
<p>An object fetched from a location, by a variable reference or by
a procedure such as &lsquo;<samp>car</samp>&rsquo;, &lsquo;<samp>vector-ref</samp>&rsquo;, or &lsquo;<samp>string-ref</samp>&rsquo;, is
equivalent in the sense of <code>eqv?</code>
<span id="index-eqv_003f-1"></span>
(section see <a href="#Equivalence-predicates">Equivalence predicates</a>)
to the object last stored in the location before the fetch.
</p>
<p>Every location is marked to show whether it is in use.
No variable or object ever refers to a location that is not in use.
</p>
<p>Whenever this report speaks of storage being newly allocated for a variable
or object, what is meant is that an appropriate number of locations are
chosen from the set of locations that are not in use, and the chosen
locations are marked to indicate that they are now in use before the variable
or object is made to denote them.
Notwithstanding this,
it is understood that the empty list cannot be newly allocated, because
it is a unique object.  It is also understood that empty strings, empty
vectors, and empty bytevectors, which contain no locations, may or may
not be newly allocated.
</p>
<p>Every object that denotes locations is 
either mutable or
<span id="index-mutable"></span>
immutable.  Literal constants, the strings
<span id="index-immutable"></span>
returned by <code>symbol-&gt;string</code>,
<span id="index-symbol_002d_003estring-1"></span>
and possibly the environment returned by &lsquo;<samp>scheme-report-environment</samp>&rsquo;
are immutable objects.  All objects
created by the other procedures listed in this report are mutable.
It is an
error to attempt to store a new value into a location that is denoted by an
immutable object.
</p>



<p>These locations are to be understood as conceptual, not physical.
Hence, they do not necessarily correspond to memory addresses,
and even if they do, the memory address might not be constant.
</p>

<blockquote>
<p><em>Rationale:</em>
In many systems it is desirable for constants (i.e. the values of
<span id="index-constant"></span>
literal expressions) to reside in read-only memory.
Making it an error to alter constants permits this implementation strategy,
while not requiring other systems to distinguish between
mutable and immutable objects.
</p></blockquote>


<hr>
</div>
<div class="section" id="Proper-tail-recursion">
<div class="header">
<p>
Previous: <a href="#Storage-model" accesskey="p" rel="prev">Storage model</a>, Up: <a href="#Basic-concepts" accesskey="u" rel="up">Basic concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Proper-tail-recursion-1"></span><h3 class="section">3.5 Proper tail recursion</h3>

<span id="index-proper-tail-recursion"></span>


<p>Implementations of Scheme are required to be
<em>properly tail-recursive</em>.
Procedure calls that occur in certain syntactic
contexts defined below are <em>tail calls</em>.  A Scheme implementation is
properly tail-recursive if it supports an unbounded number of active
tail calls.  A call is <em>active</em> if the called procedure might still
return.  Note that this includes calls that might be returned from either
by the current continuation or by continuations captured earlier by
&lsquo;<samp>call-with-current-continuation</samp>&rsquo; that are later invoked.
In the absence of captured continuations, calls could
return at most once and the active calls would be those that had not
yet returned.
A formal definition of proper tail recursion can be found
in [propertailrecursion].
</p>

<blockquote>
<p><em>Rationale:</em>
</p>
<p>Intuitively, no space is needed for an active tail call because the
continuation that is used in the tail call has the same semantics as the
continuation passed to the procedure containing the call.  Although an improper
implementation might use a new continuation in the call, a return
to this new continuation would be followed immediately by a return
to the continuation passed to the procedure.  A properly tail-recursive
implementation returns to that continuation directly.
</p>
<p>Proper tail recursion was one of the central ideas in Steele and
Sussman&rsquo;s original version of Scheme.  Their first Scheme interpreter
implemented both functions and actors.  Control flow was expressed using
actors, which differed from functions in that they passed their results
on to another actor instead of returning to a caller.  In the terminology
of this section, each actor finished with a tail call to another actor.
</p>
<p>Steele and Sussman later observed that in their interpreter the code
for dealing with actors was identical to that for functions and thus
there was no need to include both in the language.
</p>
</blockquote>


<p>A <em>tail call</em> is a procedure call that occurs
<span id="index-tail-call"></span>
in a <em>tail context</em>.  Tail contexts are defined inductively.  Note
that a tail context is always determined with respect to a particular lambda
expression.
</p>


<ul>
<li> The last expression within the body of a lambda expression,
shown as <span class="roman">&lt;tail expression&gt;</span> below, occurs in a tail context.
The same is true of all the bodies of &lsquo;<samp>case-lambda</samp>&rsquo; expressions.

<div class="format">
<pre class="format"><tt>(lambda &lt;formals&gt;
  &lt;definition&gt;* &lt;expression&gt;* &lt;tail expression&gt;)

(case-lambda (&lt;formals&gt; &lt;tail body&gt;)*)
</tt>

</pre></div>



</li><li> If one of the following expressions is in a tail context,
then the subexpressions shown as &lt;tail expression&gt; are in a tail context.
These were derived from rules in the grammar given in
chapter <a href="#Formal-syntax-and-semantics">Formal syntax and semantics</a> by replacing some occurrences of &lt;body&gt;
with &lt;tail body&gt;,  some occurrences of &lt;expression&gt;
with &lt;tail expression&gt;,  and some occurrences of &lt;sequence&gt;
with &lt;tail sequence&gt;.  Only those rules that contain tail contexts
are shown here.


<div class="format">
<pre class="format"><tt>(if &lt;expression&gt; &lt;tail expression&gt; &lt;tail expression&gt;)
(if &lt;expression&gt; &lt;tail expression&gt;)

(cond &lt;cond clause&gt;+)
(cond &lt;cond clause&gt;* (else &lt;tail sequence&gt;))

(case &lt;expression&gt;
  &lt;case clause&gt;+)
(case &lt;expression&gt;
  &lt;case clause&gt;*
  (else &lt;tail sequence&gt;))

(and &lt;expression&gt;* &lt;tail expression&gt;)
(or &lt;expression&gt;* &lt;tail expression&gt;)

(when &lt;test&gt; &lt;tail sequence&gt;)
(unless &lt;test&gt; &lt;tail sequence&gt;)

(let (&lt;binding spec&gt;*) &lt;tail body&gt;)
(let &lt;variable&gt; (&lt;binding spec&gt;*) &lt;tail body&gt;)
(let* (&lt;binding spec&gt;*) &lt;tail body&gt;)
(letrec (&lt;binding spec&gt;*) &lt;tail body&gt;)
(letrec* (&lt;binding spec&gt;*) &lt;tail body&gt;)
(let-values (&lt;mv binding spec&gt;*) &lt;tail body&gt;)
(let*-values (&lt;mv binding spec&gt;*) &lt;tail body&gt;)

(let-syntax (&lt;syntax spec&gt;*) &lt;tail body&gt;)
(letrec-syntax (&lt;syntax spec&gt;*) &lt;tail body&gt;)

(begin &lt;tail sequence&gt;)

(do (&lt;iteration spec&gt;*)
    (&lt;test&gt; &lt;tail sequence&gt;)
  &lt;expression&gt;*)

<span class="roman">where</span>

&lt;cond clause&gt; --&gt; (&lt;test&gt; &lt;tail sequence&gt;)
&lt;case clause&gt; --&gt; ((&lt;datum&gt;*) &lt;tail sequence&gt;)

&lt;tail body&gt; --&gt; &lt;definition&gt;* &lt;tail sequence&gt;
&lt;tail sequence&gt; --&gt; &lt;expression&gt;* &lt;tail expression&gt;
</tt>

</pre></div>



</li><li> If a &lsquo;<samp>cond</samp>&rsquo; or &lsquo;<samp>case</samp>&rsquo; expression is in a tail context, and has
a clause of the form &lsquo;<samp>(<span class="roman">&lt;expression1&gt;</span> =&gt; <span class="roman">&lt;expression2&gt;</span>)</samp>&rsquo;
then the (implied) call to
the procedure that results from the evaluation of <span class="roman">&lt;expression2&gt;</span> is in a
tail context.  <span class="roman">&lt;expression2&gt;</span> itself is not in a tail context.



</li></ul>


<p>Certain procedures defined in this report are also required to perform tail calls.
The first argument passed to <code>apply</code> and to
<span id="index-apply-1"></span>
<code>call-with-current-continuation</code>, and the second argument passed to
<span id="index-call_002dwith_002dcurrent_002dcontinuation-1"></span>
<code>call-with-values</code>, must be called via a tail call.
<span id="index-call_002dwith_002dvalues-1"></span>
Similarly, <code>eval</code> must evaluate its first argument as if it
<span id="index-eval-1"></span>
were in tail position within the <code>eval</code> procedure.
</p>
<p>In the following example the only tail call is the call to &lsquo;<samp>f</samp>&rsquo;.
None of the calls to &lsquo;<samp>g</samp>&rsquo; or &lsquo;<samp>h</samp>&rsquo; are tail calls.  The reference to
&lsquo;<samp>x</samp>&rsquo; is in a tail context, but it is not a call and thus is not a
tail call.
</p>
<div class="example">
<pre class="example">

(lambda ()
  (if (g)
      (let ((x (h)))
        x)
      (and (g) (f))))

</pre></div>



<blockquote>
<p><em>Note:</em>
Implementations may
recognize that some non-tail calls, such as the call to &lsquo;<samp>h</samp>&rsquo;
above, can be evaluated as though they were tail calls.
In the example above, the &lsquo;<samp>let</samp>&rsquo; expression could be compiled
as a tail call to &lsquo;<samp>h</samp>&rsquo;. (The possibility of &lsquo;<samp>h</samp>&rsquo; returning
an unexpected number of values can be ignored, because in that
case the effect of the &lsquo;<samp>let</samp>&rsquo; is explicitly unspecified and
implementation-dependent.)
</p></blockquote>


       
<hr>
</div>
</div>
<div class="chapter" id="Expressions">
<div class="header">
<p>
Next: <a href="#Program-structure" accesskey="n" rel="next">Program structure</a>, Previous: <a href="#Basic-concepts" accesskey="p" rel="prev">Basic concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Expressions-1"></span><h2 class="chapter">4 Expressions</h2>


<span id="index-expressions"></span>



<p>Expression types are categorized as <em>primitive</em> or <em>derived</em>.
Primitive expression types include variables and procedure calls.
Derived expression types are not semantically primitive, but can instead
be defined as macros.
Suitable syntax definitions of some of the derived expressions are
given in section <a href="#Derived-expression-type">Derived expression types</a>.
</p>
<p>The procedures &lsquo;<samp>force</samp>&rsquo;, &lsquo;<samp>promise?</samp>&rsquo;, &lsquo;<samp>make-promise</samp>&rsquo;, and &lsquo;<samp>make-parameter</samp>&rsquo;
are also described in this chapter because they are intimately associated
with the &lsquo;<samp>delay</samp>&rsquo;, &lsquo;<samp>delay-force</samp>&rsquo;, and &lsquo;<samp>parameterize</samp>&rsquo; expression types.
</p>
<ul class="section-toc">
<li><a href="#Primitive-expression-types" accesskey="1">Primitive expression types</a></li>
<li><a href="#Derived-expression-types" accesskey="2">Derived expression types</a></li>
<li><a href="#Macros" accesskey="3">Macros</a></li>
</ul>
<hr>
<div class="section" id="Primitive-expression-types">
<div class="header">
<p>
Next: <a href="#Derived-expression-types" accesskey="n" rel="next">Derived expression types</a>, Previous: <a href="#Expressions" accesskey="p" rel="prev">Expressions</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Primitive-expression-types-1"></span><h3 class="section">4.1 Primitive expression types</h3>


<span id="index-primitive-expression-types"></span>


<ul class="section-toc">
<li><a href="#Variable-references" accesskey="1">Variable references</a></li>
<li><a href="#Literal-expressions" accesskey="2">Literal expressions</a></li>
<li><a href="#Procedure-calls" accesskey="3">Procedure calls</a></li>
<li><a href="#Procedures" accesskey="4">Procedures</a></li>
<li><a href="#Conditionals" accesskey="5">Conditionals</a></li>
<li><a href="#Assignments" accesskey="6">Assignments</a></li>
<li><a href="#Inclusion" accesskey="7">Inclusion</a></li>
</ul>
<hr>
<div class="subsection" id="Variable-references">
<div class="header">
<p>
Next: <a href="#Literal-expressions" accesskey="n" rel="next">Literal expressions</a>, Previous: <a href="#Primitive-expression-types" accesskey="p" rel="prev">Primitive expression types</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variable-references-1"></span><h4 class="subsection">4.1.1 Variable references</h4>

<span id="index-variable-references"></span>


<dl class="def">
<dt id="index-_003cvariable_003e"><span class="category">syntax: </span><span><strong><span class="roman">&lt;variable&gt;</span></strong><a href='#index-_003cvariable_003e' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>An expression consisting of a variable
<span id="index-variable-2"></span>
(section see <a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a>) is a variable reference.  The value of
the variable reference is the value stored in the location to which the
variable is bound.  It is an error to reference an
unbound variable.
<span id="index-unbound-1"></span>
</p>

<div class="format">
<pre class="format"><tt>(define x 28)
x                                      ==&gt;  28
</tt>
</pre></div>

</dd></dl>

<hr>
</div>
<div class="subsection" id="Literal-expressions">
<div class="header">
<p>
Next: <a href="#Procedure-calls" accesskey="n" rel="next">Procedure calls</a>, Previous: <a href="#Variable-references" accesskey="p" rel="prev">Variable references</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Literal-expressions-1"></span><h4 class="subsection">4.1.2 Literal expressions</h4>

<span id="index-literal-expressions"></span>



<dl class="def">
<dt id="index-quote"><span class="category">syntax: </span><span><strong>quote</strong> <em><span class="roman">&lt;datum&gt;</span></em><a href='#index-quote' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_0027_003cdatum_003e"><span class="category">syntax: </span><span><strong><tt>'</tt><span class="roman">&lt;datum&gt;</span></strong><a href='#index-_0027_003cdatum_003e' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_003cconstant_003e"><span class="category">syntax: </span><span><strong><span class="roman">&lt;constant&gt;</span></strong><a href='#index-_003cconstant_003e' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>&lsquo;<samp>(quote <span class="roman">&lt;datum&gt;</span>)</samp>&rsquo; evaluates to <span class="roman">&lt;datum&gt;</span>.
<span id="index-_0027"></span>
<span class="roman">&lt;Datum&gt;</span>
can be any external representation of a Scheme object (see
section see <a href="#External-representations">External representations</a>).  This notation is used to include literal
constants in Scheme code.
</p>

<div class="format">
<pre class="format"><tt>
(quote a)                              ==&gt;  a
(quote #(a b c))                       ==&gt;  #(a b c)
(quote (+ 1 2))                        ==&gt;  (+ 1 2)
</tt>
</pre></div>


<p>&lsquo;<samp>(quote <span class="roman">&lt;datum&gt;</span>)</samp>&rsquo; can be abbreviated as
<tt>'</tt><span class="roman">&lt;datum&gt;</span>.  The two notations are equivalent in all
respects.
</p>

<div class="format">
<pre class="format"><tt>'a                                     ==&gt;  a
'#(a b c)                              ==&gt;  #(a b c)
'()                                    ==&gt;  ()
'(+ 1 2)                               ==&gt;  (+ 1 2)
'(quote a)                             ==&gt;  (quote a)
''a                                    ==&gt;  (quote a)
</tt>
</pre></div>


<p>Numerical constants, string constants, character constants, vector
constants, bytevector constants, and boolean constants evaluate to
themselves; they need not be quoted.
</p>

<div class="format">
<pre class="format"><tt>'145932                                ==&gt;  145932
145932                                 ==&gt;  145932
'&quot;abc&quot;                                 ==&gt;  &quot;abc&quot;
&quot;abc&quot;                                  ==&gt;  &quot;abc&quot;
'#\a                                   ==&gt;  #\a
#\a                                    ==&gt;  #\a
'#(a 10)                               ==&gt;  #(a 10)
#(a 10)                                ==&gt;  #(a 10)
'#u8(64 65)                            ==&gt;  #u8(64 65)
#u8(64 65)                             ==&gt;  #u8(64 65)
'#t                                    ==&gt;  #t
#t                                     ==&gt;  #t
</tt>
</pre></div>


<p>As noted in section <a href="#Storage-model">Storage model</a>, it is an error to attempt to alter a constant
(i.e. the value of a literal expression) using a mutation procedure like
&lsquo;<samp>set-car!</samp>&rsquo; or &lsquo;<samp>string-set!</samp>&rsquo;.
</p>
</dd></dl>

<hr>
</div>
<div class="subsection" id="Procedure-calls">
<div class="header">
<p>
Next: <a href="#Procedures" accesskey="n" rel="next">Procedures</a>, Previous: <a href="#Literal-expressions" accesskey="p" rel="prev">Literal expressions</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Procedure-calls-1"></span><h4 class="subsection">4.1.3 Procedure calls</h4>

<span id="index-procedure-calls"></span>


<dl class="def">
<dt id="index-_0028_003coperator_003e"><span class="category">syntax: </span><span><strong>(<span class="roman">&lt;operator&gt;</span></strong> <em><span class="roman">&lt;operand1&gt;</span> &hellip;)</em><a href='#index-_0028_003coperator_003e' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>A procedure call is written by enclosing in parentheses an
expression for the procedure to be called followed by expressions for the arguments to be
passed to it.  The operator and operand expressions are evaluated (in an
unspecified order) and the resulting procedure is passed the resulting
arguments.
<span id="index-procedure-call"></span>
<span id="index-call"></span>
</p>
<div class="format">
<pre class="format"><tt>
(+ 3 4)                                ==&gt;  7
((if #f + *) 3 4)                      ==&gt;  12
</tt>
</pre></div>


<p>The procedures in this document are available as the values of variables exported by the
standard libraries.  For example, the addition and multiplication
procedures in the above examples are the values of the variables &lsquo;<samp>+</samp>&rsquo;
and &lsquo;<samp>*</samp>&rsquo; in the base library.  New procedures are created by evaluating lambda expressions
(see section see <a href="#Procedures">Procedures</a>).
</p>
<p>Procedure calls can return any number of values (see <code>values</code> in
<span id="index-values-1"></span>
section see <a href="#Control-features">Control features</a>).
Most of the procedures defined in this report return one
value or, for procedures such as &lsquo;<samp>apply</samp>&rsquo;, pass on the values returned
by a call to one of their arguments.
Exceptions are noted in the individual descriptions.
</p>


<blockquote>
<p><em>Note:</em> In contrast to other dialects of Lisp, the order of
evaluation is unspecified, and the operator expression and the operand
expressions are always evaluated with the same evaluation rules.
</p></blockquote>



<blockquote>
<p><em>Note:</em>
Although the order of evaluation is otherwise unspecified, the effect of
any concurrent evaluation of the operator and operand expressions is
constrained to be consistent with some sequential order of evaluation.
The order of evaluation may be chosen differently for each procedure call.
</p></blockquote>



<blockquote>
<p><em>Note:</em> In many dialects of Lisp, the empty list, <tt>()</tt>, is a legitimate expression evaluating to itself.  In Scheme, it is an error.
</p></blockquote>


</dd></dl>


<hr>
</div>
<div class="subsection" id="Procedures">
<div class="header">
<p>
Next: <a href="#Conditionals" accesskey="n" rel="next">Conditionals</a>, Previous: <a href="#Procedure-calls" accesskey="p" rel="prev">Procedure calls</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Procedures-1"></span><h4 class="subsection">4.1.4 Procedures</h4>

<span id="index-procedures"></span>



<dl class="def">
<dt id="index-lambda"><span class="category">syntax: </span><span><strong>lambda</strong> <em><span class="roman">&lt;formals&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-lambda' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Formals&gt;</span> is a formal arguments list as described below,
and <span class="roman">&lt;body&gt;</span> is a sequence of zero or more definitions
followed by one or more expressions.
</p>
<p><em>Semantics:</em>
A lambda expression evaluates to a procedure.  The environment in
effect when the lambda expression was evaluated is remembered as part of the
procedure.  When the procedure is later called with some actual
arguments, the environment in which the lambda expression was evaluated will
be extended by binding the variables in the formal argument list to
fresh locations, and the corresponding actual argument values will be stored
in those locations.
(A <em>fresh</em> location is one that is distinct from every previously
<span id="index-fresh"></span>
existing location.)
Next, the expressions in the
body of the lambda expression (which, if it contains definitions,
represents a &lsquo;<samp>letrec*</samp>&rsquo; form &mdash; see section see <a href="#Binding-constructs">Binding constructs</a>)
will be evaluated sequentially in the extended environment.
The results of the last expression in the body will be returned as
the results of the procedure call.
</p>

<div class="format">
<pre class="format"><tt>(lambda (x) (+ x x))                   ==&gt;  <em></em>a procedure
((lambda (x) (+ x x)) 4)               ==&gt;  8

(define reverse-subtract
  (lambda (x y) (- y x)))
(reverse-subtract 7 10)                ==&gt;  3

(define add4
  (let ((x 4))
    (lambda (y) (+ x y))))
(add4 6)                               ==&gt;  10
</tt>
</pre></div>


<p><span class="roman">&lt;Formals&gt;</span> have one of the following forms:
</p>


<ul>
<li> <tt>(<span class="roman">&lt;variable1&gt;</span> &hellip;)</tt>:
The procedure takes a fixed number of arguments; when the procedure is
called, the arguments will be stored in fresh locations
that are bound to the corresponding variables.

</li><li> <span class="roman">&lt;variable&gt;</span>:
The procedure takes any number of arguments; when the procedure is
called, the sequence of actual arguments is converted into a newly
allocated list, and the list is stored in a fresh location
that is bound to
<span class="roman">&lt;variable&gt;</span>.

</li><li> <tt>(<span class="roman">&lt;variable1&gt;</span> &hellip; <span class="roman">&lt;variable_n&gt;</span> <b>.</b>
<span class="roman">&lt;variable_n+1&gt;</span>)</tt>:
If a space-delimited period precedes the last variable, then
the procedure takes n or more arguments, where n is the
number of formal arguments before the period (it is an error if there is not
at least one).
The value stored in the binding of the last variable will be a
newly allocated
list of the actual arguments left over after all the other actual
arguments have been matched up against the other formal arguments.

</li></ul>


<p>It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more than once in
<span class="roman">&lt;formals&gt;</span>.
</p>

<div class="format">
<pre class="format"><tt>((lambda x x) 3 4 5 6)                 ==&gt;  (3 4 5 6)
((lambda (x y . z) z)
 3 4 5 6)                              ==&gt;  (5 6)
</tt>
</pre></div>


</dd></dl>

<p>Each procedure created as the result of evaluating a lambda expression is
(conceptually) tagged
with a storage location, in order to make <code>eqv?</code> and
<span id="index-eqv_003f-2"></span>
<code>eq?</code> work on procedures (see section see <a href="#Equivalence-predicates">Equivalence predicates</a>).
<span id="index-eq_003f-1"></span>
</p>

<hr>
</div>
<div class="subsection" id="Conditionals">
<div class="header">
<p>
Next: <a href="#Assignments" accesskey="n" rel="next">Assignments</a>, Previous: <a href="#Procedures" accesskey="p" rel="prev">Procedures</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Conditionals-1"></span><h4 class="subsection">4.1.5 Conditionals</h4>

<span id="index-conditionals"></span>


<dl class="def">
<dt id="index-if"><span class="category">syntax: </span><span><strong>if</strong> <em><span class="roman">&lt;test&gt;</span> <span class="roman">&lt;consequent&gt;</span> <span class="roman">&lt;alternate&gt;</span></em><a href='#index-if' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-if-1"><span class="category">syntax: </span><span><strong>if</strong> <em><span class="roman">&lt;test&gt;</span> <span class="roman">&lt;consequent&gt;</span></em><a href='#index-if-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Test&gt;</span>, <span class="roman">&lt;consequent&gt;</span>, and <span class="roman">&lt;alternate&gt;</span> are
expressions.
</p>
<p><em>Semantics:</em>
An &lsquo;<samp>if</samp>&rsquo; expression is evaluated as follows: first,
<span class="roman">&lt;test&gt;</span> is evaluated.  If it yields a true value (see
<span id="index-true-1"></span>
section see <a href="#Booleans">Booleans</a>), then <span class="roman">&lt;consequent&gt;</span> is evaluated and
its values are returned.  Otherwise <span class="roman">&lt;alternate&gt;</span> is evaluated and its
values are returned.  If <span class="roman">&lt;test&gt;</span> yields a false value and no
<span class="roman">&lt;alternate&gt;</span> is specified, then the result of the expression is
unspecified.
</p>

<div class="format">
<pre class="format"><tt>(if (&gt; 3 2) 'yes 'no)                  ==&gt;  yes
(if (&gt; 2 3) 'yes 'no)                  ==&gt;  no
(if (&gt; 3 2)
    (- 3 2)
    (+ 3 2))                           ==&gt;  1
</tt>
</pre></div>


</dd></dl>


<hr>
</div>
<div class="subsection" id="Assignments">
<div class="header">
<p>
Next: <a href="#Inclusion" accesskey="n" rel="next">Inclusion</a>, Previous: <a href="#Conditionals" accesskey="p" rel="prev">Conditionals</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Assignments-1"></span><h4 class="subsection">4.1.6 Assignments</h4>

<span id="index-assignments"></span>



<dl class="def">
<dt id="index-set_0021"><span class="category">syntax: </span><span><strong>set!</strong> <em><span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span></em><a href='#index-set_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Semantics:</em>
<span class="roman">&lt;Expression&gt;</span> is evaluated, and the resulting value is stored in
the location to which <span class="roman">&lt;variable&gt;</span> is bound.  It is an error if <span class="roman">&lt;variable&gt;</span> is not
bound either in some region enclosing the &lsquo;<samp>set!</samp>&rsquo; expression
<span id="index-region-1"></span>
or else globally.
The result of the &lsquo;<samp>set!</samp>&rsquo; expression is
unspecified.
</p>

<div class="format">
<pre class="format"><tt>(define x 2)
(+ x 1)                                ==&gt;  3
(set! x 4)                             ==&gt;  <em>unspecified</em>
(+ x 1)                                ==&gt;  5
</tt>
</pre></div>


</dd></dl>

<hr>
</div>
<div class="subsection" id="Inclusion">
<div class="header">
<p>
Previous: <a href="#Assignments" accesskey="p" rel="prev">Assignments</a>, Up: <a href="#Primitive-expression-types" accesskey="u" rel="up">Primitive expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Inclusion-1"></span><h4 class="subsection">4.1.7 Inclusion</h4>

<span id="index-inclusion"></span>


<dl class="def">
<dt id="index-include"><span class="category">syntax: </span><span><strong>include</strong> <em>&lt;string1&gt; &lt;string2&gt; &hellip;</em><a href='#index-include' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-include_002dci"><span class="category">syntax: </span><span><strong>include-ci</strong> <em>&lt;string1&gt; &lt;string2&gt; &hellip;</em><a href='#index-include_002dci' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Semantics:</em>
Both <code>include</code> and
<span id="index-include-1"></span>
<code>include-ci</code> take one or more filenames expressed as string literals,
<span id="index-include_002dci-1"></span>
apply an implementation-specific algorithm to find corresponding files,
read the contents of the files in the specified order as if by repeated applications
of &lsquo;<samp>read</samp>&rsquo;,
and effectively replace the &lsquo;<samp>include</samp>&rsquo; or &lsquo;<samp>include-ci</samp>&rsquo; expression
with a &lsquo;<samp>begin</samp>&rsquo; expression containing what was read from the files.
The difference between the two is that <code>include-ci</code> reads each file
as if it began with the &lsquo;<samp></samp>&rsquo;#!fold-case directive, while <code>include</code>
does not.
</p>

<blockquote>
<p><em>Note:</em>
Implementations are encouraged to search for files in the directory
which contains the including file, and to provide a way for users to
specify other directories to search.
</p></blockquote>


</dd></dl>

<hr>
</div>
</div>
<div class="section" id="Derived-expression-types">
<div class="header">
<p>
Next: <a href="#Macros" accesskey="n" rel="next">Macros</a>, Previous: <a href="#Primitive-expression-types" accesskey="p" rel="prev">Primitive expression types</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Derived-expression-types-1"></span><h3 class="section">4.2 Derived expression types</h3>


<span id="index-derived-expression-types"></span>


<p>The constructs in this section are hygienic, as discussed in
section <a href="#Macros">Macros</a>.
For reference purposes, section <a href="#Derived-expression-type">Derived expression types</a> gives syntax definitions
that will convert most of the constructs described in this section
into the primitive constructs described in the previous section.
</p>

<ul class="section-toc">
<li><a href="#Conditional" accesskey="1">Conditionals</a></li>
<li><a href="#Binding-constructs" accesskey="2">Binding constructs</a></li>
<li><a href="#Sequencing" accesskey="3">Sequencing</a></li>
<li><a href="#Iteration" accesskey="4">Iteration</a></li>
<li><a href="#Delayed-evaluation" accesskey="5">Delayed evaluation</a></li>
<li><a href="#Dynamic-bindings" accesskey="6">Dynamic bindings</a></li>
<li><a href="#Exception-handling" accesskey="7">Exception handling</a></li>
<li><a href="#Quasiquotation" accesskey="8">Quasiquotation</a></li>
<li><a href="#Case_002dlambda" accesskey="9">Case-lambda</a></li>
</ul>
<hr>
<div class="subsection" id="Conditional">
<div class="header">
<p>
Next: <a href="#Binding-constructs" accesskey="n" rel="next">Binding constructs</a>, Previous: <a href="#Derived-expression-types" accesskey="p" rel="prev">Derived expression types</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Conditionals-2"></span><h4 class="subsection">4.2.1 Conditionals</h4>

<span id="index-conditionals-1"></span>


<dl class="def">
<dt id="index-cond"><span class="category">syntax: </span><span><strong>cond</strong> <em>&lt;clause1&gt; &lt;clause2&gt; &hellip;</em><a href='#index-cond' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-else-1"><span class="category">auxiliary syntax: </span><span><strong>else</strong><a href='#index-else-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_003d_003e-1"><span class="category">auxiliary syntax: </span><span><strong>=&gt;</strong><a href='#index-_003d_003e-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p><em>Syntax:</em>
<span class="roman">&lt;Clauses&gt;</span> take one of two forms, either
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;test&gt;</span> <span class="roman">&lt;expression1&gt;</span> &hellip;)
</tt>
</pre></div>

<p>where <span class="roman">&lt;test&gt;</span> is any expression, or
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;test&gt;</span> =&gt; <span class="roman">&lt;expression&gt;</span>)
</tt>
</pre></div>

<p>The last <span class="roman">&lt;clause&gt;</span> can be
an &ldquo;else clause,&rdquo; which has the form
</p>
<div class="format">
<pre class="format"><tt>(else <span class="roman">&lt;expression1&gt;</span> <span class="roman">&lt;expression2&gt;</span> &hellip;)<span class="roman">.</span>
</tt>
</pre></div>


<span id="index-else"></span>

<span id="index-_003d_003e"></span>

<p><em>Semantics:</em>
A &lsquo;<samp>cond</samp>&rsquo; expression is evaluated by evaluating the <span class="roman">&lt;test&gt;</span>
expressions of successive <span class="roman">&lt;clause&gt;</span>s in order until one of them
evaluates to a true value (see
<span id="index-true-2"></span>
section see <a href="#Booleans">Booleans</a>).  When a <span class="roman">&lt;test&gt;</span> evaluates to a true
value, the remaining <span class="roman">&lt;expression&gt;</span>s in its <span class="roman">&lt;clause&gt;</span> are
evaluated in order, and the results of the last <span class="roman">&lt;expression&gt;</span> in the
<span class="roman">&lt;clause&gt;</span> are returned as the results of the entire &lsquo;<samp>cond</samp>&rsquo;
expression.
</p>
<p>If the selected <span class="roman">&lt;clause&gt;</span> contains only the
<span class="roman">&lt;test&gt;</span> and no <span class="roman">&lt;expression&gt;</span>s, then the value of the
<span class="roman">&lt;test&gt;</span> is returned as the result.  If the selected <span class="roman">&lt;clause&gt;</span> uses the
<code>=&gt;</code> alternate form, then the <span class="roman">&lt;expression&gt;</span> is evaluated.
<span id="index-_003d_003e-2"></span>
It is an error if its value is not a procedure that accepts one argument.  This procedure is then
called on the value of the <span class="roman">&lt;test&gt;</span> and the values returned by this
procedure are returned by the &lsquo;<samp>cond</samp>&rsquo; expression.
</p>
<p>If all <span class="roman">&lt;test&gt;</span>s evaluate
to <tt>#f</tt>, and there is no else clause, then the result of
the conditional expression is unspecified; if there is an else
clause, then its <span class="roman">&lt;expression&gt;</span>s are evaluated in order, and the values of
the last one are returned.
</p>

<div class="format">
<pre class="format"><tt>(cond ((&gt; 3 2) 'greater)
      ((&lt; 3 2) 'less))                 ==&gt;  greater

(cond ((&gt; 3 3) 'greater)
      ((&lt; 3 3) 'less)
      (else 'equal))                   ==&gt;  equal

(cond ((assv 'b '((a 1) (b 2))) =&gt; cadr)
      (else #f))                       ==&gt;  2
</tt>
</pre></div>



</dd></dl>



<dl class="def">
<dt id="index-case"><span class="category">syntax: </span><span><strong>case</strong> <em><span class="roman">&lt;key&gt;</span> &lt;clause1&gt; &lt;clause2&gt; &hellip;</em><a href='#index-case' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Key&gt;</span> can be any expression.  Each <span class="roman">&lt;clause&gt;</span> has
the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;datum1&gt;</span> &hellip;) <span class="roman">&lt;expression1&gt;</span> <span class="roman">&lt;expression2&gt;</span> &hellip;)<span class="roman">,</span>
</tt>
</pre></div>

<p>where each <span class="roman">&lt;datum&gt;</span> is an external representation of some object.
It is an error if any of the <span class="roman">&lt;datum&gt;</span>s are the same anywhere in the expression.
Alternatively, a <span class="roman">&lt;clause&gt;</span> can be of the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;datum1&gt;</span> &hellip;) =&gt; <span class="roman">&lt;expression&gt;</span>)
</tt>
</pre></div>

<p>The last <span class="roman">&lt;clause&gt;</span> can be an &ldquo;else clause,&rdquo; which has one of the forms
</p>
<div class="format">
<pre class="format"><tt>(else <span class="roman">&lt;expression1&gt;</span> <span class="roman">&lt;expression2&gt;</span> &hellip;)
</tt>
</pre></div>

<p>or
</p>
<div class="format">
<pre class="format"><tt>(else =&gt; <span class="roman">&lt;expression&gt;</span>)<span class="roman">.</span>
</tt>
</pre></div>


<span id="index-else-2"></span>

<p><em>Semantics:</em>
A &lsquo;<samp>case</samp>&rsquo; expression is evaluated as follows.  <span class="roman">&lt;Key&gt;</span> is
evaluated and its result is compared against each <span class="roman">&lt;datum&gt;</span>.  If the
result of evaluating <span class="roman">&lt;key&gt;</span> is the same (in the sense of
&lsquo;<samp>eqv?</samp>&rsquo;; see section see <a href="#Equivalence-predicates">Equivalence predicates</a>) to a <span class="roman">&lt;datum&gt;</span>, then the
expressions in the corresponding <span class="roman">&lt;clause&gt;</span> are evaluated in order
and the results of the last expression in the <span class="roman">&lt;clause&gt;</span> are
returned as the results of the &lsquo;<samp>case</samp>&rsquo; expression.
</p>
<p>If the result of
evaluating <span class="roman">&lt;key&gt;</span> is different from every <span class="roman">&lt;datum&gt;</span>, then if
there is an else clause, its expressions are evaluated and the
results of the last are the results of the &lsquo;<samp>case</samp>&rsquo; expression;
otherwise the result of the &lsquo;<samp>case</samp>&rsquo; expression is unspecified.
</p>
<p>If the selected <span class="roman">&lt;clause&gt;</span> or else clause uses the
<code>=&gt;</code> alternate form, then the <span class="roman">&lt;expression&gt;</span> is evaluated.
It is an error if its value is not a procedure accepting one argument.
This procedure is then
called on the value of the <span class="roman">&lt;key&gt;</span> and the values returned by this
procedure are returned by the &lsquo;<samp>case</samp>&rsquo; expression.
</p>

<div class="format">
<pre class="format"><tt>(case (* 2 3)
  ((2 3 5 7) 'prime)
  ((1 4 6 8 9) 'composite))            ==&gt;  composite
(case (car '(c d))
  ((a) 'a)
  ((b) 'b))                            ==&gt;  <em>unspecified</em>
(case (car '(c d))
  ((a e i o u) 'vowel)
  ((w y) 'semivowel)
  (else =&gt; (lambda (x) x)))            ==&gt;  c
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-and"><span class="category">syntax: </span><span><strong>and</strong> <em>&lt;test1&gt; &hellip;</em><a href='#index-and' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Semantics:</em>
The <span class="roman">&lt;test&gt;</span> expressions are evaluated from left to right, and if
any expression evaluates to <tt>#f</tt> (see
section see <a href="#Booleans">Booleans</a>), then <tt>#f</tt> is returned.  Any remaining
expressions are not evaluated.  If all the expressions evaluate to
true values, the values of the last expression are returned.  If there
are no expressions, then <tt>#t</tt> is returned.
</p>

<div class="format">
<pre class="format"><tt>(and (= 2 2) (&gt; 2 1))                  ==&gt;  #t
(and (= 2 2) (&lt; 2 1))                  ==&gt;  #f
(and 1 2 'c '(f g))                    ==&gt;  (f g)
(and)                                  ==&gt;  #t
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-or"><span class="category">syntax: </span><span><strong>or</strong> <em>&lt;test1&gt; &hellip;</em><a href='#index-or' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Semantics:</em>
The <span class="roman">&lt;test&gt;</span> expressions are evaluated from left to right, and the value of the
first expression that evaluates to a true value (see
section see <a href="#Booleans">Booleans</a>) is returned.  Any remaining expressions
are not evaluated.  If all expressions evaluate to <tt>#f</tt>
or if there are no expressions, then <tt>#f</tt> is returned.
</p>

<div class="format">
<pre class="format"><tt>(or (= 2 2) (&gt; 2 1))                   ==&gt;  #t
(or (= 2 2) (&lt; 2 1))                   ==&gt;  #t
(or #f #f #f)                          ==&gt;  #f
(or (memq 'b '(a b c))
    (/ 3 0))                           ==&gt;  (b c)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-when"><span class="category">syntax: </span><span><strong>when</strong> <em><span class="roman">&lt;test&gt;</span> &lt;expression1&gt; &lt;expression2&gt; &hellip;</em><a href='#index-when' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
The <span class="roman">&lt;test&gt;</span> is an expression.
</p>
<p><em>Semantics:</em>
The test is evaluated, and if it evaluates to a true value,
the expressions are evaluated in order.  The result of the &lsquo;<samp>when</samp>&rsquo;
expression is unspecified.
</p>

<div class="format">
<pre class="format"><tt>(when (= 1 1.0)
  (display &quot;1&quot;)
  (display &quot;2&quot;))                       ==&gt;  <em>unspecified</em>
          <em>and prints</em>  12
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-unless"><span class="category">syntax: </span><span><strong>unless</strong> <em><span class="roman">&lt;test&gt;</span> &lt;expression1&gt; &lt;expression2&gt; &hellip;</em><a href='#index-unless' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
The <span class="roman">&lt;test&gt;</span> is an expression.
</p>
<p><em>Semantics:</em>
The test is evaluated, and if it evaluates to <tt>#f</tt>,
the expressions are evaluated in order.  The result of the &lsquo;<samp>unless</samp>&rsquo;
expression is unspecified.
</p>

<div class="format">
<pre class="format"><tt>(unless (= 1 1.0)
  (display &quot;1&quot;)
  (display &quot;2&quot;))                       ==&gt;  <em>unspecified</em>
          <em>and prints nothing</em>
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-cond_002dexpand"><span class="category">syntax: </span><span><strong>cond-expand</strong> <em>&lt;ce-clause1&gt; &lt;ce-clause2&gt; &hellip;</em><a href='#index-cond_002dexpand' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
The <code>cond-expand</code> expression type
<span id="index-cond_002dexpand-1"></span>
provides a way to statically
expand different expressions depending on the
implementation.  A
<span class="roman">&lt;ce-clause&gt;</span> takes the following form:
</p>
<p><tt>(<span class="roman">&lt;feature requirement&gt;</span> <span class="roman">&lt;expression&gt;</span> &hellip;)</tt>
</p>
<p>The last clause can be an &ldquo;else clause,&rdquo; which has the form
</p>
<p><tt>(else <span class="roman">&lt;expression&gt;</span> &hellip;)</tt>
</p>
<p>A <span class="roman">&lt;feature requirement&gt;</span> takes one of the following forms:
</p>


<ul>
<li> <tt><span class="roman">&lt;feature identifier&gt;</span></tt>
</li><li> <tt>(library <span class="roman">&lt;library name&gt;</span>)</tt>
</li><li> <tt>(and <span class="roman">&lt;feature requirement&gt;</span> &hellip;)</tt>
</li><li> <tt>(or <span class="roman">&lt;feature requirement&gt;</span> &hellip;)</tt>
</li><li> <tt>(not <span class="roman">&lt;feature requirement&gt;</span>)</tt>

</li></ul>


<p><em>Semantics:</em>
Each implementation maintains a list of feature identifiers which are
present, as well as a list of libraries which can be imported.  The
value of a <span class="roman">&lt;feature requirement&gt;</span> is determined by replacing
each <span class="roman">&lt;feature identifier&gt;</span> and <tt>(library <span class="roman">&lt;library name&gt;</span>)</tt>
on the implementation&rsquo;s lists with <tt>#t</tt>, and all other feature
identifiers and library names with <tt>#f</tt>, then evaluating the
resulting expression as a Scheme boolean expression under the normal
interpretation of &lsquo;<samp>and</samp>&rsquo;, &lsquo;<samp>or</samp>&rsquo;, and &lsquo;<samp>not</samp>&rsquo;.
</p>
<p>A <code>cond-expand</code> is then expanded by evaluating the
<span class="roman">&lt;feature requirement&gt;</span>s of successive <span class="roman">&lt;ce-clause&gt;</span>s
in order until one of them returns <tt>#t</tt>.  When a true clause is
found, the corresponding <span class="roman">&lt;expression&gt;</span>s are expanded to a
&lsquo;<samp>begin</samp>&rsquo;, and the remaining clauses are ignored.
If none of the <span class="roman">&lt;feature requirement&gt;</span>s evaluate to <tt>#t</tt>, then
if there is an else clause, its <span class="roman">&lt;expression&gt;</span>s are
included.  Otherwise, the behavior of the <code>cond-expand</code> is unspecified.
Unlike &lsquo;<samp>cond</samp>&rsquo;, &lsquo;<samp>cond-expand</samp>&rsquo; does not depend on the value
of any variables.
</p>
<p>The exact features provided are implementation-defined, but for
portability a core set of features is given in
appendix <a href="#Standard-Feature-Identifiers">Standard Feature Identifiers</a>.
</p>
</dd></dl>

<hr>
</div>
<div class="subsection" id="Binding-constructs">
<div class="header">
<p>
Next: <a href="#Sequencing" accesskey="n" rel="next">Sequencing</a>, Previous: <a href="#Conditional" accesskey="p" rel="prev">Conditionals</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Binding-constructs-1"></span><h4 class="subsection">4.2.2 Binding constructs</h4>

<span id="index-binding-constructs"></span>


<p>The binding constructs &lsquo;<samp>let</samp>&rsquo;, &lsquo;<samp>let*</samp>&rsquo;, &lsquo;<samp>letrec</samp>&rsquo;, &lsquo;<samp>letrec*</samp>&rsquo;,
&lsquo;<samp>let-values</samp>&rsquo;, and &lsquo;<samp>let*-values</samp>&rsquo;
give Scheme a block structure, like Algol 60.  The syntax of the first four
constructs is identical, but they differ in the regions they establish
<span id="index-region-2"></span>
for their variable bindings.  In a &lsquo;<samp>let</samp>&rsquo; expression, the initial
values are computed before any of the variables become bound; in a
&lsquo;<samp>let*</samp>&rsquo; expression, the bindings and evaluations are performed
sequentially; while in &lsquo;<samp>letrec</samp>&rsquo; and &lsquo;<samp>letrec*</samp>&rsquo; expressions,
all the bindings are in
effect while their initial values are being computed, thus allowing
mutually recursive definitions.
The &lsquo;<samp>let-values</samp>&rsquo; and &lsquo;<samp>let*-values</samp>&rsquo; constructs are analogous to &lsquo;<samp>let</samp>&rsquo; and &lsquo;<samp>let*</samp>&rsquo;
respectively, but are designed to handle multiple-valued expressions, binding
different identifiers to the returned values.
</p>

<dl class="def">
<dt id="index-let"><span class="category">syntax: </span><span><strong>let</strong> <em><span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-let' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</tt>
</pre></div>

<p>where each <span class="roman">&lt;init&gt;</span> is an expression, and <span class="roman">&lt;body&gt;</span> is a
sequence of zero or more definitions followed by a
sequence of one or more expressions as described in section <a href="#Procedures">Procedures</a>.  It is
an error for a <span class="roman">&lt;variable&gt;</span> to appear more than once in the list of variables
being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;init&gt;</span>s are evaluated in the current environment (in some
unspecified order), the <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations
holding the results, the <span class="roman">&lt;body&gt;</span> is evaluated in the extended
environment, and the values of the last expression of <span class="roman">&lt;body&gt;</span>
are returned.  Each binding of a <span class="roman">&lt;variable&gt;</span> has <span class="roman">&lt;body&gt;</span> as its
region.
</p>

<div class="format">
<pre class="format"><tt>(let ((x 2) (y 3))
  (* x y))                             ==&gt;  6

(let ((x 2) (y 3))
  (let ((x 7)
        (z (+ x y)))
    (* z x)))                          ==&gt;  35
</tt>
</pre></div>


<p>See also &ldquo;named &lsquo;<samp>let</samp>&rsquo;,&rdquo; section <a href="#Iteration">Iteration</a>.
</p>
</dd></dl>



<dl class="def">
<dt id="index-let_002a"><span class="category">syntax: </span><span><strong>let*</strong> <em><span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-let_002a' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</tt>
</pre></div>

<p>and <span class="roman">&lt;body&gt;</span> is a sequence of
zero or more definitions followed by
one or more expressions as described in section <a href="#Procedures">Procedures</a>.
</p>
<p><em>Semantics:</em>
The &lsquo;<samp>let*</samp>&rsquo; binding construct is similar to &lsquo;<samp>let</samp>&rsquo;, but the bindings are performed
sequentially from left to right, and the region of a binding indicated
by &lsquo;<samp>(<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;init&gt;</span>)</samp>&rsquo; is that part of the &lsquo;<samp>let*</samp>&rsquo;
expression to the right of the binding.  Thus the second binding is done
in an environment in which the first binding is visible, and so on.
The <span class="roman">&lt;variable&gt;</span>s need not be distinct.
</p>

<div class="format">
<pre class="format"><tt>(let ((x 2) (y 3))
  (let* ((x 7)
         (z (+ x y)))
    (* z x)))                          ==&gt;  70
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-letrec"><span class="category">syntax: </span><span><strong>letrec</strong> <em><span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-letrec' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</tt>
</pre></div>

<p>and <span class="roman">&lt;body&gt;</span> is a sequence of
zero or more definitions followed by
one or more expressions as described in section <a href="#Procedures">Procedures</a>. It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more
than once in the list of variables being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations holding unspecified
values, the <span class="roman">&lt;init&gt;</span>s are evaluated in the resulting environment (in
some unspecified order), each <span class="roman">&lt;variable&gt;</span> is assigned to the result
of the corresponding <span class="roman">&lt;init&gt;</span>, the <span class="roman">&lt;body&gt;</span> is evaluated in the
resulting environment, and the values of the last expression in
<span class="roman">&lt;body&gt;</span> are returned.  Each binding of a <span class="roman">&lt;variable&gt;</span> has the
entire &lsquo;<samp>letrec</samp>&rsquo; expression as its region, making it possible to
define mutually recursive procedures.
</p>

<div class="format">
<pre class="format"><tt>(letrec ((even?
          (lambda (n)
            (if (zero? n)
                #t
                (odd? (- n 1)))))
         (odd?
          (lambda (n)
            (if (zero? n)
                #f
                (even? (- n 1))))))
  (even? 88))
                                       ==&gt;  #t
</tt>
</pre></div>


<p>One restriction on &lsquo;<samp>letrec</samp>&rsquo; is very important: if it is not possible
to evaluate each <span class="roman">&lt;init&gt;</span> without assigning or referring to the value of any
<span class="roman">&lt;variable&gt;</span>, it is an error.  The
restriction is necessary because 
&lsquo;<samp>letrec</samp>&rsquo; is defined in terms of a procedure
call where a &lsquo;<samp>lambda</samp>&rsquo; expression binds the <span class="roman">&lt;variable&gt;</span>s to the values
of the <span class="roman">&lt;init&gt;</span>s.
In the most common uses of &lsquo;<samp>letrec</samp>&rsquo;, all the <span class="roman">&lt;init&gt;</span>s are
lambda expressions and the restriction is satisfied automatically.
</p>
</dd></dl>



<dl class="def">
<dt id="index-letrec_002a"><span class="category">syntax: </span><span><strong>letrec*</strong> <em><span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-letrec_002a' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</tt>
</pre></div>

<p>and <span class="roman">&lt;body&gt;</span> is a sequence of
<span id="index-body"></span>
zero or more definitions followed by
one or more expressions as described in section <a href="#Procedures">Procedures</a>. It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more
than once in the list of variables being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations,
each <span class="roman">&lt;variable&gt;</span> is assigned in left-to-right order to the
result of evaluating the corresponding <span class="roman">&lt;init&gt;</span>
(interleaving evaluations and assignments),
the <span class="roman">&lt;body&gt;</span> is
evaluated in the resulting environment, and the values of the last
expression in <span class="roman">&lt;body&gt;</span> are returned.
Despite the left-to-right evaluation and assignment order, each binding of
a <span class="roman">&lt;variable&gt;</span> has the entire &lsquo;<samp>letrec*</samp>&rsquo; expression as its
region, making it possible to define mutually recursive
procedures.
</p>
<p>If it is not possible to evaluate each <span class="roman">&lt;init&gt;</span> without assigning or
referring to the value of the corresponding <span class="roman">&lt;variable&gt;</span> or the
<span class="roman">&lt;variable&gt;</span> of any of the bindings that follow it in
<span class="roman">&lt;bindings&gt;</span>, it is an error.
Another restriction is that it is an error to invoke the continuation
of an <span class="roman">&lt;init&gt;</span> more than once.
</p>

<div class="format">
<pre class="format"><tt>;; Returns the arithmetic, geometric, and
;; harmonic means of a nested list of numbers
(define (means ton)
  (letrec*
     ((mean
        (lambda (f g)
          (f (/ (sum g ton) n))))
      (sum
        (lambda (g ton)
          (if (null? ton)
            (+)
            (if (number? ton)
                (g ton)
                (+ (sum g (car ton))
                   (sum g (cdr ton)))))))
      (n (sum (lambda (x) 1) ton)))
    (values (mean values values)
            (mean exp log)
            (mean / /))))
</tt>
</pre></div>


<p>Evaluating &lsquo;<samp>(means '(3 (1 4)))</samp>&rsquo; returns three values:
8/3, 2.28942848510666 (approximately), and 36/19.
</p>

</dd><dt id="index-let_002dvalues"><span class="category">syntax: </span><span><strong>let-values</strong> <em><span class="roman">&lt;mv binding spec&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-let_002dvalues' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Mv binding spec&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;formals1&gt;</span> <span class="roman">&lt;init1&gt;</span>) &hellip;)<span class="roman">,</span>
</tt>
</pre></div>


<p>where each <span class="roman">&lt;init&gt;</span> is an expression, and <span class="roman">&lt;body&gt;</span> is
zero or more definitions followed by a sequence of one or
more expressions as described in section <a href="#Procedures">Procedures</a>.  It is an error for a variable to appear more than
once in the set of <span class="roman">&lt;formals&gt;</span>.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;init&gt;</span>s are evaluated in the current environment (in some
unspecified order) as if by invoking &lsquo;<samp>call-with-values</samp>&rsquo;, and the
variables occurring in the <span class="roman">&lt;formals&gt;</span> are bound to fresh locations
holding the values returned by the <span class="roman">&lt;init&gt;</span>s, where the
<span class="roman">&lt;formals&gt;</span> are matched to the return values in the same way that
the <span class="roman">&lt;formals&gt;</span> in a &lsquo;<samp>lambda</samp>&rsquo; expression are matched to the
arguments in a procedure call.  Then, the <span class="roman">&lt;body&gt;</span> is evaluated in
the extended environment, and the values of the last expression of
<span class="roman">&lt;body&gt;</span> are returned.  Each binding of a <span class="roman">&lt;variable&gt;</span> has
<span class="roman">&lt;body&gt;</span> as its region.
</p>
<p>It is an error if the <span class="roman">&lt;formals&gt;</span> do not match the number of
values returned by the corresponding <span class="roman">&lt;init&gt;</span>.
</p>

<div class="format">
<pre class="format"><tt>(let-values (((root rem) (exact-integer-sqrt 32)))
  (* root rem))                        ==&gt;  35
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-let_002a_002dvalues"><span class="category">syntax: </span><span><strong>let*-values</strong> <em><span class="roman">&lt;mv binding spec&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-let_002a_002dvalues' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p><em>Syntax:</em>
<span class="roman">&lt;Mv binding spec&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;formals&gt;</span> <span class="roman">&lt;init&gt;</span>) &hellip;)<span class="roman">,</span>
</tt>
</pre></div>

<p>and <span class="roman">&lt;body&gt;</span> is a sequence of zero or more
definitions followed by one or more expressions as described in section <a href="#Procedures">Procedures</a>.  In each <span class="roman">&lt;formals&gt;</span>,
it is an error if any variable appears more than once.
</p>
<p><em>Semantics:</em>
The &lsquo;<samp>let*-values</samp>&rsquo; construct is similar to &lsquo;<samp>let-values</samp>&rsquo;, but the
<span class="roman">&lt;init&gt;</span>s are evaluated and bindings created sequentially from
left to right, with the region of the bindings of each <span class="roman">&lt;formals&gt;</span>
including the <span class="roman">&lt;init&gt;</span>s to its right as well as <span class="roman">&lt;body&gt;</span>.  Thus the
second <span class="roman">&lt;init&gt;</span> is evaluated in an environment in which the first
set of bindings is visible and initialized, and so on.
</p>

<div class="format">
<pre class="format"><tt>(let ((a 'a) (b 'b) (x 'x) (y 'y))
  (let*-values (((a b) (values x y))
                ((x y) (values a b)))
    (list a b x y)))                   ==&gt; (x y x y)
</tt>
</pre></div>


</dd></dl>



<hr>
</div>
<div class="subsection" id="Sequencing">
<div class="header">
<p>
Next: <a href="#Iteration" accesskey="n" rel="next">Iteration</a>, Previous: <a href="#Binding-constructs" accesskey="p" rel="prev">Binding constructs</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Sequencing-1"></span><h4 class="subsection">4.2.3 Sequencing</h4>

<span id="index-sequencing"></span>


<p>Both of Scheme&rsquo;s sequencing constructs are named &lsquo;<samp>begin</samp>&rsquo;, but the two
have slightly different forms and uses:
</p>

<dl class="def">
<dt id="index-begin"><span class="category">syntax: </span><span><strong>begin</strong> <em><span class="roman">&lt;expression or definition&gt;</span> &hellip;</em><a href='#index-begin' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>This form of &lsquo;<samp>begin</samp>&rsquo; can appear as part of a <span class="roman">&lt;body&gt;</span>, or at the
outermost level of a <span class="roman">&lt;program&gt;</span>, or at the REPL, or directly nested
in a &lsquo;<samp>begin</samp>&rsquo; that is itself of this form.
It causes the contained expressions and definitions to be evaluated
exactly as if the enclosing &lsquo;<samp>begin</samp>&rsquo; construct were not present.
</p>

<blockquote>
<p><em>Rationale:</em>
This form is commonly used in the output of
macros (see section see <a href="#Macros">Macros</a>)
which need to generate multiple definitions and
splice them into the context in which they are expanded.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-begin-1"><span class="category">syntax: </span><span><strong>begin</strong> <em>&lt;expression1&gt; &lt;expression2&gt; &hellip;</em><a href='#index-begin-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>This form of &lsquo;<samp>begin</samp>&rsquo; can be used as an ordinary expression.
The <span class="roman">&lt;expression&gt;</span>s are evaluated sequentially from left to right,
and the values of the last <span class="roman">&lt;expression&gt;</span> are returned. This
expression type is used to sequence side effects such as assignments
or input and output.
</p>

<div class="format">
<pre class="format"><tt>(define x 0)

(and (= x 0)
     (begin (set! x 5)
            (+ x 1)))                  ==&gt;  6

(begin (display &quot;4 plus 1 equals &quot;)
       (display (+ 4 1)))              ==&gt;  <em>unspecified</em>
          <em>and prints</em>  4 plus 1 equals 5
</tt>
</pre></div>


</dd></dl>

<p>Note that there is a third form of &lsquo;<samp>begin</samp>&rsquo; used as a library declaration:
see section <a href="#Library-Syntax">Library Syntax</a>.
</p>
<hr>
</div>
<div class="subsection" id="Iteration">
<div class="header">
<p>
Next: <a href="#Delayed-evaluation" accesskey="n" rel="next">Delayed evaluation</a>, Previous: <a href="#Sequencing" accesskey="p" rel="prev">Sequencing</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Iteration-1"></span><h4 class="subsection">4.2.4 Iteration</h4>


<span id="index-iteration"></span>


<dl class="def">
<dt id="index-_0028do"><span class="category">syntax: </span><span><strong>(do</strong> <em>((<span class="roman">&lt;variable1&gt;</span> <span class="roman">&lt;init1&gt;</span> <span class="roman">&lt;step1&gt;</span>)</em><a href='#index-_0028do' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><tt> &hellip;) (<span class="roman">&lt;test&gt;</span> <span class="roman">&lt;expression&gt;</span> &hellip;) <span class="roman">&lt;command&gt;</span> &hellip;)</tt>
<span id="index-do"></span>
</p>
<p><em>Syntax:</em>
All of <span class="roman">&lt;init&gt;</span>, <span class="roman">&lt;step&gt;</span>, <span class="roman">&lt;test&gt;</span>, and <span class="roman">&lt;command&gt;</span>
are expressions.
</p>
<p><em>Semantics:</em>
A &lsquo;<samp>do</samp>&rsquo; expression is an iteration construct.  It specifies a set of variables to
be bound, how they are to be initialized at the start, and how they are
to be updated on each iteration.  When a termination condition is met,
the loop exits after evaluating the <span class="roman">&lt;expression&gt;</span>s.
</p>
<p>A &lsquo;<samp>do</samp>&rsquo; expression is evaluated as follows:
The <span class="roman">&lt;init&gt;</span> expressions are evaluated (in some unspecified order),
the <span class="roman">&lt;variable&gt;</span>s are bound to fresh locations, the results of the
<span class="roman">&lt;init&gt;</span> expressions are stored in the bindings of the
<span class="roman">&lt;variable&gt;</span>s, and then the iteration phase begins.
</p>
<p>Each iteration begins by evaluating <span class="roman">&lt;test&gt;</span>; if the result is
false (see section see <a href="#Booleans">Booleans</a>), then the <span class="roman">&lt;command&gt;</span>
expressions are evaluated in order for effect, the <span class="roman">&lt;step&gt;</span>
expressions are evaluated in some unspecified order, the
<span class="roman">&lt;variable&gt;</span>s are bound to fresh locations, the results of the
<span class="roman">&lt;step&gt;</span>s are stored in the bindings of the
<span class="roman">&lt;variable&gt;</span>s, and the next iteration begins.
</p>
<p>If <span class="roman">&lt;test&gt;</span> evaluates to a true value, then the
<span class="roman">&lt;expression&gt;</span>s are evaluated from left to right and the values of
the last <span class="roman">&lt;expression&gt;</span> are returned.  If no <span class="roman">&lt;expression&gt;</span>s
are present, then the value of the &lsquo;<samp>do</samp>&rsquo; expression is unspecified.
</p>
<p>The region of the binding of a <span class="roman">&lt;variable&gt;</span>
<span id="index-region-3"></span>
consists of the entire &lsquo;<samp>do</samp>&rsquo; expression except for the <span class="roman">&lt;init&gt;</span>s.
It is an error for a <span class="roman">&lt;variable&gt;</span> to appear more than once in the
list of &lsquo;<samp>do</samp>&rsquo; variables.
</p>
<p>A <span class="roman">&lt;step&gt;</span> can be omitted, in which case the effect is the
same as if &lsquo;<samp>(<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;init&gt;</span> <span class="roman">&lt;variable&gt;</span>)</samp>&rsquo; had
been written instead of &lsquo;<samp>(<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;init&gt;</span>)</samp>&rsquo;.
</p>

<div class="format">
<pre class="format"><tt>(do ((vec (make-vector 5))
     (i 0 (+ i 1)))
    ((= i 5) vec)
  (vector-set! vec i i))               ==&gt;  #(0 1 2 3 4)

(let ((x '(1 3 5 7 9)))
  (do ((x x (cdr x))
       (sum 0 (+ sum (car x))))
      ((null? x) sum)))                ==&gt;  25
</tt>
</pre></div>





</dd><dt id="index-let-1"><span class="category">syntax: </span><span><strong>let</strong> <em><span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-let-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p><em>Semantics:</em>
&ldquo;Named &lsquo;<samp>let</samp>&rsquo;&rdquo; is a variant on the syntax of <code>let</code> which provides
<span id="index-let-2"></span>
a more general looping construct than &lsquo;<samp>do</samp>&rsquo; and can also be used to express
recursion.
It has the same syntax and semantics as ordinary &lsquo;<samp>let</samp>&rsquo;
except that <span class="roman">&lt;variable&gt;</span> is bound within <span class="roman">&lt;body&gt;</span> to a procedure
whose formal arguments are the bound variables and whose body is
<span class="roman">&lt;body&gt;</span>.  Thus the execution of <span class="roman">&lt;body&gt;</span> can be repeated by
invoking the procedure named by <span class="roman">&lt;variable&gt;</span>.
</p>

<div class="format">
<pre class="format"><tt>(let loop ((numbers '(3 -2 1 6 -5))
           (nonneg '())
           (neg '()))
  (cond ((null? numbers) (list nonneg neg))
        ((&gt;= (car numbers) 0)
         (loop (cdr numbers)
               (cons (car numbers) nonneg)
               neg))
        ((&lt; (car numbers) 0)
         (loop (cdr numbers)
               nonneg
               (cons (car numbers) neg)))))   
          ==&gt;  ((6 1 3) (-5 -2))
</tt>
</pre></div>


</dd></dl>


<hr>
</div>
<div class="subsection" id="Delayed-evaluation">
<div class="header">
<p>
Next: <a href="#Dynamic-bindings" accesskey="n" rel="next">Dynamic bindings</a>, Previous: <a href="#Iteration" accesskey="p" rel="prev">Iteration</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Delayed-evaluation-1"></span><h4 class="subsection">4.2.5 Delayed evaluation</h4>

<span id="index-delayed-evaluation"></span>


<dl class="def">
<dt id="index-delay"><span class="category">lazy library syntax: </span><span><strong>delay</strong> <em><span class="roman">&lt;expression&gt;</span></em><a href='#index-delay' class='copiable-anchor'> &para;</a></span></dt>
<dd>


<p><em>Semantics:</em>
The &lsquo;<samp>delay</samp>&rsquo; construct is used together with the procedure <code>force</code> to
<span id="index-force-1"></span>
implement <em>lazy evaluation</em> or <em>call by need</em>.
<span id="index-call-by-need"></span>
<span id="index-lazy-evaluation"></span>
<tt>(delay <span class="roman">&lt;expression&gt;</span>)</tt> returns an object called a
<em>promise</em> which at some point in the future can be asked (by
<span id="index-promise"></span>
the &lsquo;<samp>force</samp>&rsquo; procedure) to evaluate
<span class="roman">&lt;expression&gt;</span>, and deliver the resulting value.
</p>
<p>The effect of <span class="roman">&lt;expression&gt;</span> returning multiple values
is unspecified.
</p>
</dd></dl>


<dl class="def">
<dt id="index-delay_002dforce"><span class="category">lazy library syntax: </span><span><strong>delay-force</strong> <em><span class="roman">&lt;expression&gt;</span></em><a href='#index-delay_002dforce' class='copiable-anchor'> &para;</a></span></dt>
<dd>


<p><em>Semantics:</em>
The expression &lsquo;<samp>(delay-force <var>expression</var>)</samp>&rsquo; is conceptually similar to 
&lsquo;<samp>(delay (force <var>expression</var>))</samp>&rsquo;,
with the difference that forcing the result
of &lsquo;<samp>delay-force</samp>&rsquo; will in effect result in a tail call to 
&lsquo;<samp>(force <var>expression</var>)</samp>&rsquo;,
while forcing the result of
&lsquo;<samp>(delay (force <var>expression</var>))</samp>&rsquo;
might not.  Thus
iterative lazy algorithms that might result in a long series of chains of
&lsquo;<samp>delay</samp>&rsquo; and &lsquo;<samp>force</samp>&rsquo;
can be rewritten using &lsquo;<samp>delay-force</samp>&rsquo; to prevent consuming
unbounded space during evaluation.
</p>
</dd></dl>


<dl class="def">
<dt id="index-force"><span class="category">lazy library procedure: </span><span><strong>force</strong> <em>promise</em><a href='#index-force' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>force</samp>&rsquo; procedure forces the value of a <var>promise</var> created
by <code>delay</code>, <code>delay-force</code>, or <code>make-promise</code>.
<span id="index-make_002dpromise-1"></span>
<span id="index-delay_002dforce-1"></span>
<span id="index-delay-1"></span>
If no value has been computed for the promise, then a value is
computed and returned.  The value of the promise must be cached (or
&ldquo;memoized&rdquo;) so that if it is forced a second time, the previously
computed value is returned.
Consequently, a delayed expression is evaluated using the parameter
values and exception handler of the call to &lsquo;<samp>force</samp>&rsquo; which first
requested its value.
If <var>promise</var> is not a promise, it may be returned unchanged.
</p>

<div class="format">
<pre class="format"><tt>(force (delay (+ 1 2)))                ==&gt;  3
(let ((p (delay (+ 1 2))))
  (list (force p) (force p)))  
                                       ==&gt;  (3 3)

(define integers
  (letrec ((next
            (lambda (n)
              (delay (cons n (next (+ n 1)))))))
    (next 0)))
(define head
  (lambda (stream) (car (force stream))))
(define tail
  (lambda (stream) (cdr (force stream))))

(head (tail (tail integers)))  
                                       ==&gt;  2
</tt>
</pre></div>


<p>The following example is a mechanical transformation of a lazy
stream-filtering algorithm into Scheme.  Each call to a constructor is
wrapped in &lsquo;<samp>delay</samp>&rsquo;, and each argument passed to a deconstructor is
wrapped in &lsquo;<samp>force</samp>&rsquo;.  The use of &lsquo;<samp>(delay-force ...)</samp>&rsquo; instead of &lsquo;<samp>(delay (force ...))</samp>&rsquo; around the body of the procedure ensures that an
ever-growing sequence of pending promises does not 
exhaust available storage,
because &lsquo;<samp>force</samp>&rsquo; will in effect force such sequences iteratively.
</p>

<div class="format">
<pre class="format"><tt>(define (stream-filter p? s)
  (delay-force
   (if (null? (force s)) 
       (delay '())
       (let ((h (car (force s)))
             (t (cdr (force s))))
         (if (p? h)
             (delay (cons h (stream-filter p? t)))
             (stream-filter p? t))))))

(head (tail (tail (stream-filter odd? integers))))
                                       ==&gt; 5
</tt>
</pre></div>


<p>The following examples are not intended to illustrate good programming
style, as &lsquo;<samp>delay</samp>&rsquo;, &lsquo;<samp>force</samp>&rsquo;, and &lsquo;<samp>delay-force</samp>&rsquo; are mainly intended
for programs written in the functional style.
However, they do illustrate the property that only one value is
computed for a promise, no matter how many times it is forced.
</p>

<div class="format">
<pre class="format"><tt>(define count 0)
(define p
  (delay (begin (set! count (+ count 1))
                (if (&gt; count x)
                    count
                    (force p)))))
(define x 5)
p                                      ==&gt;  <i></i>a promise
(force p)                              ==&gt;  6
p                                      ==&gt;  <i></i>a promise, still
(begin (set! x 10)
       (force p))                      ==&gt;  6
</tt>
</pre></div>


<p>Various extensions to this semantics of &lsquo;<samp>delay</samp>&rsquo;, &lsquo;<samp>force</samp>&rsquo; and
&lsquo;<samp>delay-force</samp>&rsquo; are supported in some implementations:
</p>


<ul>
<li> Calling &lsquo;<samp>force</samp>&rsquo; on an object that is not a promise may simply
return the object.

</li><li> It may be the case that there is no means by which a promise can be
operationally distinguished from its forced value.  That is, expressions
like the following may evaluate to either <tt>#t</tt> or to <tt>#f</tt>,
depending on the implementation:


<div class="format">
<pre class="format"><tt>(eqv? (delay 1) 1)                ==&gt;  <em>unspecified</em>
(pair? (delay (cons 1 2)))        ==&gt;  <em>unspecified</em>
</tt>
</pre></div>


</li><li> Implementations may implement &ldquo;implicit forcing,&rdquo; where
the value of a promise is forced by procedures
that operate only on arguments of a certain type, like &lsquo;<samp>cdr</samp>&rsquo;
and &lsquo;<samp>*</samp>&rsquo;.  However, procedures that operate uniformly on their
arguments, like &lsquo;<samp>list</samp>&rsquo;, must not force them.


<div class="format">
<pre class="format"><tt>(+ (delay (* 3 7)) 13)            ==&gt;  <em>unspecified</em>
(car
  (list (delay (* 3 7)) 13))      ==&gt; <i></i>a promise
</tt>
</pre></div>


</li></ul>

</dd></dl>


<dl class="def">
<dt id="index-promise_003f"><span class="category">lazy library procedure: </span><span><strong>promise?</strong> <em><var>obj</var></em><a href='#index-promise_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>promise?</samp>&rsquo; procedure returns 
<tt>#t</tt> if its argument is a promise, and <tt>#f</tt> otherwise.  Note
that promises are not necessarily disjoint from other Scheme types such
as procedures.
</p>
</dd></dl>


<dl class="def">
<dt id="index-make_002dpromise"><span class="category">lazy library procedure: </span><span><strong>make-promise</strong> <em><var>obj</var></em><a href='#index-make_002dpromise' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>make-promise</samp>&rsquo; procedure returns a promise which, when forced, will return
<var>obj</var>.  It is similar to &lsquo;<samp>delay</samp>&rsquo;, but does not delay
its argument: it is a procedure rather than syntax.
If <var>obj</var> is already a promise, it is returned.
</p>
</dd></dl>

<hr>
</div>
<div class="subsection" id="Dynamic-bindings">
<div class="header">
<p>
Next: <a href="#Exception-handling" accesskey="n" rel="next">Exception handling</a>, Previous: <a href="#Delayed-evaluation" accesskey="p" rel="prev">Delayed evaluation</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Dynamic-bindings-1"></span><h4 class="subsection">4.2.6 Dynamic bindings</h4>

<span id="index-dynamic-bindings"></span>

<p>The <em>dynamic extent</em> of a procedure call is the time between
<span id="index-dynamic-extent"></span>
when it is initiated and when it returns.  In Scheme, &lsquo;<samp>call-with-current-continuation</samp>&rsquo; (section see <a href="#Control-features">Control features</a>) allows
reentering a dynamic extent after its procedure call has returned.
Thus, the dynamic extent of a call might not be a single, continuous time
period.
</p>
<p>This sections introduces <em>parameter objects</em>, which can be
<span id="index-parameter-objects"></span>
bound to new values for the duration of a dynamic extent.  The set of
all parameter bindings at a given time is called the <em>dynamic
  environment</em>.
<span id="index-dynamic-"></span>
  environment
</p>

<dl class="def">
<dt id="index-make_002dparameter"><span class="category">procedure: </span><span><strong>make-parameter</strong> <em>init</em><a href='#index-make_002dparameter' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-make_002dparameter-1"><span class="category">procedure: </span><span><strong>make-parameter</strong> <em>init converter</em><a href='#index-make_002dparameter-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated parameter object,
which is a procedure that accepts zero arguments and
returns the value associated with the parameter object.
Initially, this value is the value of
&lsquo;<samp>(<var>converter</var> <var>init</var>)</samp>&rsquo;, or of <var>init</var>
if the conversion procedure <var>converter</var> is not specified.
The associated value can be temporarily changed
using &lsquo;<samp>parameterize</samp>&rsquo;, which is described below.
</p>
<p>The effect of passing arguments to a parameter object is
implementation-dependent.
</p></dd></dl>


<dl class="def">
<dt id="index-_0028parameterize"><span class="category">syntax: </span><span><strong>(parameterize</strong> <em>((<span class="roman">&lt;param1&gt;</span> <span class="roman">&lt;value1&gt;</span>) &hellip;)</em><a href='#index-_0028parameterize' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><tt>hspace*1em<span class="roman">&lt;body&gt;</span>)</tt>
</p>
<span id="index-parameterize"></span>

<p><em>Syntax:</em>
Both <span class="roman">&lt;param1&gt;</span> and <span class="roman">&lt;value1&gt;</span> are expressions.
</p>
<p>It is an error if the value of any <span class="roman">&lt;param&gt;</span> expression is not a parameter object.
<em>Semantics:</em>
A &lsquo;<samp>parameterize</samp>&rsquo; expression is used to change the values returned by
specified parameter objects during the evaluation of the body.
</p>
<p>The <span class="roman">&lt;param&gt;</span> and <span class="roman">&lt;value&gt;</span> expressions
are evaluated in an unspecified order.  The <span class="roman">&lt;body&gt;</span> is
evaluated in a dynamic environment in which calls to the
parameters return the results of passing the corresponding values
to the conversion procedure specified when the parameters were created.
Then the previous values of the parameters are restored without passing
them to the conversion procedure.
The results of the last
expression in the <span class="roman">&lt;body&gt;</span> are returned as the results of the entire
&lsquo;<samp>parameterize</samp>&rsquo; expression.
</p>

<blockquote>
<p><em>Note:</em>
If the conversion procedure is not idempotent, the results of
&lsquo;<samp>(parameterize ((x (x))) ...)</samp>&rsquo;,
which appears to bind the parameter <var>x</var> to its current value,
might not be what the user expects.
</p></blockquote>


<p>If an implementation supports multiple threads of execution, then
&lsquo;<samp>parameterize</samp>&rsquo; must not change the associated values of any parameters
in any thread other than the current thread and threads created
inside <span class="roman">&lt;body&gt;</span>.
</p>
<p>Parameter objects can be used to specify configurable settings for a
computation without the need to pass the value to every
procedure in the call chain explicitly.
</p>

<div class="format">
<pre class="format"><tt>(define radix
  (make-parameter
   10
   (lambda (x)
     (if (and (exact-integer? x) (&lt;= 2 x 16))
         x
         (error &quot;invalid radix&quot;)))))

(define (f n) (number-&gt;string n (radix)))

(f 12)                                       ==&gt; &quot;12&quot;
(parameterize ((radix 2))
  (f 12))                                    ==&gt; &quot;1100&quot;
(f 12)                                       ==&gt; &quot;12&quot;

(radix 16)                                   ==&gt; <em>unspecified</em>

(parameterize ((radix 0))
  (f 12))                                    ==&gt; <em>error</em>
</tt>
</pre></div>

</dd></dl>


<hr>
</div>
<div class="subsection" id="Exception-handling">
<div class="header">
<p>
Next: <a href="#Quasiquotation" accesskey="n" rel="next">Quasiquotation</a>, Previous: <a href="#Dynamic-bindings" accesskey="p" rel="prev">Dynamic bindings</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Exception-handling-1"></span><h4 class="subsection">4.2.7 Exception handling</h4>

<span id="index-exception-handling"></span>


<dl class="def">
<dt id="index-_0028guard"><span class="category">syntax: </span><span><strong>(guard</strong> <em>(<span class="roman">&lt;variable&gt;</span></em><a href='#index-_0028guard' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><tt>hspace*4em<span class="roman">&lt;cond clause1&gt;</span> <span class="roman">&lt;cond clause2&gt;</span> &hellip;)hspace*2em<span class="roman">&lt;body&gt;</span>)</tt>
</p>

<span id="index-guard"></span>

<p><em>Syntax:</em>
Each <span class="roman">&lt;cond clause&gt;</span> is as in the specification of &lsquo;<samp>cond</samp>&rsquo;.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;body&gt;</span> is evaluated with an exception
handler that binds the raised object (see <code>raise</code> in section see <a href="#Exceptions">Exceptions</a>)
<span id="index-raise-1"></span>
to <span class="roman">&lt;variable&gt;</span> and, within the scope of
that binding, evaluates the clauses as if they were the clauses of a
&lsquo;<samp>cond</samp>&rsquo; expression. That implicit &lsquo;<samp>cond</samp>&rsquo; expression is evaluated with the
continuation and dynamic environment of the &lsquo;<samp>guard</samp>&rsquo; expression. If every
<span class="roman">&lt;cond clause&gt;</span>&rsquo;s <span class="roman">&lt;test&gt;</span> evaluates to <tt>#f</tt> and there
is no else clause, then
&lsquo;<samp>raise-continuable</samp>&rsquo; is invoked on the raised object within the dynamic
environment of the original call to &lsquo;<samp>raise</samp>&rsquo;
or &lsquo;<samp>raise-continuable</samp>&rsquo;, except that the current
exception handler is that of the &lsquo;<samp>guard</samp>&rsquo; expression.
</p>

<p>See section <a href="#Exceptions">Exceptions</a> for a more complete discussion of
exceptions.
</p>

<div class="format">
<pre class="format"><tt>(guard (condition
         ((assq 'a condition) =&gt; cdr)
         ((assq 'b condition)))
  (raise (list (cons 'a 42))))
                                       ==&gt; 42

(guard (condition
         ((assq 'a condition) =&gt; cdr)
         ((assq 'b condition)))
  (raise (list (cons 'b 23))))
                                       ==&gt; (b . 23)
</tt>
</pre></div>

</dd></dl>


<hr>
</div>
<div class="subsection" id="Quasiquotation">
<div class="header">
<p>
Next: <a href="#Case_002dlambda" accesskey="n" rel="next">Case-lambda</a>, Previous: <a href="#Exception-handling" accesskey="p" rel="prev">Exception handling</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Quasiquotation-1"></span><h4 class="subsection">4.2.8 Quasiquotation</h4>

<span id="index-quasiquotation"></span>



<dl class="def">
<dt id="index-quasiquote"><span class="category">syntax: </span><span><strong>quasiquote</strong> <em><span class="roman">&lt;qq template&gt;</span></em><a href='#index-quasiquote' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_0060_003cqq-template_003e"><span class="category">syntax: </span><span><strong><tt>`</tt><span class="roman">&lt;qq template&gt;</span></strong><a href='#index-_0060_003cqq-template_003e' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-unquote"><span class="category">auxiliary syntax: </span><span><strong>unquote</strong><a href='#index-unquote' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_002c-1"><span class="category">auxiliary syntax: </span><span><strong><tt>,</tt></strong><a href='#index-_002c-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-unquote_002dsplicing"><span class="category">auxiliary syntax: </span><span><strong>unquote-splicing</strong><a href='#index-unquote_002dsplicing' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_002c_0040-1"><span class="category">auxiliary syntax: </span><span><strong><tt>,@</tt></strong><a href='#index-_002c_0040-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>&ldquo;Quasiquote&rdquo; expressions are useful
<span id="index-backquote"></span>
for constructing a list or vector structure when some but not all of the
desired structure is known in advance.  If no
commas appear within the <span class="roman">&lt;qq template&gt;</span>, the result of
<span id="index-comma"></span>
evaluating
<tt>`</tt><span class="roman">&lt;qq template&gt;</span> is equivalent to the result of evaluating
<tt>'</tt><span class="roman">&lt;qq template&gt;</span>.  If a comma appears within the
<span id="index-_002c"></span>
<span class="roman">&lt;qq template&gt;</span>, however, the expression following the comma is
evaluated (&ldquo;unquoted&rdquo;) and its result is inserted into the structure
instead of the comma and the expression.  If a comma appears followed
without intervening whitespace by a commercial at-sign (@), then it is an error if the following
<span id="index-_002c_0040"></span>
expression does not evaluate to a list; the opening and closing parentheses
of the list are then &ldquo;stripped away&rdquo; and the elements of the list are
inserted in place of the comma at-sign expression sequence.  A comma
at-sign normally appears only within a list or vector <span class="roman">&lt;qq template&gt;</span>.
</p>

<blockquote>
<p><em>Note:</em>
In order to unquote an identifier beginning with &lsquo;<samp>@</samp>&rsquo;, it is necessary
to use either an explicit &lsquo;<samp>unquote</samp>&rsquo; or to put whitespace after the comma,
to avoid colliding with the comma at-sign sequence.
</p></blockquote>



<div class="format">
<pre class="format"><tt>`(list ,(+ 1 2) 4)                     ==&gt;  (list 3 4)
(let ((name 'a)) `(list ,name ',name))           
          ==&gt;  (list a (quote a))
`(a ,(+ 1 2) ,@(map abs '(4 -5 6)) b)           
          ==&gt;  (a 3 4 5 6 b)
`((&lsquo;<samp>foo</samp>&rsquo; ,(- 10 3)) ,@(cdr '(c)) . ,(car '(cons)))           
          ==&gt;  ((foo 7) . cons)
`#(10 5 ,(sqrt 4) ,@(map sqrt '(16 9)) 8)           
          ==&gt;  #(10 5 2 4 3 8)
(let ((foo '(foo bar)) (@baz 'baz))
  `(list ,@foo , @baz))
          
          ==&gt;  (list foo bar baz)
</tt>
</pre></div>


<p>Quasiquote expressions can be nested.  Substitutions are made only for
unquoted components appearing at the same nesting level
as the outermost quasiquote.  The nesting level increases by one inside
each successive quasiquotation, and decreases by one inside each
unquotation.
</p>

<div class="format">
<pre class="format"><tt>`(a `(b ,(+ 1 2) ,(foo ,(+ 1 3) d) e) f)           
          ==&gt;  (a `(b ,(+ 1 2) ,(foo 4 d) e) f)
(let ((name1 'x)
      (name2 'y))
  `(a `(b ,,name1 ,',name2 d) e))           
          ==&gt;  (a `(b ,x ,'y d) e)
</tt>
</pre></div>


<p>A quasiquote expression may return either newly allocated, mutable objects or
literal structure for any structure that is constructed at run time
during the evaluation of the expression. Portions that do not need to
be rebuilt are always literal. Thus,
</p>

<div class="format">
<pre class="format"><tt>(let ((a 3)) `((1 2) ,a ,4 ,'five 6))
</tt>
</pre></div>


<p>may be treated as equivalent to either of the following expressions:
</p>

<div class="format">
<pre class="format"><tt>`((1 2) 3 4 five 6)

(let ((a 3))
  (cons '(1 2)
        (cons a (cons 4 (cons 'five '(6))))))
</tt>
</pre></div>


<p>However, it is not equivalent to this expression:
</p>

<div class="format">
<pre class="format"><tt>(let ((a 3)) (list (list 1 2) a 4 'five 6))
</tt>
</pre></div>


<p>The two notations
 <tt>`</tt><span class="roman">&lt;qq template&gt;</span> and <tt>(quasiquote <span class="roman">&lt;qq template&gt;</span>)</tt>
 are identical in all respects.
 &lsquo;<samp>,<span class="roman">&lt;expression&gt;</span></samp>&rsquo; is identical to &lsquo;<samp>(unquote <span class="roman">&lt;expression&gt;</span>)</samp>&rsquo;,
 and
 &lsquo;<samp>,@<span class="roman">&lt;expression&gt;</span></samp>&rsquo; is identical to &lsquo;<samp>(unquote-splicing <span class="roman">&lt;expression&gt;</span>)</samp>&rsquo;.
The <code>write</code> procedure may output either format.
<span id="index-write-2"></span>
</p>
<span id="index-_0060"></span>


<div class="format">
<pre class="format"><tt>(quasiquote (list (unquote (+ 1 2)) 4))           
          ==&gt;  (list 3 4)
'(quasiquote (list (unquote (+ 1 2)) 4))           
          ==&gt;  `(list ,(+ 1 2) 4)
     <em></em>i.e., (quasiquote (list (unquote (+ 1 2)) 4))
</tt>
</pre></div>



<p>It is an error if any of the identifiers &lsquo;<samp>quasiquote</samp>&rsquo;, &lsquo;<samp>unquote</samp>&rsquo;,
or &lsquo;<samp>unquote-splicing</samp>&rsquo; appear in positions within a <span class="roman">&lt;qq template&gt;</span>
otherwise than as described above.
</p>
</dd></dl>

<hr>
</div>
<div class="subsection" id="Case_002dlambda">
<div class="header">
<p>
Previous: <a href="#Quasiquotation" accesskey="p" rel="prev">Quasiquotation</a>, Up: <a href="#Derived-expression-types" accesskey="u" rel="up">Derived expression types</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Case_002dlambda-1"></span><h4 class="subsection">4.2.9 Case-lambda</h4>

<span id="index-case_002dlambda"></span>


<dl class="def">
<dt id="index-case_002dlambda-1"><span class="category">case-lambda library syntax: </span><span><strong>case-lambda</strong> <em><span class="roman">&lt;clause&gt;</span> &hellip;</em><a href='#index-case_002dlambda-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
Each <span class="roman">&lt;clause&gt;</span> is of the form
(<span class="roman">&lt;formals&gt;</span> <span class="roman">&lt;body&gt;</span>),
where <span class="roman">&lt;formals&gt;</span> and <span class="roman">&lt;body&gt;</span> have the same syntax
as in a lambda expression.
</p>
<p><em>Semantics:</em>
A &lsquo;<samp>case-lambda</samp>&rsquo; expression evaluates to a procedure that accepts
a variable number of arguments and is lexically scoped in the same
manner as a procedure resulting from a lambda expression. When the procedure
is called, the first <span class="roman">&lt;clause&gt;</span> for which the arguments agree
with <span class="roman">&lt;formals&gt;</span> is selected, where agreement is specified as for
the <span class="roman">&lt;formals&gt;</span> of a lambda expression. The variables of <span class="roman">&lt;formals&gt;</span> are
bound to fresh locations, the values of the arguments are stored in those
locations, the <span class="roman">&lt;body&gt;</span> is evaluated in the extended environment,
and the results of <span class="roman">&lt;body&gt;</span> are returned as the results of the
procedure call.
</p>
<p>It is an error for the arguments not to agree with
the <span class="roman">&lt;formals&gt;</span> of any <span class="roman">&lt;clause&gt;</span>.
</p>

<div class="format">
<pre class="format"><tt>(define range
  (case-lambda
   ((e) (range 0 e))
   ((b e) (do ((r '() (cons e r))
               (e (- e 1) (- e 1)))
              ((&lt; e b) r)))))

(range 3)                              ==&gt; (0 1 2)
(range 3 5)                            ==&gt; (3 4)
</tt>
</pre></div>


</dd></dl>

<hr>
</div>
</div>
<div class="section" id="Macros">
<div class="header">
<p>
Previous: <a href="#Derived-expression-types" accesskey="p" rel="prev">Derived expression types</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Macros-1"></span><h3 class="section">4.3 Macros</h3>


<span id="index-macros"></span>


<p>Scheme programs can define and use new derived expression types,
 called <em>macros</em>.
<span id="index-macro"></span>
Program-defined expression types have the syntax
</p>
<div class="example">
<pre class="example">

(<span class="roman">&lt;keyword&gt;</span> <span class="roman">&lt;datum&gt;</span> ...)

</pre></div>

<p>where <span class="roman">&lt;keyword&gt;</span> is an identifier that uniquely determines the
expression type.  This identifier is called the <em>syntactic
keyword</em>, or simply <em>keyword</em>, of the macro.  The
<span id="index-macro-keyword"></span>
<span id="index-keyword"></span>
<span id="index-syntactic-keyword-2"></span>
number of the <span class="roman">&lt;datum&gt;</span>s, and their syntax, depends on the
expression type.
</p>
<p>Each instance of a macro is called a <em>use</em>
<span id="index-macro-use"></span>
of the macro.
The set of rules that specifies
how a use of a macro is transcribed into a more primitive expression
is called the <em>transformer</em>
<span id="index-macro-transformer"></span>
of the macro.
</p>
<p>The macro definition facility consists of two parts:
</p>


<ul>
<li> A set of expressions used to establish that certain identifiers
are macro keywords, associate them with macro transformers, and control
the scope within which a macro is defined, and

</li><li> a pattern language for specifying macro transformers.

</li></ul>


<p>The syntactic keyword of a macro can shadow variable bindings, and local
variable bindings can shadow syntactic bindings.    
Two mechanisms are provided to prevent unintended conflicts:
</p>


<ul>
<li> If a macro transformer inserts a binding for an identifier
(variable or keyword), the identifier will in effect be renamed
throughout its scope to avoid conflicts with other identifiers.
Note that a global variable definition may or may not introduce a binding;
see section <a href="#Variable-definitions">Variable definitions</a>.

</li><li> If a macro transformer inserts a free reference to an
identifier, the reference refers to the binding that was visible
where the transformer was specified, regardless of any local
bindings that surround the use of the macro.


</li></ul>


<p>In consequence, all macros
defined using the pattern language  are &ldquo;hygienic&rdquo; and &ldquo;referentially
transparent&rdquo; and thus preserve Scheme&rsquo;s lexical scoping. [Kohlbecker86], [
hygienic], [Bawden88], [macrosthatwork], [syntacticabstraction]
</p>
<span id="index-referentially-transparent"></span>
<span id="index-hygienic"></span>

<p>Implementations may provide macro facilities of other types.
</p>
<ul class="section-toc">
<li><a href="#Binding-constructs-for-syntactic-keywords" accesskey="1">Binding constructs for syntactic keywords</a></li>
<li><a href="#Pattern-language" accesskey="2">Pattern language</a></li>
<li><a href="#Signaling-errors-in-macro-transformers" accesskey="3">Signaling errors in macro transformers</a></li>
</ul>
<hr>
<div class="subsection" id="Binding-constructs-for-syntactic-keywords">
<div class="header">
<p>
Next: <a href="#Pattern-language" accesskey="n" rel="next">Pattern language</a>, Previous: <a href="#Macros" accesskey="p" rel="prev">Macros</a>, Up: <a href="#Macros" accesskey="u" rel="up">Macros</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Binding-constructs-for-syntactic-keywords-1"></span><h4 class="subsection">4.3.1 Binding constructs for syntactic keywords</h4>

<span id="index-binding-constructs-for-syntactic-keywords"></span>


<p>The &lsquo;<samp>let-syntax</samp>&rsquo; and &lsquo;<samp>letrec-syntax</samp>&rsquo; binding constructs are
analogous to &lsquo;<samp>let</samp>&rsquo; and &lsquo;<samp>letrec</samp>&rsquo;, but they bind
syntactic keywords to macro transformers instead of binding variables
to locations that contain values.  Syntactic keywords can also be
bound globally or locally with &lsquo;<samp>define-syntax</samp>&rsquo;;
see section <a href="#Syntax-definitions">Syntax definitions</a>.
</p>

<dl class="def">
<dt id="index-let_002dsyntax"><span class="category">syntax: </span><span><strong>let-syntax</strong> <em><span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-let_002dsyntax' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
<span class="roman">&lt;Bindings&gt;</span> has the form
</p>
<div class="format">
<pre class="format"><tt>((<span class="roman">&lt;keyword&gt;</span> <span class="roman">&lt;transformer spec&gt;</span>) &hellip;)
</tt>
</pre></div>

<p>Each <span class="roman">&lt;keyword&gt;</span> is an identifier,
each <span class="roman">&lt;transformer spec&gt;</span> is an instance of &lsquo;<samp>syntax-rules</samp>&rsquo;, and
<span class="roman">&lt;body&gt;</span> is a sequence of zero or more definitions followed
by one or more expressions.  It is an error
for a <span class="roman">&lt;keyword&gt;</span> to appear more than once in the list of keywords
being bound.
</p>
<p><em>Semantics:</em>
The <span class="roman">&lt;body&gt;</span> is expanded in the syntactic environment
obtained by extending the syntactic environment of the
&lsquo;<samp>let-syntax</samp>&rsquo; expression with macros whose keywords are
the <span class="roman">&lt;keyword&gt;</span>s, bound to the specified transformers.
Each binding of a <span class="roman">&lt;keyword&gt;</span> has <span class="roman">&lt;body&gt;</span> as its region.
</p>

<div class="format">
<pre class="format"><tt>(let-syntax ((given-that (syntax-rules ()
                     ((given-that test stmt1 stmt2 ...)
                      (if test
                          (begin stmt1
                                 stmt2 ...))))))
  (let ((if #t))
    (given-that if (set! if 'now))
    if))                               ==&gt;  now

(let ((x 'outer))
  (let-syntax ((m (syntax-rules () ((m) x))))
    (let ((x 'inner))
      (m))))                           ==&gt;  outer
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-letrec_002dsyntax"><span class="category">syntax: </span><span><strong>letrec-syntax</strong> <em><span class="roman">&lt;bindings&gt;</span> <span class="roman">&lt;body&gt;</span></em><a href='#index-letrec_002dsyntax' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><em>Syntax:</em>
Same as for &lsquo;<samp>let-syntax</samp>&rsquo;.
</p>
<p><em>Semantics:</em>
 The <span class="roman">&lt;body&gt;</span> is expanded in the syntactic environment obtained by
extending the syntactic environment of the &lsquo;<samp>letrec-syntax</samp>&rsquo;
expression with macros whose keywords are the
<span class="roman">&lt;keyword&gt;</span>s, bound to the specified transformers.
Each binding of a <span class="roman">&lt;keyword&gt;</span> has the <span class="roman">&lt;transformer spec&gt;</span>s
as well as the <span class="roman">&lt;body&gt;</span> within its region,
so the transformers can
transcribe expressions into uses of the macros
introduced by the &lsquo;<samp>letrec-syntax</samp>&rsquo; expression.
</p>

<div class="format">
<pre class="format"><tt>(letrec-syntax
    ((my-or (syntax-rules ()
              ((my-or) #f)
              ((my-or e) e)
              ((my-or e1 e2 ...)
               (let ((temp e1))
                 (if temp
                     temp
                     (my-or e2 ...)))))))
  (let ((x #f)
        (y 7)
        (temp 8)
        (let odd?)
        (if even?))
    (my-or x
           (let temp)
           (if y)
           y)))                        ==&gt;  7
</tt>
</pre></div>


</dd></dl>

<hr>
</div>
<div class="subsection" id="Pattern-language">
<div class="header">
<p>
Next: <a href="#Signaling-errors-in-macro-transformers" accesskey="n" rel="next">Signaling errors in macro transformers</a>, Previous: <a href="#Binding-constructs-for-syntactic-keywords" accesskey="p" rel="prev">Binding constructs for syntactic keywords</a>, Up: <a href="#Macros" accesskey="u" rel="up">Macros</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Pattern-language-1"></span><h4 class="subsection">4.3.2 Pattern language</h4>

<span id="index-pattern-language"></span>


<p>A <span class="roman">&lt;transformer spec&gt;</span> has one of the following forms:
</p>

<dl class="def">
<dt id="index-_0028syntax_002drules"><span class="category">syntax: </span><span><strong>(syntax-rules</strong> <em>(<span class="roman">&lt;pattern literal&gt;</span> &hellip;)</em><a href='#index-_0028syntax_002drules' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><tt>hspace*1em<span class="roman">&lt;syntax rule&gt;</span> &hellip;)</tt>
</p>
</dd><dt id="index-_0028syntax_002drules-1"><span class="category">syntax: </span><span><strong>(syntax-rules</strong> <em><span class="roman">&lt;ellipsis&gt;</span> (<span class="roman">&lt;pattern literal&gt;</span> &hellip;)</em><a href='#index-_0028syntax_002drules-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><tt>hspace*1em<span class="roman">&lt;syntax rule&gt;</span> &hellip;)</tt>
</p>
</dd><dt><span class="category">auxiliary syntax: </span><span><strong></strong></span></dt>
<dt id="index-_2026"><span class="category">auxiliary syntax: </span><span><strong>&hellip;</strong><a href='#index-_2026' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<span id="index-_005f"></span>

<p><em>Syntax:</em>
It is an error if any of the <span class="roman">&lt;pattern literal&gt;</span>s, or the <span class="roman">&lt;ellipsis&gt;</span> in the second form,
is not an identifier.
It is also an error if
<span class="roman">&lt;syntax rule&gt;</span> is not of the form
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;template&gt;</span>)
</tt>
</pre></div>

<p>The <span class="roman">&lt;pattern&gt;</span> in a <span class="roman">&lt;syntax rule&gt;</span> is a list <span class="roman">&lt;pattern&gt;</span>
whose first element is an identifier.
</p>
<p>A <span class="roman">&lt;pattern&gt;</span> is either an identifier, a constant, or one of the
following
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;pattern&gt;</span> &hellip;)
(<span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;pattern&gt;</span> &hellip; . <span class="roman">&lt;pattern&gt;</span>)
(<span class="roman">&lt;pattern&gt;</span> &hellip; <span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;ellipsis&gt;</span> <span class="roman">&lt;pattern&gt;</span> &hellip;)
(<span class="roman">&lt;pattern&gt;</span> &hellip; <span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;ellipsis&gt;</span> <span class="roman">&lt;pattern&gt;</span> &hellip;
  . <span class="roman">&lt;pattern&gt;</span>)
#(<span class="roman">&lt;pattern&gt;</span> &hellip;)
#(<span class="roman">&lt;pattern&gt;</span> &hellip; <span class="roman">&lt;pattern&gt;</span> <span class="roman">&lt;ellipsis&gt;</span> <span class="roman">&lt;pattern&gt;</span> &hellip;)
</tt>
</pre></div>

<p>and a <span class="roman">&lt;template&gt;</span> is either an identifier, a constant, or one of the following
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;element&gt;</span> &hellip;)
(<span class="roman">&lt;element&gt;</span> <span class="roman">&lt;element&gt;</span> &hellip; . <span class="roman">&lt;template&gt;</span>)
(<span class="roman">&lt;ellipsis&gt;</span> <span class="roman">&lt;template&gt;</span>)
#(<span class="roman">&lt;element&gt;</span> &hellip;)
</tt>
</pre></div>

<p>where an <span class="roman">&lt;element&gt;</span> is a <span class="roman">&lt;template&gt;</span> optionally
followed by an <span class="roman">&lt;ellipsis&gt;</span>.
An <span class="roman">&lt;ellipsis&gt;</span> is the identifier specified in the second form
of &lsquo;<samp>syntax-rules</samp>&rsquo;, or the default identifier &lsquo;<samp>...</samp>&rsquo;
(three consecutive periods) otherwise.
<span id="index-_002e_002e_002e"></span>
</p>
<p><em>Semantics:</em> An instance of &lsquo;<samp>syntax-rules</samp>&rsquo; produces a new macro
transformer by specifying a sequence of hygienic rewrite rules.  A use
of a macro whose keyword is associated with a transformer specified by
&lsquo;<samp>syntax-rules</samp>&rsquo; is matched against the patterns contained in the
<span class="roman">&lt;syntax rule&gt;</span>s, beginning with the leftmost <span class="roman">&lt;syntax rule&gt;</span>.
When a match is found, the macro use is transcribed hygienically
according to the template.
</p>
<p>An identifier appearing within a <span class="roman">&lt;pattern&gt;</span> can be an underscore
(&lsquo;<samp> </samp>&rsquo;), a literal identifier listed in the list of <span class="roman">&lt;pattern literal&gt;</span>s,
or the <span class="roman">&lt;ellipsis&gt;</span>.
All other identifiers appearing within a <span class="roman">&lt;pattern&gt;</span> are
<em>pattern variables</em>.
</p>
<p>The keyword at the beginning of the pattern in a
<span class="roman">&lt;syntax rule&gt;</span> is not involved in the matching and
is considered neither a pattern variable nor a literal identifier.
</p>
<p>Pattern variables match arbitrary input elements and
are used to refer to elements of the input in the template.
It is an error for the same pattern variable to appear more than once in a
<span class="roman">&lt;pattern&gt;</span>.
</p>
<p>Underscores also match arbitrary input elements but are not pattern variables
and so cannot be used to refer to those elements.  If an underscore appears
in the <span class="roman">&lt;pattern literal&gt;</span>s list, then that takes precedence and
underscores in the <span class="roman">&lt;pattern&gt;</span> match as literals.
Multiple underscores can appear in a <span class="roman">&lt;pattern&gt;</span>.
</p>
<p>Identifiers that appear in <tt>(<span class="roman">&lt;pattern literal&gt;</span> &hellip;)</tt> are
interpreted as literal
identifiers to be matched against corresponding elements of the input.
An element in the input matches a literal identifier if and only if it is an
identifier and either both its occurrence in the macro expression and its
occurrence in the macro definition have the same lexical binding, or
the two identifiers are the same and both have no lexical binding.
</p>
<p>A subpattern followed by <span class="roman">&lt;ellipsis&gt;</span> can match zero or more elements of
the input, unless <span class="roman">&lt;ellipsis&gt;</span> appears in the <span class="roman">&lt;pattern literal&gt;</span>s, in which
case it is matched as a literal.
</p>
<p>More formally, an input expression E matches a pattern P if and only if:
</p>


<ul>
<li> P is an underscore (&lsquo;<samp> </samp>&rsquo;).

</li><li> P is a non-literal identifier; or

</li><li> P is a literal identifier and E is an identifier with the same
binding; or

</li><li> P is a list &lsquo;<samp>(P_1 &hellip; P_n)</samp>&rsquo; and E is a
list of n
elements that match P_1 through P_n, respectively; or

</li><li> P is an improper list
&lsquo;<samp>(P_1 P_2 &hellip; P_n . P_n+1)</samp>&rsquo;
and E is a list or
improper list of n or more elements that match P_1 through P_n,
respectively, and whose nth tail matches P_n+1; or

</li><li> P is of the form
&lsquo;<samp>(P_1 &hellip; P_k P_e &lt;ellipsis&gt; P_m+1 &hellip; P_n)</samp>&rsquo;
where E is
a proper list of n elements, the first k of which match
P_1 through P_k, respectively,
whose next m-k elements each match P_e,
whose remaining n-m elements match P_m+1 through P_n; or

</li><li> P is of the form
&lsquo;<samp>(P_1 &hellip; P_k P_e &lt;ellipsis&gt; P_m+1 &hellip; P_n . P_x)</samp>&rsquo;
where E is
a list or improper list of n elements, the first k of which match
P_1 through P_k,
whose next m-k elements each match P_e,
whose remaining n-m elements match P_m+1 through P_n,
and whose nth and final cdr matches P_x; or

</li><li> P is a vector of the form &lsquo;<samp>#(P_1 &hellip; P_n)</samp>&rsquo;
and E is a vector
of n elements that match P_1 through P_n; or

</li><li> P is of the form
&lsquo;<samp>#(P_1 &hellip; P_k P_e &lt;ellipsis&gt; P_m+1 &hellip; P_n)</samp>&rsquo;
where E is a vector of n
elements the first k of which match P_1 through P_k,
whose next m-k elements each match P_e,
and whose remaining n-m elements match P_m+1 through P_n; or

</li><li> P is a constant and E is equal to P in the sense of
the &lsquo;<samp>equal?</samp>&rsquo; procedure.

</li></ul>


<p>It is an error to use a macro keyword, within the scope of its
binding, in an expression that does not match any of the patterns.
</p>
<p>When a macro use is transcribed according to the template of the
matching <span class="roman">&lt;syntax rule&gt;</span>, pattern variables that occur in the
template are replaced by the elements they match in the input.
Pattern variables that occur in subpatterns followed by one or more
instances of the identifier
<span class="roman">&lt;ellipsis&gt;</span> are allowed only in subtemplates that are
followed by as many instances of <span class="roman">&lt;ellipsis&gt;</span>.
They are replaced in the
output by all of the elements they match in the input, distributed as
indicated.  It is an error if the output cannot be built up as
specified.
</p>

<p>Identifiers that appear in the template but are not pattern variables
or the identifier
<span class="roman">&lt;ellipsis&gt;</span> are inserted into the output as literal identifiers.  If a
literal identifier is inserted as a free identifier then it refers to the
binding of that identifier within whose scope the instance of
&lsquo;<samp>syntax-rules</samp>&rsquo; appears.
If a literal identifier is inserted as a bound identifier then it is
in effect renamed to prevent inadvertent captures of free identifiers.
</p>
<p>A template of the form
&lsquo;<samp>(<span class="roman">&lt;ellipsis&gt;</span> <span class="roman">&lt;template&gt;</span>)</samp>&rsquo; is identical to <span class="roman">&lt;template&gt;</span>,
except that
ellipses within the template have no special meaning.
That is, any ellipses contained within <span class="roman">&lt;template&gt;</span> are
treated as ordinary identifiers.
In particular, the template &lsquo;<samp>(<span class="roman">&lt;ellipsis&gt;</span> <span class="roman">&lt;ellipsis&gt;</span>)</samp>&rsquo; produces
a single <span class="roman">&lt;ellipsis&gt;</span>.
This allows syntactic abstractions to expand into code containing
ellipses.
</p>

<div class="format">
<pre class="format"><tt>(define-syntax be-like-begin
  (syntax-rules ()
    ((be-like-begin name)
     (define-syntax name
       (syntax-rules ()
         ((name expr (... ...))
          (begin expr (... ...))))))))

(be-like-begin sequence)
(sequence 1 2 3 4)                     ==&gt; 4
</tt>
</pre></div>


<p>As an example, if <code>let</code> and <code>cond</code> are defined as in
<span id="index-cond-1"></span>
<span id="index-let-3"></span>
section <a href="#Derived-expression-type">Derived expression types</a> then they are hygienic (as required) and
the following is not an error.
</p>

<div class="format">
<pre class="format"><tt>(let ((=&gt; #f))
  (cond (#t =&gt; 'ok)))                  ==&gt; ok
</tt>
</pre></div>


<p>The macro transformer for &lsquo;<samp>cond</samp>&rsquo; recognizes &lsquo;<samp>=&gt;</samp>&rsquo;
as a local variable, and hence an expression, and not as the
base identifier &lsquo;<samp>=&gt;</samp>&rsquo;, which the macro transformer treats
as a syntactic keyword.  Thus the example expands into
</p>

<div class="format">
<pre class="format"><tt>(let ((=&gt; #f))
  (if #t (begin =&gt; 'ok)))
</tt>
</pre></div>


<p>instead of
</p>

<div class="format">
<pre class="format"><tt>(let ((=&gt; #f))
  (let ((temp #t))
    (if temp ('ok temp))))
</tt>
</pre></div>


<p>which would result in an invalid procedure call.
</p>
</dd></dl>

<hr>
</div>
<div class="subsection" id="Signaling-errors-in-macro-transformers">
<div class="header">
<p>
Previous: <a href="#Pattern-language" accesskey="p" rel="prev">Pattern language</a>, Up: <a href="#Macros" accesskey="u" rel="up">Macros</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Signaling-errors-in-macro-transformers-1"></span><h4 class="subsection">4.3.3 Signaling errors in macro transformers</h4>

<span id="index-signaling-errors-in-macro-transformers"></span>



<dl class="def">
<dt id="index-_0028syntax_002derror"><span class="category">syntax: </span><span><strong>(syntax-error</strong> <em><span class="roman">&lt;message&gt;</span> <span class="roman">&lt;args&gt;</span> &hellip;)</em><a href='#index-_0028syntax_002derror' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<span id="index-syntax_002derror"></span>

<p>&lsquo;<samp>syntax-error</samp>&rsquo; behaves similarly to &lsquo;<samp>error</samp>&rsquo; (see <a href="#Exceptions">Exceptions</a>) except that implementations
with an expansion pass separate from evaluation should signal an error
as soon as &lsquo;<samp>syntax-error</samp>&rsquo; is expanded.  This can be used as
a &lsquo;<samp>syntax-rules</samp>&rsquo; <span class="roman">&lt;template&gt;</span> for a <span class="roman">&lt;pattern&gt;</span> that is
an invalid use of the macro, which can provide more descriptive error
messages.  <span class="roman">&lt;message&gt;</span> is a string literal, and <span class="roman">&lt;args&gt;</span>
arbitrary expressions providing additional information.
Applications cannot count on being able to catch syntax errors with
exception handlers or guards.
</p>



<div class="format">
<pre class="format"><tt>(define-syntax simple-let
  (syntax-rules ()
    ((  (head ... ((x . y) val) . tail)
        body1 body2 ...)
     (syntax-error
      &quot;expected an identifier but got&quot;
      (x . y)))
    ((  ((name val) ...) body1 body2 ...)
     ((lambda (name ...) body1 body2 ...)
       val ...))))
</tt>
</pre></div>


</dd></dl>

         

<hr>
</div>
</div>
</div>
<div class="chapter" id="Program-structure">
<div class="header">
<p>
Next: <a href="#Standard-procedures" accesskey="n" rel="next">Standard procedures</a>, Previous: <a href="#Expressions" accesskey="p" rel="prev">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Program-structure-1"></span><h2 class="chapter">5 Program structure</h2>


<span id="index-program-structure"></span>


<ul class="section-toc">
<li><a href="#Programs" accesskey="1">Programs</a></li>
<li><a href="#Import-declarations" accesskey="2">Import declarations</a></li>
<li><a href="#Variable-definitions" accesskey="3">Variable definitions</a></li>
<li><a href="#Syntax-definitions" accesskey="4">Syntax definitions</a></li>
<li><a href="#Record_002dtype-definitions" accesskey="5">Record-type definitions</a></li>
<li><a href="#Libraries" accesskey="6">Libraries</a></li>
<li><a href="#The-REPL" accesskey="7">The REPL</a></li>
</ul>
<hr>
<div class="section" id="Programs">
<div class="header">
<p>
Next: <a href="#Import-declarations" accesskey="n" rel="next">Import declarations</a>, Previous: <a href="#Program-structure" accesskey="p" rel="prev">Program structure</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Programs-1"></span><h3 class="section">5.1 Programs</h3>

<span id="index-programs"></span>

<p>A Scheme program consists of  
one or more import declarations followed by a sequence of
expressions and definitions.
Import declarations specify the libraries on which a program or library depends;
a subset of the identifiers exported by the libraries are made available to
the program.
Expressions are described in chapter <a href="#Expressions">Expressions</a>.
Definitions are either variable definitions, syntax definitions, or
record-type definitions, all of which are explained in this chapter.
They are valid in some, but not all, contexts where expressions
are allowed, specifically at the outermost level of a <span class="roman">&lt;program&gt;</span>
and at the beginning of a <span class="roman">&lt;body&gt;</span>.
</p>
<span id="index-definition"></span>

<p>At the outermost level of a program, <tt>(begin <span class="roman">&lt;expression or definition1&gt;</span> &hellip;)</tt> is
equivalent to the sequence of expressions and definitions
in the <code>begin</code>.   
<span id="index-begin-2"></span>
Similarly, in a <span class="roman">&lt;body&gt;</span>, <tt>(begin <span class="roman">&lt;definition1&gt;</span> &hellip;)</tt> is equivalent
to the sequence <span class="roman">&lt;definition1&gt;</span> &hellip;.
Macros can expand into such &lsquo;<samp>begin</samp>&rsquo; forms.
For the formal definition, see <a href="#Sequencing">Sequencing</a>.
</p>
<p>Import declarations and definitions
cause bindings to be created in the global
environment or modify the value of existing global bindings.
The initial environment of a program is empty,
so at least one import declaration is needed to introduce initial bindings.
</p>
<p>Expressions occurring at the outermost level of a program
do not create any bindings.  They are
executed in order when the program is
invoked or loaded, and typically perform some kind of initialization.
</p>

<p>Programs and libraries are typically stored in files, although
in some implementations they can be entered interactively into a running
Scheme system.  Other paradigms are possible.
Implementations which store libraries in files should document the
mapping from the name of a library to its location in the file system.
</p>
<hr>
</div>
<div class="section" id="Import-declarations">
<div class="header">
<p>
Next: <a href="#Variable-definitions" accesskey="n" rel="next">Variable definitions</a>, Previous: <a href="#Programs" accesskey="p" rel="prev">Programs</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Import-declarations-1"></span><h3 class="section">5.2 Import declarations</h3>

<span id="index-import-declarations"></span>

<span id="index-import"></span>

<p>An import declaration takes the following form:
</p>
<div class="example">
<pre class="example">

(import <span class="roman">&lt;import-set&gt;</span> &hellip;)

</pre></div>


<p>An import declaration provides a way to import identifiers
exported by a library.  Each <span class="roman">&lt;import set&gt;</span> names a set of bindings
from a library and possibly specifies local names for the
imported bindings. It takes one of the following forms:
</p>


<ul>
<li> <tt><span class="roman">&lt;library name&gt;</span></tt>
</li><li> <tt>(only <span class="roman">&lt;import set&gt;</span> <span class="roman">&lt;identifier&gt;</span> &hellip;)</tt>
</li><li> <tt>(except <span class="roman">&lt;import set&gt;</span> <span class="roman">&lt;identifier&gt;</span> &hellip;)</tt>
</li><li> <tt>(prefix <span class="roman">&lt;import set&gt;</span> <span class="roman">&lt;identifier&gt;</span>)</tt>
</li><li> <tt>(rename <span class="roman">&lt;import set&gt;</span>
</tt></li><li> hspace*4em(<span class="roman">&lt;identifier1&gt;</span> <span class="roman">&lt;identifier2&gt;</span>) &hellip;)

</li></ul>


<p>In the first form, all of the identifiers in the named library&rsquo;s export
clauses are imported with the same names (or the exported names if
exported with <code>rename</code>).  The additional <span class="roman">&lt;import set&gt;</span>
<span id="index-rename"></span>
forms modify this set as follows:
</p>


<ul>
<li> <code>only</code> produces a subset of the given
<span class="roman">&lt;import set&gt;</span> including only the listed identifiers (after any
renaming).  It is an error if any of the listed identifiers are
not found in the original set.

</li><li> <code>except</code> produces a subset of the given
<span class="roman">&lt;import set&gt;</span>, excluding the listed identifiers (after any
renaming). It is an error if any of the listed identifiers are not
found in the original set.

</li><li> <code>rename</code> modifies the given <span class="roman">&lt;import set&gt;</span>,
replacing each instance of <span class="roman">&lt;identifier1&gt;</span> with
<span class="roman">&lt;identifier2&gt;</span>. It is an error if any of the listed
<span class="roman">&lt;identifier1&gt;</span>s are not found in the original set.

</li><li> <code>prefix</code> automatically renames all identifiers in
the given <span class="roman">&lt;import set&gt;</span>, prefixing each with the specified
<span class="roman">&lt;identifier&gt;</span>.


</li></ul>

<span id="index-prefix"></span>
<span id="index-except"></span>
<span id="index-only"></span>

<p>In a program or library declaration, it is an error to import the same
identifier more than once with different bindings, or to redefine or
mutate an imported binding with a definition
or with &lsquo;<samp>set!</samp>&rsquo;, or to refer to an identifier before it is imported.
However, a REPL should permit these actions.
</p>
<hr>
</div>
<div class="section" id="Variable-definitions">
<div class="header">
<p>
Next: <a href="#Syntax-definitions" accesskey="n" rel="next">Syntax definitions</a>, Previous: <a href="#Import-declarations" accesskey="p" rel="prev">Import declarations</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variable-definitions-1"></span><h3 class="section">5.3 Variable definitions</h3>


<span id="index-variable-definitions"></span>


<span id="index-variable-definition"></span>

<p>A variable definition binds one or more identifiers and specifies an initial
value for each of them.
The simplest kind of variable definition
takes one of the following forms:
<span id="index-define"></span>
</p>


<ul>
<li> <tt>(define <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span>)</tt>

</li><li> <tt>(define (<span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;formals&gt;</span>) <span class="roman">&lt;body&gt;</span>)</tt>

<p><span class="roman">&lt;Formals&gt;</span> are either a
sequence of zero or more variables, or a sequence of one or more
variables followed by a space-delimited period and another variable (as
in a lambda expression).  This form is equivalent to
</p>
<div class="example">
<pre class="example">

(define <span class="roman">&lt;variable&gt;</span>
  (lambda (<span class="roman">&lt;formals&gt;</span>) <span class="roman">&lt;body&gt;</span>))<span class="roman">.</span>

</pre></div>


</li><li> <tt>(define (<span class="roman">&lt;variable&gt;</span> . <span class="roman">&lt;formal&gt;</span>) <span class="roman">&lt;body&gt;</span>)</tt>

<p><span class="roman">&lt;Formal&gt;</span> is a single
variable.  This form is equivalent to
</p>
<div class="example">
<pre class="example">

(define <span class="roman">&lt;variable&gt;</span>
  (lambda <span class="roman">&lt;formal&gt;</span> <span class="roman">&lt;body&gt;</span>))<span class="roman">.</span>

</pre></div>



</li></ul>


<ul class="section-toc">
<li><a href="#Top-level-definitions" accesskey="1">Top level definitions</a></li>
<li><a href="#Internal-definitions" accesskey="2">Internal definitions</a></li>
<li><a href="#Multiple_002dvalue-definitions" accesskey="3">Multiple-value definitions</a></li>
</ul>
<hr>
<div class="subsection" id="Top-level-definitions">
<div class="header">
<p>
Next: <a href="#Internal-definitions" accesskey="n" rel="next">Internal definitions</a>, Previous: <a href="#Variable-definitions" accesskey="p" rel="prev">Variable definitions</a>, Up: <a href="#Variable-definitions" accesskey="u" rel="up">Variable definitions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Top-level-definitions-1"></span><h4 class="subsection">5.3.1 Top level definitions</h4>

<span id="index-top-level-definitions"></span>

<p>At the outermost level of a program, a definition
</p>
<div class="example">
<pre class="example">

(define <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span>)

</pre></div>

<p>has essentially the same effect as the assignment expression
</p>
<div class="example">
<pre class="example">

(set! <span class="roman">&lt;variable&gt;</span> <span class="roman">&lt;expression&gt;</span>)

</pre></div>

<p>if <span class="roman">&lt;variable&gt;</span> is bound to a non-syntax value.  However, if
<span class="roman">&lt;variable&gt;</span> is not bound, 
or is a syntactic keyword,
then the definition will bind
<span class="roman">&lt;variable&gt;</span> to a new location before performing the assignment,
whereas it would be an error to perform a &lsquo;<samp>set!</samp>&rsquo; on an
unbound variable.
<span id="index-unbound-2"></span>
</p>

<div class="example">
<pre class="example">

(define add3
  (lambda (x) (+ x 3)))
(add3 3)                               ==&gt;  6
(define first car)
(first '(1 2))                         ==&gt;  1

</pre></div>


<hr>
</div>
<div class="subsection" id="Internal-definitions">
<div class="header">
<p>
Next: <a href="#Multiple_002dvalue-definitions" accesskey="n" rel="next">Multiple-value definitions</a>, Previous: <a href="#Top-level-definitions" accesskey="p" rel="prev">Top level definitions</a>, Up: <a href="#Variable-definitions" accesskey="u" rel="up">Variable definitions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Internal-definitions-1"></span><h4 class="subsection">5.3.2 Internal definitions</h4>

<span id="index-internal-definitions"></span>


<p>Definitions can occur at the
beginning of a <span class="roman">&lt;body&gt;</span> (that is, the body of a <code>lambda</code>,
<span id="index-lambda-1"></span>
<code>let</code>, <code>let*</code>, <code>letrec</code>, <code>letrec*</code>,
<span id="index-letrec_002a-1"></span>
<span id="index-letrec-1"></span>
<span id="index-let_002a-1"></span>
<span id="index-let-4"></span>
<code>let-values</code>, <code>let*-values</code>, <code>let-syntax</code>, <code>letrec-syntax</code>,
<span id="index-letrec_002dsyntax-1"></span>
<span id="index-let_002dsyntax-1"></span>
<span id="index-let_002a_002dvalues-1"></span>
<span id="index-let_002dvalues-1"></span>
<code>parameterize</code>, <code>guard</code>, or <code>case-lambda</code>).  Note that
<span id="index-case_002dlambda-2"></span>
<span id="index-guard-1"></span>
<span id="index-parameterize-1"></span>
such a body might not be apparent until after expansion of other syntax.
Such definitions are known as <em>internal definitions</em> as opposed to the global definitions described above.
<span id="index-internal-definition"></span>
The variables defined by internal definitions are local to the
<span class="roman">&lt;body&gt;</span>.  That is, <span class="roman">&lt;variable&gt;</span> is bound rather than assigned,
and the region of the binding is the entire <span class="roman">&lt;body&gt;</span>.  For example,
</p>

<div class="example">
<pre class="example">

(let ((x 5))
  (define foo (lambda (y) (bar x y)))
  (define bar (lambda (a b) (+ (* a b) a)))
  (foo (+ x 3)))                       ==&gt;  45

</pre></div>


<p>An expanded <span class="roman">&lt;body&gt;</span> containing internal definitions
can always be
converted into a completely equivalent &lsquo;<samp>letrec*</samp>&rsquo; expression.  For
example, the &lsquo;<samp>let</samp>&rsquo; expression in the above example is equivalent
to
</p>

<div class="example">
<pre class="example">

(let ((x 5))
  (letrec* ((foo (lambda (y) (bar x y)))
            (bar (lambda (a b) (+ (* a b) a))))
    (foo (+ x 3))))

</pre></div>


<p>Just as for the equivalent &lsquo;<samp>letrec*</samp>&rsquo; expression, it is an error if it is not
possible to evaluate each <span class="roman">&lt;expression&gt;</span> of every internal
definition in a <span class="roman">&lt;body&gt;</span> without assigning or referring to
the value of the corresponding <span class="roman">&lt;variable&gt;</span> or the <span class="roman">&lt;variable&gt;</span>
of any of the definitions that follow it in <span class="roman">&lt;body&gt;</span>.
</p>
<p>It is an error to define the same identifier more than once in the
same <span class="roman">&lt;body&gt;</span>.
</p>
<p>Wherever an internal definition can occur,
<tt>(begin <span class="roman">&lt;definition1&gt;</span> &hellip;)</tt>
is equivalent to the sequence of definitions
that form the body of the <code>begin</code>.
<span id="index-begin-3"></span>
</p>
<hr>
</div>
<div class="subsection" id="Multiple_002dvalue-definitions">
<div class="header">
<p>
Previous: <a href="#Internal-definitions" accesskey="p" rel="prev">Internal definitions</a>, Up: <a href="#Variable-definitions" accesskey="u" rel="up">Variable definitions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Multiple_002dvalue-definitions-1"></span><h4 class="subsection">5.3.3 Multiple-value definitions</h4>

<span id="index-multiple_002dvalue-definitions"></span>

<p>Another kind of definition is provided by &lsquo;<samp>define-values</samp>&rsquo;, 
which creates multiple definitions from a single
expression returning multiple values.
It is allowed wherever &lsquo;<samp>define</samp>&rsquo; is allowed.
</p>

<dl class="def">
<dt id="index-define_002dvalues"><span class="category">syntax: </span><span><strong>define-values</strong> <em><span class="roman">&lt;formals&gt;</span> <span class="roman">&lt;expression&gt;</span></em><a href='#index-define_002dvalues' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if a variable appears more than once in the set of <span class="roman">&lt;formals&gt;</span>.
</p>
<p><em>Semantics:</em>
<span class="roman">&lt;Expression&gt;</span> is evaluated, and the <span class="roman">&lt;formals&gt;</span> are bound
to the return values in the same way that the <span class="roman">&lt;formals&gt;</span> in a
&lsquo;<samp>lambda</samp>&rsquo; expression are matched to the arguments in a procedure
call.
</p>

<div class="format">
<pre class="format"><tt>(define-values (x y) (exact-integer-sqrt 17))
(list x y)                             ==&gt; (4 1)

(let ()
  (define-values (x y) (values 1 2))
  (+ x y))                             ==&gt; 3
</tt>
</pre></div>


</dd></dl>

<hr>
</div>
</div>
<div class="section" id="Syntax-definitions">
<div class="header">
<p>
Next: <a href="#Record_002dtype-definitions" accesskey="n" rel="next">Record-type definitions</a>, Previous: <a href="#Variable-definitions" accesskey="p" rel="prev">Variable definitions</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Syntax-definitions-1"></span><h3 class="section">5.4 Syntax definitions</h3>

<span id="index-syntax-definitions"></span>


<span id="index-syntax-definition"></span>
<p>Syntax definitions have this form:
<span id="index-define_002dsyntax"></span>
</p>
<p><tt>(define-syntax <span class="roman">&lt;keyword&gt;</span> <span class="roman">&lt;transformer spec&gt;</span>)</tt>
</p>
<p><span class="roman">&lt;Keyword&gt;</span> is an identifier, and
the <span class="roman">&lt;transformer spec&gt;</span> is an instance of <code>syntax-rules</code>.
<span id="index-syntax_002drules"></span>
Like variable definitions, syntax definitions can appear at the outermost level or
nested within a <code>body</code>.
<span id="index-body-1"></span>
</p>
<p>If the &lsquo;<samp>define-syntax</samp>&rsquo; occurs at the outermost level, then the global
syntactic environment is extended by binding the
<span class="roman">&lt;keyword&gt;</span> to the specified transformer, but previous expansions
of any global binding for <span class="roman">&lt;keyword&gt;</span> remain unchanged.
Otherwise, it is an <em>internal syntax definition</em>, and is local to the
<span id="index-internal-syntax-definition"></span>
<span class="roman">&lt;body&gt;</span> in which it is defined.
Any use of a syntax keyword before its corresponding definition is an error.
In particular, a use that precedes an inner definition will not apply an outer
definition.
</p>

<div class="example">
<pre class="example">

(let ((x 1) (y 2))
  (define-syntax swap!
    (syntax-rules ()
      ((swap! a b)
       (let ((tmp a))
         (set! a b)
         (set! b tmp)))))
  (swap! x y)
  (list x y))                          ==&gt; (2 1)

</pre></div>




<p>Macros can expand into definitions in any context that permits
them. However, it is an error for a definition to define an
identifier whose binding has to be known in order to determine the meaning of the
definition itself, or of any preceding definition that belongs to the
same group of internal definitions. Similarly, it is an error for an
internal definition to define an identifier whose binding has to be known
in order
to determine the boundary between the internal definitions and the
expressions of the body it belongs to. For example, the following are
errors:
</p>

<div class="example">
<pre class="example">

(define define 3)

(begin (define begin list))

(let-syntax
    ((foo (syntax-rules ()
            ((foo (proc args ...) body ...)
             (define proc
               (lambda (args ...)
                 body ...))))))
  (let ((x 3))
    (foo (plus x y) (+ x y))
    (define foo x)
    (plus foo x)))

</pre></div>


<hr>
</div>
<div class="section" id="Record_002dtype-definitions">
<div class="header">
<p>
Next: <a href="#Libraries" accesskey="n" rel="next">Libraries</a>, Previous: <a href="#Syntax-definitions" accesskey="p" rel="prev">Syntax definitions</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Record_002dtype-definitions-1"></span><h3 class="section">5.5 Record-type definitions</h3>

<span id="index-record_002dtype-definitions"></span>


<p><em>Record-type definitions</em> are used to introduce new data types, called
<em>record types</em>.
<span id="index-record-types"></span>
Like other definitions, they can appear either at the outermost level or in a body.
The values of a record type are called <em>records</em> and are
<span id="index-records"></span>
aggregations of zero or more <em>fields</em>, each of which holds a single location.
<span id="index-fields"></span>
A predicate, a constructor, and field accessors and
mutators are defined for each record type.
</p>


<span id="index-define_002drecord_002dtype"></span>
<dl class="def">
<dt id="index-_0028define_002drecord_002dtype"><span class="category">syntax: </span><span><strong>(define-record-type</strong> <em><span class="roman">&lt;name&gt;</span></em><a href='#index-_0028define_002drecord_002dtype' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>hspace*4em<tt><span class="roman">&lt;constructor&gt;</span> <span class="roman">&lt;pred&gt;</span> <span class="roman">&lt;field&gt;</span> &hellip;</tt>)
</p>
<p><em>Syntax:</em>
<span class="roman">&lt;name&gt;</span> and <span class="roman">&lt;pred&gt;</span> are identifiers.
The <span class="roman">&lt;constructor&gt;</span> is of the form
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;constructor name&gt;</span> <span class="roman">&lt;field name&gt;</span> &hellip;)
</tt>
</pre></div>

<p>and each <span class="roman">&lt;field&gt;</span> is either of the form
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;field name&gt;</span> <span class="roman">&lt;accessor name&gt;</span>)
</tt>
</pre></div>

<p>or of the form
</p>
<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;field name&gt;</span> <span class="roman">&lt;accessor name&gt;</span> <span class="roman">&lt;modifier name&gt;</span>)
</tt>
</pre></div>


<p>It is an error for the same identifier to occur more than once as a
field name.
It is also an error for the same identifier to occur more than once
as an accessor or mutator name.
</p>
<p>The &lsquo;<samp>define-record-type</samp>&rsquo; construct is generative: each use creates a new record
type that is distinct from all existing types, including Scheme&rsquo;s
predefined types and other record types &mdash; even record types of
the same name or structure.
</p>
<p>An instance of &lsquo;<samp>define-record-type</samp>&rsquo; is equivalent to the following
definitions:
</p>


<ul>
<li> <span class="roman">&lt;name&gt;</span> is bound to a representation of the record type itself.
This may be a run-time object or a purely syntactic representation.
The representation is not utilized in this report, but it serves as a
means to identify the record type for use by further language extensions.

</li><li> <span class="roman">&lt;constructor name&gt;</span> is bound to a procedure that takes as
many arguments as there are <span class="roman">&lt;field name&gt;</span>s in the
<tt>(<span class="roman">&lt;constructor name&gt;</span> &hellip;)</tt> subexpression and returns a
new record of type <span class="roman">&lt;name&gt;</span>.  Fields whose names are listed with
<span class="roman">&lt;constructor name&gt;</span> have the corresponding argument as their
initial value.  The initial values of all other fields are
unspecified.  It is an error for a field name to appear in
<span class="roman">&lt;constructor&gt;</span> but not as a <span class="roman">&lt;field name&gt;</span>.

</li><li> <span class="roman">&lt;pred&gt;</span> is bound to a predicate that returns <tt>#t</tt> when given a
value returned by the procedure bound to  <span class="roman">&lt;constructor name&gt;</span> and <tt>#f</tt> for
everything else.

</li><li> Each <span class="roman">&lt;accessor name&gt;</span> is bound to a procedure that takes a record of
type <span class="roman">&lt;name&gt;</span> and returns the current value of the corresponding
field.  It is an error to pass an accessor a value which is not a
record of the appropriate type.

</li><li> Each <span class="roman">&lt;modifier name&gt;</span> is bound to a procedure that takes a record of
type <span class="roman">&lt;name&gt;</span> and a value which becomes the new value of the
corresponding field; an unspecified value is returned.  It is an
error to pass a modifier a first argument which is not a record of
the appropriate type.


</li></ul>


<p>For instance, the following record-type definition
</p>

<div class="format">
<pre class="format"><tt>(define-record-type &lt;pare&gt;
  (kons x y)
  pare?
  (x kar set-kar!)
  (y kdr))
</tt>
</pre></div>


<p>defines &lsquo;<samp>kons</samp>&rsquo; to be a constructor, &lsquo;<samp>kar</samp>&rsquo; and &lsquo;<samp>kdr</samp>&rsquo;
to be accessors, &lsquo;<samp>set-kar!</samp>&rsquo; to be a modifier, and &lsquo;<samp>pare?</samp>&rsquo;
to be a predicate for instances of &lsquo;<samp>&lt;pare&gt;</samp>&rsquo;.
</p>

<div class="format">
<pre class="format"><tt>  (pare? (kons 1 2))                   ==&gt; #t
  (pare? (cons 1 2))                   ==&gt; #f
  (kar (kons 1 2))                     ==&gt; 1
  (kdr (kons 1 2))                     ==&gt; 2
  (let ((k (kons 1 2)))
    (set-kar! k 3)
    (kar k))                           ==&gt; 3
</tt>
</pre></div>


</dd></dl>


<hr>
</div>
<div class="section" id="Libraries">
<div class="header">
<p>
Next: <a href="#The-REPL" accesskey="n" rel="next">The REPL</a>, Previous: <a href="#Record_002dtype-definitions" accesskey="p" rel="prev">Record-type definitions</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Libraries-1"></span><h3 class="section">5.6 Libraries</h3>


<span id="index-libraries-1"></span>


<p>Libraries provide a way to organize Scheme programs into reusable parts
with explicitly defined interfaces to the rest of the program.  This
section defines the notation and semantics for libraries.
</p>

<ul class="section-toc">
<li><a href="#Library-Syntax" accesskey="1">Library Syntax</a></li>
<li><a href="#Library-example" accesskey="2">Library example</a></li>
</ul>
<hr>
<div class="subsection" id="Library-Syntax">
<div class="header">
<p>
Next: <a href="#Library-example" accesskey="n" rel="next">Library example</a>, Previous: <a href="#Libraries" accesskey="p" rel="prev">Libraries</a>, Up: <a href="#Libraries" accesskey="u" rel="up">Libraries</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Library-Syntax-1"></span><h4 class="subsection">5.6.1 Library Syntax</h4>

<span id="index-library-syntax"></span>

<p>A library definition takes the following form:
</p>
<span id="index-define_002dlibrary"></span>


<div class="example">
<pre class="example">

(define-library <span class="roman">&lt;library name&gt;</span>
  <span class="roman">&lt;library declaration&gt;</span> &hellip;)

</pre></div>


<p><span class="roman">&lt;library name&gt;</span> is a list whose members are identifiers and exact non-negative integers.  It is used to
identify the library uniquely when importing from other programs or
libraries.
Libraries whose first identifier is &lsquo;<samp>scheme</samp>&rsquo; are reserved for use by this
report and future versions of this report.
Libraries whose first identifier is &lsquo;<samp>srfi</samp>&rsquo; are reserved for libraries
implementing Scheme Requests for Implementation.
It is inadvisable, but not an error, for identifiers in library names to
contain any of the characters &lsquo;<samp>| \? * &lt; &quot; : &gt; + [ ] /</samp>&rsquo;
or control characters after escapes are expanded.
</p>

<p>A <span class="roman">&lt;library declaration&gt;</span> is any of:
</p>


<ul>
<li> <tt>(export <span class="roman">&lt;export spec&gt;</span> &hellip;)</tt>

</li><li> <tt>(import <span class="roman">&lt;import set&gt;</span> &hellip;)</tt>

</li><li> <tt>(begin <span class="roman">&lt;command or definition&gt;</span> &hellip;)</tt>

</li><li> <tt>(include <span class="roman">&lt;filename1&gt;</span> <span class="roman">&lt;filename2&gt;</span> &hellip;)</tt>

</li><li> <tt>(include-ci <span class="roman">&lt;filename1&gt;</span> <span class="roman">&lt;filename2&gt;</span> &hellip;)</tt>

</li><li> <tt>(include-library-declarations <span class="roman">&lt;filename1&gt;</span> <span class="roman">&lt;filename2&gt;</span> &hellip;)</tt>

</li><li> <tt>(cond-expand <span class="roman">&lt;ce-clause1&gt;</span> <span class="roman">&lt;ce-clause2&gt;</span> &hellip;)</tt>


</li></ul>


<p>An <code>export</code> declaration specifies a list of identifiers which
<span id="index-export"></span>
can be made visible to other libraries or programs.
An <span class="roman">&lt;export spec&gt;</span> takes one of the following forms:
</p>


<ul>
<li> <span class="roman">&lt;identifier&gt;</span>
</li><li> <tt>(rename <span class="roman">&lt;identifier1&gt;</span> <span class="roman">&lt;identifier2&gt;</span>)</tt>

</li></ul>


<p>In an <span class="roman">&lt;export spec&gt;</span>, an <span class="roman">&lt;identifier&gt;</span> names a single
binding defined within or imported into the library, where the
external name for the export is the same as the name of the binding
within the library. A <code>rename</code> spec exports the binding 
<span id="index-rename-1"></span>
defined within or imported into the library and named by
<span class="roman">&lt;identifier1&gt;</span> in each
<tt>(<span class="roman">&lt;identifier1&gt;</span> <span class="roman">&lt;identifier2&gt;</span>)</tt> pairing,
using <span class="roman">&lt;identifier2&gt;</span> as the external name.
</p>
<p>An <code>import</code> declaration provides a way to import the identifiers
<span id="index-import-1"></span>
exported by another library.  It has the same syntax and semantics as
an import declaration used in a program or at the REPL (see section see &lsquo;import&rsquo;).
</p>
<p>The <code>begin</code>, <code>include</code>, and <code>include-ci</code> declarations are
<span id="index-include_002dci-2"></span>
<span id="index-include-2"></span>
<span id="index-begin-4"></span>
used to specify the body of
the library.  They have the same syntax and semantics as the corresponding
expression types.
This form of &lsquo;<samp>begin</samp>&rsquo; is analogous to, but not the same as, the
two types of &lsquo;<samp>begin</samp>&rsquo; defined in section <a href="#Sequencing">Sequencing</a>.
</p>
<p>The <code>include-library-declarations</code> declaration is similar to
<span id="index-include_002dlibrary_002ddeclarations"></span>
<code>include</code> except that the contents of the file are spliced directly into the
current library definition.  This can be used, for example, to share the
same <code>export</code> declaration among multiple libraries as a simple
form of library interface.
</p>
<p>The <code>cond-expand</code> declaration has the same syntax and semantics as
<span id="index-cond_002dexpand-2"></span>
the <code>cond-expand</code> expression type, except that it expands to
spliced-in library declarations rather than expressions enclosed in &lsquo;<samp>begin</samp>&rsquo;.
</p>


<p>One possible implementation of libraries is as follows:
After all <code>cond-expand</code> library declarations are expanded, a new
environment is constructed for the library consisting of all
imported bindings.  The expressions
from all <code>begin</code>, <code>include</code> and <code>include-ci</code>
library declarations are expanded in that environment in the order in which
they occur in the library.
Alternatively, <code>cond-expand</code> and <code>import</code> declarations may be processed
in left to right order interspersed with the processing of other
declarations, with the environment growing as imported bindings are
added to it by each <code>import</code> declaration.
</p>
<p>When a library is loaded, its expressions are executed
in textual order.
If a library&rsquo;s definitions are referenced in the expanded form of a
program or library body, then that library must be loaded before the
expanded program or library body is evaluated. This rule applies
transitively.  If a library is imported by more than one program or
library, it may possibly be loaded additional times.
</p>
<p>Similarly, during the expansion of a library &lsquo;<samp>(foo)</samp>&rsquo;, if any syntax
keywords imported from another library &lsquo;<samp>(bar)</samp>&rsquo; are needed to expand
the library, then the library &lsquo;<samp>(bar)</samp>&rsquo; must be expanded and its syntax
definitions evaluated before the expansion of &lsquo;<samp>(foo)</samp>&rsquo;.
</p>
<p>Regardless of the number of times that a library is loaded, each
program or library that imports bindings from a library must do so from a
single loading of that library, regardless of the number of import
declarations in which it appears.
That is, &lsquo;<samp>(import (only (foo) a))</samp>&rsquo; followed by &lsquo;<samp>(import (only (foo) b))</samp>&rsquo;
has the same effect as &lsquo;<samp>(import (only (foo) a b))</samp>&rsquo;.
</p>
<hr>
</div>
<div class="subsection" id="Library-example">
<div class="header">
<p>
Previous: <a href="#Library-Syntax" accesskey="p" rel="prev">Library Syntax</a>, Up: <a href="#Libraries" accesskey="u" rel="up">Libraries</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Library-example-1"></span><h4 class="subsection">5.6.2 Library example</h4>

<span id="index-library-example"></span>
<p>The following example shows
how a program can be divided into libraries plus a relatively small
main program [life].
If the main program is entered into a REPL, it is not necessary to import
the base library.
</p>

<div class="example">
<pre class="example">

(define-library (example grid)
  (export make rows cols ref each
          (rename put! set!))
  (import (scheme base))
  (begin
    ;; Create an NxM grid.
    (define (make n m)
      (let ((grid (make-vector n)))
        (do ((i 0 (+ i 1)))
            ((= i n) grid)
          (let ((v (make-vector m <tt>#false</tt>)))
            (vector-set! grid i v)))))
    (define (rows grid)
      (vector-length grid))
    (define (cols grid)
      (vector-length (vector-ref grid 0)))
    ;; Return <tt>#false</tt> if out of range.
    (define (ref grid n m)
      (and (&lt; -1 n (rows grid))
           (&lt; -1 m (cols grid))
           (vector-ref (vector-ref grid n) m)))
    (define (put! grid n m v)
      (vector-set! (vector-ref grid n) m v))
    (define (each grid proc)
      (do ((j 0 (+ j 1)))
          ((= j (rows grid)))
        (do ((k 0 (+ k 1)))
            ((= k (cols grid)))
          (proc j k (ref grid j k)))))))

(define-library (example life)
  (export life)
  (import (except (scheme base) set!)
          (scheme write)
          (example grid))
  (begin
    (define (life-count grid i j)
      (define (count i j)
        (if (ref grid i j) 1 0))
      (+ (count (- i 1) (- j 1))
         (count (- i 1) j)
         (count (- i 1) (+ j 1))
         (count i (- j 1))
         (count i (+ j 1))
         (count (+ i 1) (- j 1))
         (count (+ i 1) j)
         (count (+ i 1) (+ j 1))))
    (define (life-alive? grid i j)
      (case (life-count grid i j)
        ((3) <tt>#true</tt>)
        ((2) (ref grid i j))
        (else <tt>#false</tt>)))
    (define (life-print grid)
      (display &quot;\x1B;[1H\x1B;[J&quot;)  ; clear vt100
      (each grid
       (lambda (i j v)
         (display (if v &quot;*&quot; &quot; &quot;))
         (when (= j (- (cols grid) 1))
           (newline)))))
    (define (life grid iterations)
      (do ((i 0 (+ i 1))
           (grid0 grid grid1)
           (grid1 (make (rows grid) (cols grid))
                  grid0))
          ((= i iterations))
        (each grid0
         (lambda (j k v)
           (let ((a (life-alive? grid0 j k)))
             (set! grid1 j k a))))
        (life-print grid1)))))

;; Main program.
(import (scheme base)
        (only (example life) life)
        (rename (prefix (example grid) grid-)
                (grid-make make-grid)))

;; Initialize a grid with a glider.
(define grid (make-grid 24 24))
(grid-set! grid 1 1 <tt>#true</tt>)
(grid-set! grid 2 2 <tt>#true</tt>)
(grid-set! grid 3 0 <tt>#true</tt>)
(grid-set! grid 3 1 <tt>#true</tt>)
(grid-set! grid 3 2 <tt>#true</tt>)

;; Run for 80 iterations.
(life grid 80)


</pre></div>


<hr>
</div>
</div>
<div class="section" id="The-REPL">
<div class="header">
<p>
Previous: <a href="#Libraries" accesskey="p" rel="prev">Libraries</a>, Up: <a href="#Program-structure" accesskey="u" rel="up">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="The-REPL-1"></span><h3 class="section">5.7 The REPL</h3>

<span id="index-the-repl"></span>

<p>Implementations may provide an interactive session called a
<em>REPL</em> (Read-Eval-Print Loop), where import declarations,
<span id="index-repl"></span>
expressions and definitions can be
entered and evaluated one at a time.  For convenience and ease of use,
the global Scheme environment in a REPL
must not be empty, but must start out with at least the bindings provided by the
base library.  This library includes the core syntax of Scheme
and generally useful procedures that manipulate data.  For example, the
variable &lsquo;<samp>abs</samp>&rsquo; is bound to a
procedure of one argument that computes the absolute value of a
number, and the variable &lsquo;<samp>+</samp>&rsquo; is bound to a procedure that computes
sums.  The full list of &lsquo;<samp>(scheme base)</samp>&rsquo; bindings can be found in
Appendix <a href="#Standard-Libraries">Standard Libraries</a>.
</p>
<p>Implementations may provide an initial REPL environment 
which behaves as if all possible variables are bound to locations, most of
which contain unspecified values.  Top level REPL definitions in
such an implementation are truly equivalent to assignments,
unless the identifier is defined as a syntax keyword.
</p>
<p>An implementation may provide a mode of operation in which the REPL
reads its input from a file.  Such a file is not, in general, the same
as a program, because it can contain import declarations in places other than
the beginning.
</p>
       


<hr>
</div>
</div>
<div class="chapter" id="Standard-procedures">
<div class="header">
<p>
Next: <a href="#Formal-syntax-and-semantics" accesskey="n" rel="next">Formal syntax and semantics</a>, Previous: <a href="#Program-structure" accesskey="p" rel="prev">Program structure</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Standard-procedures-1"></span><h2 class="chapter">6 Standard procedures</h2>


<span id="index-standard-procedures"></span>




<span id="index-initial-environment"></span>

<span id="index-global-environment-1"></span>

<span id="index-procedure"></span>

<p>This chapter describes Scheme&rsquo;s built-in procedures.  
</p>
<p>The procedures &lsquo;<samp>force</samp>&rsquo;, &lsquo;<samp>promise?</samp>&rsquo;, and &lsquo;<samp>make-promise</samp>&rsquo; are intimately associated
with the expression types &lsquo;<samp>delay</samp>&rsquo; and &lsquo;<samp>delay-force</samp>&rsquo;, and are described
with them in section <a href="#Delayed-evaluation">Delayed evaluation</a>.  In the same way, the procedure
&lsquo;<samp>make-parameter</samp>&rsquo; is intimately associated with the expression type
&lsquo;<samp>parameterize</samp>&rsquo;, and is described with it in section <a href="#Dynamic-bindings">Dynamic bindings</a>.
</p>

<p>A program can use a global variable definition to bind any variable.  It may
subsequently alter any such binding by an assignment (see
section see <a href="#Assignments">Assignments</a>).  These operations do not modify the behavior of
any procedure defined in this report or imported from a library
(see section see <a href="#Libraries">Libraries</a>).  Altering any global binding that has
not been introduced by a definition has an unspecified effect on the
behavior of the procedures defined in this chapter.
</p>
<p>When a procedure is said to return a <em>newly allocated</em> object,
<span id="index-newly-allocated"></span>
it means that the locations in the object are fresh.
</p>
<ul class="section-toc">
<li><a href="#Equivalence-predicates" accesskey="1">Equivalence predicates</a></li>
<li><a href="#Numbers" accesskey="2">Numbers</a></li>
<li><a href="#Booleans" accesskey="3">Booleans</a></li>
<li><a href="#Pairs-and-lists" accesskey="4">Pairs and lists</a></li>
<li><a href="#Symbols" accesskey="5">Symbols</a></li>
<li><a href="#Characters" accesskey="6">Characters</a></li>
<li><a href="#Strings" accesskey="7">Strings</a></li>
<li><a href="#Vectors" accesskey="8">Vectors</a></li>
<li><a href="#Bytevectors" accesskey="9">Bytevectors</a></li>
<li><a href="#Control-features">Control features</a></li>
<li><a href="#Exceptions">Exceptions</a></li>
<li><a href="#Environments-and-evaluation">Environments and evaluation</a></li>
<li><a href="#Input-and-output">Input and output</a></li>
<li><a href="#System-interface">System interface</a></li>
</ul>
<hr>
<div class="section" id="Equivalence-predicates">
<div class="header">
<p>
Next: <a href="#Numbers" accesskey="n" rel="next">Numbers</a>, Previous: <a href="#Standard-procedures" accesskey="p" rel="prev">Standard procedures</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Equivalence-predicates-1"></span><h3 class="section">6.1 Equivalence predicates</h3>

<span id="index-equivalence-predicates"></span>


<p>A <em>predicate</em> is a procedure that always returns a boolean
<span id="index-predicate"></span>
value (<tt>#t</tt> or <tt>#f</tt>).  An <em>equivalence predicate</em> is
<span id="index-equivalence-predicate"></span>
the computational analogue of a mathematical equivalence relation; it is
symmetric, reflexive, and transitive.  Of the equivalence predicates
described in this section, &lsquo;<samp>eq?</samp>&rsquo; is the finest or most
discriminating, &lsquo;<samp>equal?</samp>&rsquo; is the coarsest, and &lsquo;<samp>eqv?</samp>&rsquo; is
slightly less discriminating than &lsquo;<samp>eq?</samp>&rsquo;.  
</p>


<dl class="def">
<dt id="index-eqv_003f"><span class="category">procedure: </span><span><strong>eqv?</strong> <em>obj1 obj2</em><a href='#index-eqv_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>eqv?</samp>&rsquo; procedure defines a useful equivalence relation on objects.
Briefly, it returns <tt>#t</tt> if <var>obj1</var> and <var>obj2</var> are
normally regarded as the same object.  This relation is left slightly
open to interpretation, but the following partial specification of
&lsquo;<samp>eqv?</samp>&rsquo; holds for all implementations of Scheme.
</p>
<p>The &lsquo;<samp>eqv?</samp>&rsquo; procedure returns <tt>#t</tt> if:
</p>


<ul>
<li> <var>obj1</var> and <var>obj2</var> are both <tt>#t</tt> or both <tt>#f</tt>.

</li><li> <var>obj1</var> and <var>obj2</var> are both symbols and are the same
symbol according to the &lsquo;<samp>symbol=?</samp>&rsquo; procedure
(section see <a href="#Symbols">Symbols</a>).

</li><li> <var>obj1</var> and <var>obj2</var> are both exact numbers and
are numerically equal (in the sense of &lsquo;<samp>=</samp>&rsquo;).

</li><li> <var>obj1</var> and <var>obj2</var> are both inexact numbers such that
they are numerically equal (in the sense of &lsquo;<samp>=</samp>&rsquo;)
and they yield the same results (in the sense of &lsquo;<samp>eqv?</samp>&rsquo;)
when passed as arguments to any other procedure
that can be defined as a finite composition of Scheme&rsquo;s standard
arithmetic procedures, provided it does not result in a NaN value.

</li><li> <var>obj1</var> and <var>obj2</var> are both characters and are the same
character according to the &lsquo;<samp>char=?</samp>&rsquo; procedure
(section see <a href="#Characters">Characters</a>).

</li><li> <var>obj1</var> and <var>obj2</var> are both the empty list.

</li><li> <var>obj1</var> and <var>obj2</var> are pairs, vectors, bytevectors, records,
or strings that denote the same location in the store
(section see <a href="#Storage-model">Storage model</a>).

</li><li> <var>obj1</var> and <var>obj2</var> are procedures whose location tags are
equal (section see <a href="#Procedures">Procedures</a>).

</li></ul>


<p>The &lsquo;<samp>eqv?</samp>&rsquo; procedure returns <tt>#f</tt> if:
</p>


<ul>
<li> <var>obj1</var> and <var>obj2</var> are of different types
(section see <a href="#Disjointness-of-types">Disjointness of types</a>).

</li><li> one of <var>obj1</var> and <var>obj2</var> is <tt>#t</tt> but the other is
<tt>#f</tt>.

</li><li> <var>obj1</var> and <var>obj2</var> are symbols but are not the same
symbol according to the &lsquo;<samp>symbol=?</samp>&rsquo; procedure
(section see <a href="#Symbols">Symbols</a>).

</li><li> one of <var>obj1</var> and <var>obj2</var> is an exact number but the other
is an inexact number.

</li><li> <var>obj1</var> and <var>obj2</var> are both exact numbers and
are numerically unequal (in the sense of &lsquo;<samp>=</samp>&rsquo;).

</li><li> <var>obj1</var> and <var>obj2</var> are both inexact numbers such that either
they are numerically unequal (in the sense of &lsquo;<samp>=</samp>&rsquo;),
or they do not yield the same results (in the sense of &lsquo;<samp>eqv?</samp>&rsquo;)
when passed as arguments to any other procedure
that can be defined as a finite composition of Scheme&rsquo;s standard
arithmetic procedures, provided it does not result in a NaN value.
As an exception, the behavior of &lsquo;<samp>eqv?</samp>&rsquo; is unspecified
when both <var>obj1</var> and <var>obj2</var> are NaN.

</li><li> <var>obj1</var> and <var>obj2</var> are characters for which the &lsquo;<samp>char=?</samp>&rsquo;
procedure returns <tt>#f</tt>.

</li><li> one of <var>obj1</var> and <var>obj2</var> is the empty list but the other
is not.

</li><li> <var>obj1</var> and <var>obj2</var> are pairs, vectors, bytevectors, records,
or strings that denote distinct locations.

</li><li> <var>obj1</var> and <var>obj2</var> are procedures that would behave differently
(return different values or have different side effects) for some arguments.


</li></ul>



<div class="format">
<pre class="format"><tt>(eqv? 'a 'a)                           ==&gt;  #t
(eqv? 'a 'b)                           ==&gt;  #f
(eqv? 2 2)                             ==&gt;  #t
(eqv? 2 2.0)                           ==&gt;  #f
(eqv? '() '())                         ==&gt;  #t
(eqv? 100000000 100000000)             ==&gt;  #t
(eqv? 0.0 +nan.0)                      ==&gt;  #f
(eqv? (cons 1 2) (cons 1 2))           ==&gt;  #f
(eqv? (lambda () 1)
      (lambda () 2))                   ==&gt;  #f
(let ((p (lambda (x) x)))
  (eqv? p p))                          ==&gt;  #t
(eqv? #f 'nil)                         ==&gt;  #f
</tt>
</pre></div>


<p>The following examples illustrate cases in which the above rules do
not fully specify the behavior of &lsquo;<samp>eqv?</samp>&rsquo;.  All that can be said
about such cases is that the value returned by &lsquo;<samp>eqv?</samp>&rsquo; must be a
boolean.
</p>

<div class="format">
<pre class="format"><tt>(eqv? &quot;&quot; &quot;&quot;)                           ==&gt;  <em>unspecified</em>
(eqv? '#() '#())                       ==&gt;  <em>unspecified</em>
(eqv? (lambda (x) x)
      (lambda (x) x))                  ==&gt;  <em>unspecified</em>
(eqv? (lambda (x) x)
      (lambda (y) y))                  ==&gt;  <em>unspecified</em>
(eqv? 1.0e0 1.0f0)                     ==&gt;  <em>unspecified</em>
(eqv? +nan.0 +nan.0)                   ==&gt;  <em>unspecified</em>
</tt>
</pre></div>


<p>Note that &lsquo;<samp>(eqv? 0.0 -0.0)</samp>&rsquo; will return <tt>#f</tt> if negative zero
is distinguished, and <tt>#t</tt> if negative zero is not distinguished.
</p>
<p>The next set of examples shows the use of &lsquo;<samp>eqv?</samp>&rsquo; with procedures
that have local state.  The &lsquo;<samp>gen-counter</samp>&rsquo; procedure must return a distinct
procedure every time, since each procedure has its own internal counter.
The &lsquo;<samp>gen-loser</samp>&rsquo; procedure, however, returns operationally equivalent procedures each time, since
the local state does not affect the value or side effects of the
procedures.  However, &lsquo;<samp>eqv?</samp>&rsquo; may or may not detect this equivalence.
</p>

<div class="format">
<pre class="format"><tt>(define gen-counter
  (lambda ()
    (let ((n 0))
      (lambda () (set! n (+ n 1)) n))))
(let ((g (gen-counter)))
  (eqv? g g))                          ==&gt;  #t
(eqv? (gen-counter) (gen-counter))
                                       ==&gt;  #f
(define gen-loser
  (lambda ()
    (let ((n 0))
      (lambda () (set! n (+ n 1)) 27))))
(let ((g (gen-loser)))
  (eqv? g g))                          ==&gt;  #t
(eqv? (gen-loser) (gen-loser))
                                       ==&gt;  <em>unspecified</em>

(letrec ((f (lambda () (if (eqv? f g) 'both 'f)))
         (g (lambda () (if (eqv? f g) 'both 'g))))
  (eqv? f g))
                                       ==&gt;  <em>unspecified</em>

(letrec ((f (lambda () (if (eqv? f g) 'f 'both)))
         (g (lambda () (if (eqv? f g) 'g 'both))))
  (eqv? f g))
                                       ==&gt;  #f
</tt>
</pre></div>


<p>Since it is an error to modify constant objects (those returned by
literal expressions), implementations may
share structure between constants where appropriate.  Thus
the value of &lsquo;<samp>eqv?</samp>&rsquo; on constants is sometimes
implementation-dependent.
</p>

<div class="format">
<pre class="format"><tt>(eqv? '(a) '(a))                       ==&gt;  <em>unspecified</em>
(eqv? &quot;a&quot; &quot;a&quot;)                         ==&gt;  <em>unspecified</em>
(eqv? '(b) (cdr '(a b)))               ==&gt;  <em>unspecified</em>
(let ((x '(a)))
  (eqv? x x))                          ==&gt;  #t
</tt>
</pre></div>


<p>The above definition of &lsquo;<samp>eqv?</samp>&rsquo; allows implementations latitude in
their treatment of procedures and literals:  implementations may
either detect or fail to detect that two procedures or two literals
are equivalent to each other, and can decide whether or not to
merge representations of equivalent objects by using the same pointer or
bit pattern to represent both.
</p>

<blockquote>
<p><em>Note:</em>
If inexact numbers are represented as IEEE binary floating-point numbers,
then an implementation of &lsquo;<samp>eqv?</samp>&rsquo; that simply compares equal-sized
inexact numbers for bitwise equality is correct by the above definition.
</p></blockquote>


</dd></dl>



<dl class="def">
<dt id="index-eq_003f"><span class="category">procedure: </span><span><strong>eq?</strong> <em>obj1 obj2</em><a href='#index-eq_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>eq?</samp>&rsquo; procedure is similar to &lsquo;<samp>eqv?</samp>&rsquo; except that in some cases it is
capable of discerning distinctions finer than those detectable by
&lsquo;<samp>eqv?</samp>&rsquo;.  It must always return <tt>#f</tt> when &lsquo;<samp>eqv?</samp>&rsquo; also
would, but may return <tt>#f</tt> in some cases where &lsquo;<samp>eqv?</samp>&rsquo; would return <tt>#t</tt>.
</p>
<p>On symbols, booleans, the empty list, pairs, and records,
and also on non-empty
strings, vectors, and bytevectors, &lsquo;<samp>eq?</samp>&rsquo; and &lsquo;<samp>eqv?</samp>&rsquo; are guaranteed to have the same
behavior.  On procedures, &lsquo;<samp>eq?</samp>&rsquo; must return true if the arguments&rsquo; location
tags are equal.  On numbers and characters, &lsquo;<samp>eq?</samp>&rsquo;&rsquo;s behavior is
implementation-dependent, but it will always return either true or
false.  On empty strings, empty vectors, and empty bytevectors, &lsquo;<samp>eq?</samp>&rsquo; may also behave
differently from &lsquo;<samp>eqv?</samp>&rsquo;.
</p>

<div class="format">
<pre class="format"><tt>(eq? 'a 'a)                            ==&gt;  #t
(eq? '(a) '(a))                        ==&gt;  <em>unspecified</em>
(eq? (list 'a) (list 'a))              ==&gt;  #f
(eq? &quot;a&quot; &quot;a&quot;)                          ==&gt;  <em>unspecified</em>
(eq? &quot;&quot; &quot;&quot;)                            ==&gt;  <em>unspecified</em>
(eq? '() '())                          ==&gt;  #t
(eq? 2 2)                              ==&gt;  <em>unspecified</em>
(eq? #\A #\A)                          ==&gt;  <em>unspecified</em>
(eq? car car)                          ==&gt;  #t
(let ((n (+ 2 3)))
  (eq? n n))                           ==&gt;  <em>unspecified</em>
(let ((x '(a)))
  (eq? x x))                           ==&gt;  #t
(let ((x '#()))
  (eq? x x))                           ==&gt;  #t
(let ((p (lambda (x) x)))
  (eq? p p))                           ==&gt;  #t
</tt>
</pre></div>




<blockquote>
<p><em>Rationale:</em> It will usually be possible to implement &lsquo;<samp>eq?</samp>&rsquo; much
more efficiently than &lsquo;<samp>eqv?</samp>&rsquo;, for example, as a simple pointer
comparison instead of as some more complicated operation.  One reason is
that it is not always possible to compute &lsquo;<samp>eqv?</samp>&rsquo; of two numbers in
constant time, whereas &lsquo;<samp>eq?</samp>&rsquo; implemented as pointer comparison will
always finish in constant time.
</p></blockquote>


</dd></dl>



<dl class="def">
<dt id="index-equal_003f"><span class="category">procedure: </span><span><strong>equal?</strong> <em>obj1 obj2</em><a href='#index-equal_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>equal?</samp>&rsquo; procedure, when applied to pairs, vectors, strings and
bytevectors, recursively compares them, returning <tt>#t</tt> when the
unfoldings of its arguments into (possibly infinite) trees are equal
(in the sense of &lsquo;<samp>equal?</samp>&rsquo;)
as ordered trees, and <tt>#f</tt> otherwise.  It returns the same as
&lsquo;<samp>eqv?</samp>&rsquo; when applied to booleans, symbols, numbers, characters,
ports, procedures, and the empty list.  If two objects are &lsquo;<samp>eqv?</samp>&rsquo;,
they must be &lsquo;<samp>equal?</samp>&rsquo; as well.  In all other cases, &lsquo;<samp>equal?</samp>&rsquo;
may return either <tt>#t</tt> or <tt>#f</tt>.
</p>
<p>Even if its arguments are
circular data structures, &lsquo;<samp>equal?</samp>&rsquo; must always terminate.
</p>

<div class="format">
<pre class="format"><tt>(equal? 'a 'a)                         ==&gt;  #t
(equal? '(a) '(a))                     ==&gt;  #t
(equal? '(a (b) c)
        '(a (b) c))                    ==&gt;  #t
(equal? &quot;abc&quot; &quot;abc&quot;)                   ==&gt;  #t
(equal? 2 2)                           ==&gt;  #t
(equal? (make-vector 5 'a)
        (make-vector 5 'a))            ==&gt;  #t
(equal? '#1=(a b . #1#)
        '#2=(a b a b . #2#))           ==&gt;  #t
(equal? (lambda (x) x)
        (lambda (y) y))                ==&gt;  <em>unspecified</em>
</tt>
</pre></div>



<blockquote>
<p><em>Note:</em>
A rule of thumb is that objects are generally &lsquo;<samp>equal?</samp>&rsquo; if they print
the same.
</p></blockquote>




</dd></dl>


<hr>
</div>
<div class="section" id="Numbers">
<div class="header">
<p>
Next: <a href="#Booleans" accesskey="n" rel="next">Booleans</a>, Previous: <a href="#Equivalence-predicates" accesskey="p" rel="prev">Equivalence predicates</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Numbers-1"></span><h3 class="section">6.2 Numbers</h3>


<span id="index-numbers"></span>


<span id="index-number"></span>


<p>It is important to distinguish between mathematical numbers, the
Scheme numbers that attempt to model them, the machine representations
used to implement the Scheme numbers, and notations used to write numbers.
This report uses the types <i>number</i>, <i>complex</i>, <i>real</i>,
<i>rational</i>, and <i>integer</i> to refer to both mathematical numbers
and Scheme numbers.  
</p>
<ul class="section-toc">
<li><a href="#Numerical-types" accesskey="1">Numerical types</a></li>
<li><a href="#Exactness" accesskey="2">Exactness</a></li>
<li><a href="#Implementation-restrictions" accesskey="3">Implementation restrictions</a></li>
<li><a href="#Implementation-extensions" accesskey="4">Implementation extensions</a></li>
<li><a href="#Syntax-of-numerical-constants" accesskey="5">Syntax of numerical constants</a></li>
<li><a href="#Numerical-operations" accesskey="6">Numerical operations</a></li>
<li><a href="#Numerical-input-and-output" accesskey="7">Numerical input and output</a></li>
</ul>
<hr>
<div class="subsection" id="Numerical-types">
<div class="header">
<p>
Next: <a href="#Exactness" accesskey="n" rel="next">Exactness</a>, Previous: <a href="#Numbers" accesskey="p" rel="prev">Numbers</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Numerical-types-1"></span><h4 class="subsection">6.2.1 Numerical types</h4>

<span id="index-numerical-types"></span>



<p>Mathematically, numbers are arranged into a tower of subtypes
in which each level is a subset of the level above it:
</p>
<div class="format">
<pre class="format">         <span class="roman">number</span> 
          <span class="roman">complex number</span> 
          <span class="roman">real number</span> 
          <span class="roman">rational number</span> 
          <span class="roman">integer</span> 
</pre></div>


<p>For example, 3 is an integer.  Therefore 3 is also a rational,
a real, and a complex number.  The same is true of the Scheme numbers
that model 3.  For Scheme numbers, these types are defined by the
predicates <code>number?</code>, <code>complex?</code>, <code>real?</code>, <code>rational?</code>,
<span id="index-rational_003f-1"></span>
<span id="index-real_003f-1"></span>
<span id="index-complex_003f-1"></span>
<span id="index-number_003f-2"></span>
and <code>integer?</code>.
<span id="index-integer_003f-1"></span>
</p>
<p>There is no simple relationship between a number&rsquo;s type and its
representation inside a computer.  Although most implementations of
Scheme will offer at least two different representations of 3, these
different representations denote the same integer.
</p>
<p>Scheme&rsquo;s numerical operations treat numbers as abstract data, as
independent of their representation as possible.  Although an implementation
of Scheme may use multiple internal representations of
numbers, this ought not to be apparent to a casual programmer writing
simple programs.
</p>
<hr>
</div>
<div class="subsection" id="Exactness">
<div class="header">
<p>
Next: <a href="#Implementation-restrictions" accesskey="n" rel="next">Implementation restrictions</a>, Previous: <a href="#Numerical-types" accesskey="p" rel="prev">Numerical types</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Exactness-1"></span><h4 class="subsection">6.2.2 Exactness</h4>

<span id="index-exactness"></span>

 

<p>It is useful to distinguish between numbers that are
represented exactly and those that might not be.  For example, indexes
into data structures must be known exactly, as must some polynomial
coefficients in a symbolic algebra system.  On the other hand, the
results of measurements are inherently inexact, and irrational numbers
may be approximated by rational and therefore inexact approximations.
In order to catch uses of inexact numbers where exact numbers are
required, Scheme explicitly distinguishes exact from inexact numbers.
This distinction is orthogonal to the dimension of type.
</p>
<p>A Scheme number is
<i>exact</i> if it was written as an exact constant or was derived from
<span class="roman">exact</span> numbers using only <span class="roman">exact</span> operations.  A number is
<i>inexact</i> if it was written as an inexact constant,
if it was
derived using <span class="roman">inexact</span> ingredients, or if it was derived using
<span class="roman">inexact</span> operations. Thus <span class="roman">inexact</span>ness is a contagious
property of a number.
In particular, an <em>exact complex number</em> has an exact real part
<span id="index-exact-complex-number"></span>
and an exact imaginary part; all other complex numbers are <em>inexact
complex numbers</em>.
<span id="index-inexact-"></span>
complex numbers
</p>
<p>If two implementations produce <span class="roman">exact</span> results for a
computation that did not involve <span class="roman">inexact</span> intermediate results,
the two ultimate results will be mathematically equal.  This is
generally not true of computations involving <span class="roman">inexact</span> numbers
since approximate methods such as floating-point arithmetic may be used,
but it is the duty of each implementation to make the result as close as
practical to the mathematically ideal result.
</p>
<p>Rational operations such as &lsquo;<samp>+</samp>&rsquo; should always produce
<span class="roman">exact</span> results when given <span class="roman">exact</span> arguments.
If the operation is unable to produce an <span class="roman">exact</span> result,
then it may either report the violation of an implementation restriction
or it may silently coerce its
result to an <span class="roman">inexact</span> value.
However, &lsquo;<samp>(/ 3 4)</samp>&rsquo; must not return the mathematically incorrect value &lsquo;<samp>0</samp>&rsquo;.
See section <a href="#Implementation-restrictions">Implementation restrictions</a>.
</p>
<p>Except for <code>exact</code>, the operations described in
<span id="index-exact-1"></span>
this section must generally return inexact results when given any inexact
arguments.  An operation may, however, return an <span class="roman">exact</span> result if it can
prove that the value of the result is unaffected by the inexactness of its
arguments.  For example, multiplication of any number by an <span class="roman">exact</span> zero
may produce an <span class="roman">exact</span> zero result, even if the other argument is
<span class="roman">inexact</span>.
</p>
<p>Specifically, the expression &lsquo;<samp>(* 0 +inf.0)</samp>&rsquo; may return &lsquo;<samp>0</samp>&rsquo;,
or &lsquo;<samp>+nan.0</samp>&rsquo;, or report that inexact numbers are not supported,
or report that non-rational real numbers are not supported, or fail
silently or noisily in other implementation-specific ways.
</p>
<hr>
</div>
<div class="subsection" id="Implementation-restrictions">
<div class="header">
<p>
Next: <a href="#Implementation-extensions" accesskey="n" rel="next">Implementation extensions</a>, Previous: <a href="#Exactness" accesskey="p" rel="prev">Exactness</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Implementation-restrictions-1"></span><h4 class="subsection">6.2.3 Implementation restrictions</h4>

<span id="index-implementation-restrictions"></span>


<span id="index-implementation-restriction-1"></span>

<p>Implementations of Scheme are not required to implement the whole
tower of subtypes given in section <a href="#Numerical-types">Numerical types</a>,
but they must implement a coherent subset consistent with both the
purposes of the implementation and the spirit of the Scheme language.
For example, implementations in which all numbers are <span class="roman">real</span>,
or in which non-<span class="roman">real</span> numbers are always <span class="roman">inexact</span>,
or in which <span class="roman">exact</span> numbers are always <span class="roman">integer</span>,
are still quite useful.
</p>
<p>Implementations may also support only a limited range of numbers of
any type, subject to the requirements of this section.  The supported
range for <span class="roman">exact</span> numbers of any type may be different from the
supported range for <span class="roman">inexact</span> numbers of that type.  For example,
an implementation that uses IEEE binary double-precision floating-point numbers to represent all its
<span class="roman">inexact</span> <span class="roman">real</span> numbers may also
support a practically unbounded range of <span class="roman">exact</span> <span class="roman">integer</span>s
and <span class="roman">rational</span>s
while limiting the range of <span class="roman">inexact</span> <span class="roman">real</span>s (and therefore
the range of <span class="roman">inexact</span> <span class="roman">integer</span>s and <span class="roman">rational</span>s)
to the dynamic range of the IEEE binary double format.
Furthermore,
the gaps between the representable <span class="roman">inexact</span> <span class="roman">integer</span>s and
<span class="roman">rational</span>s are
likely to be very large in such an implementation as the limits of this
range are approached.
</p>
<p>An implementation of Scheme must support exact integers
throughout the range of numbers permitted as indexes of
lists, vectors, bytevectors, and strings or that result from computing the length of
one of these.  The <code>length</code>, <code>vector-length</code>,
<span id="index-vector_002dlength-1"></span>
<span id="index-length-1"></span>
<code>bytevector-length</code>, and <code>string-length</code> procedures must return an exact
<span id="index-string_002dlength-1"></span>
<span id="index-bytevector_002dlength-1"></span>
integer, and it is an error to use anything but an exact integer as an
index.  Furthermore, any integer constant within the index range, if
expressed by an exact integer syntax, must be read as an exact
integer, regardless of any implementation restrictions that apply
outside this range.  Finally, the procedures listed below will always
return exact integer results provided all their arguments are exact integers
and the mathematically expected results are representable as exact integers
within the implementation:
</p>

<div class="example">
<pre class="example">

-                     *
+                     abs
ceiling               denominator
exact-integer-sqrt    expt
floor                 floor/
floor-quotient        floor-remainder
gcd                   lcm
max                   min
modulo                numerator
quotient              rationalize
remainder             round
square                truncate
truncate/             truncate-quotient
truncate-remainder

</pre></div>


<p>It is recommended, but not required, that implementations support
<span class="roman">exact</span> <span class="roman">integer</span>s and <span class="roman">exact</span> <span class="roman">rational</span>s of
practically unlimited size and precision, and to implement the
above procedures and the &lsquo;<samp>/</samp>&rsquo; procedure in
such a way that they always return <span class="roman">exact</span> results when given <span class="roman">exact</span>
arguments.  If one of these procedures is unable to deliver an <span class="roman">exact</span>
result when given <span class="roman">exact</span> arguments, then it may either report a
violation of an
implementation restriction or it may silently coerce its result to an
<span class="roman">inexact</span> number; such a coercion can cause an error later.
Nevertheless, implementations that do not provide <span class="roman">exact</span> rational
numbers should return <span class="roman">inexact</span> rational numbers rather than
reporting an implementation restriction.
</p>
<p>An implementation may use floating-point and other approximate 
representation strategies for <span class="roman">inexact</span> numbers.
This report recommends, but does not require, that 
implementations that use
floating-point representations
follow the IEEE 754 standard,
and that implementations using
other representations should match or exceed the precision achievable
using these floating-point standards [IEEE].
In particular, the description of transcendental functions in IEEE 754-2008
should be followed by such implementations, particularly with respect
to infinities and NaNs.
</p>
<p>Although Scheme allows a variety of written
notations for
numbers, any particular implementation may support only some of them.
For example, an implementation in which all numbers are <span class="roman">real</span>
need not support the rectangular and polar notations for complex
numbers.  If an implementation encounters an <span class="roman">exact</span> numerical constant that
it cannot represent as an <span class="roman">exact</span> number, then it may either report a
violation of an implementation restriction or it may silently represent the
constant by an <span class="roman">inexact</span> number.
</p>
<hr>
</div>
<div class="subsection" id="Implementation-extensions">
<div class="header">
<p>
Next: <a href="#Syntax-of-numerical-constants" accesskey="n" rel="next">Syntax of numerical constants</a>, Previous: <a href="#Implementation-restrictions" accesskey="p" rel="prev">Implementation restrictions</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Implementation-extensions-1"></span><h4 class="subsection">6.2.4 Implementation extensions</h4>

<span id="index-implementation-extensions"></span>

<span id="index-implementation-extension"></span>

<p>Implementations may provide more than one representation of
floating-point numbers with differing precisions.  In an implementation
which does so, an inexact result must be represented with at least
as much precision as is used to express any of the inexact arguments
to that operation.  Although it is desirable for potentially inexact
operations such as &lsquo;<samp>sqrt</samp>&rsquo; to produce <span class="roman">exact</span> answers when
applied to <span class="roman">exact</span> arguments, if an <span class="roman">exact</span> number is operated
upon so as to produce an <span class="roman">inexact</span> result, then the most precise
representation available must be used.  For example, the value of &lsquo;<samp>(sqrt 4)</samp>&rsquo; should be &lsquo;<samp>2</samp>&rsquo;, but in an implementation that provides both
single and double precision floating point numbers it may be the latter
but must not be the former.
</p>
<p>It is the programmer&rsquo;s responsibility to avoid using inexact
number objects with magnitude or significand too large to be
represented in the implementation.
</p>
<p>In addition, implementations may
distinguish special numbers called <span class="roman">positive infinity</span>,
<span class="roman">negative infinity</span>, <span class="roman">NaN</span>, and <span class="roman">negative zero</span>.
</p>
<p>Positive infinity is regarded as an inexact real (but not rational)
number that represents an indeterminate value greater than the
numbers represented by all rational numbers. Negative infinity
is regarded as an inexact real (but not rational) number that
represents an indeterminate value less than the numbers represented
by all rational numbers.
</p>
<p>Adding or multiplying an infinite value by any finite real value results
in an appropriately signed infinity; however, the sum of positive and
negative infinities is a NaN.  Positive infinity is the reciprocal
of zero, and negative infinity is the reciprocal of negative zero.
The behavior of the transcendental functions is sensitive to infinity
in accordance with IEEE 754.
</p>
<p>A NaN is regarded as an inexact real (but not rational) number
so indeterminate that it might represent any real value, including
positive or negative infinity, and might even be greater than positive
infinity or less than negative infinity.
An implementation that does not support non-real numbers may use NaN
to represent non-real values like &lsquo;<samp>(sqrt -1.0)</samp>&rsquo; and &lsquo;<samp>(asin 2.0)</samp>&rsquo;.
</p>
<p>A NaN always compares false to any number, including a NaN.  
An arithmetic operation where one operand is NaN returns NaN, unless the
implementation can prove that the result would be the same if the NaN
were replaced by any rational number.  Dividing zero by zero results in
NaN unless both zeros are exact.
</p>

<p>Negative zero is an inexact real value written &lsquo;<samp>-0.0</samp>&rsquo; and is distinct
(in the sense of &lsquo;<samp>eqv?</samp>&rsquo;) from &lsquo;<samp>0.0</samp>&rsquo;.  A Scheme implementation
is not required to distinguish negative zero.  If it does, however, the
behavior of the transcendental functions is sensitive to the distinction
in accordance with IEEE 754.
Specifically, in a Scheme implementing both complex numbers and negative zero,
the branch cut of the complex logarithm function is such that
&lsquo;<samp>(imag-part (log -1.0-0.0i))</samp>&rsquo; is -pi rather than pi.
</p>
<p>Furthermore, the negation of negative zero is ordinary zero and vice
versa.  This implies that the sum of two or more negative zeros is negative,
and the result of subtracting (positive) zero from a negative zero is
likewise negative.  However, numerical comparisons treat negative zero
as equal to zero.
</p>
<p>Note that both the real and the imaginary parts of a complex number
can be infinities, NaNs, or negative zero.
</p>
<hr>
</div>
<div class="subsection" id="Syntax-of-numerical-constants">
<div class="header">
<p>
Next: <a href="#Numerical-operations" accesskey="n" rel="next">Numerical operations</a>, Previous: <a href="#Implementation-extensions" accesskey="p" rel="prev">Implementation extensions</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Syntax-of-numerical-constants-1"></span><h4 class="subsection">6.2.5 Syntax of numerical constants</h4>

<span id="index-syntax-of-numerical-constants"></span>


<p>The syntax of the written representations for numbers is described formally in
section <a href="#Lexical-structure">Lexical structure</a>.  Note that case is not significant in numerical
constants.
</p>
<p>A number can be written in binary, octal, decimal, or
hexadecimal by the use of a radix prefix.  The radix prefixes are &lsquo;<samp>#b</samp>&rsquo; (binary), &lsquo;<samp>#o</samp>&rsquo; (octal), &lsquo;<samp>#d</samp>&rsquo; (decimal), and &lsquo;<samp>#x</samp>&rsquo; (hexadecimal).  With
<span id="index-_0023x"></span>
<span id="index-_0023d"></span>
<span id="index-_0023o"></span>
<span id="index-_0023b"></span>
no radix prefix, a number is assumed to be expressed in decimal.
</p>
<p>A
numerical constant can be specified to be either <span class="roman">exact</span> or
<span class="roman">inexact</span> by a prefix.  The prefixes are &lsquo;<samp>#e</samp>&rsquo;
<span id="index-_0023e"></span>
for <span class="roman">exact</span>, and &lsquo;<samp>#i</samp>&rsquo; for <span class="roman">inexact</span>.  An exactness
<span id="index-_0023i"></span>
prefix can appear before or after any radix prefix that is used.  If
the written representation of a number has no exactness prefix, the
constant is
<span class="roman">inexact</span> if it contains a decimal point or an
exponent.
Otherwise, it is <span class="roman">exact</span>.
</p>
<p>In systems with <span class="roman">inexact</span> numbers
of varying precisions it can be useful to specify
the precision of a constant.  For this purpose,
implementations may accept numerical constants
written with an exponent marker that indicates the
desired precision of the <span class="roman">inexact</span>
representation.  If so, the letter &lsquo;<samp>s</samp>&rsquo;, &lsquo;<samp>f</samp>&rsquo;,
&lsquo;<samp>d</samp>&rsquo;, or &lsquo;<samp>l</samp>&rsquo;, meaning <var>short</var>, <var>single</var>,
<var>double</var>, or <var>long</var> precision, respectively,
can be used in place of &lsquo;<samp>e</samp>&rsquo;.
The default precision has at least as much precision
as <var>double</var>, but
implementations may allow this default to be set by the user.
</p>

<div class="example">
<pre class="example">

3.14159265358979F0
       <span class="roman">Round to single &mdash;</span> 3.141593
0.6L0
       <span class="roman">Extend to long &mdash;</span> .600000000000000

</pre></div>


<p>The numbers positive infinity, negative infinity, and NaN are written
&lsquo;<samp>+inf.0</samp>&rsquo;, &lsquo;<samp>-inf.0</samp>&rsquo; and &lsquo;<samp>+nan.0</samp>&rsquo; respectively.
NaN may also be written &lsquo;<samp>-nan.0</samp>&rsquo;.
The use of signs in the written representation does not necessarily
reflect the underlying sign of the NaN value, if any.
Implementations are not required to support these numbers, but if they do,
they must do so in general conformance with IEEE 754.  However, implementations
are not required to support signaling NaNs, nor to provide a way to distinguish
between different NaNs.
</p>
<p>There are two notations provided for non-real complex numbers:
the <em>rectangular notation</em>
<span id="index-rectangular-notation"></span>
<var>a</var>&lsquo;<samp>+</samp>&rsquo;<var>b</var>&lsquo;<samp>i</samp>&rsquo;,
where <var>a</var> is the real part and <var>b</var> is the imaginary part;
and the <em>polar notation</em>
<span id="index-polar-notation"></span>
<var>r</var>&lsquo;<samp>@</samp>&rsquo;theta,
where <var>r</var> is the magnitude and theta is the phase (angle) in radians.
These are related by the equation
a+b<span class="roman">i</span> = r costheta + (r sintheta) <span class="roman">i</span>.
All of <var>a</var>, <var>b</var>, <var>r</var>, and theta are real numbers.
</p>

<hr>
</div>
<div class="subsection" id="Numerical-operations">
<div class="header">
<p>
Next: <a href="#Numerical-input-and-output" accesskey="n" rel="next">Numerical input and output</a>, Previous: <a href="#Syntax-of-numerical-constants" accesskey="p" rel="prev">Syntax of numerical constants</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Numerical-operations-1"></span><h4 class="subsection">6.2.6 Numerical operations</h4>

<span id="index-numerical-operations"></span>

<p>The reader is referred to section <a href="#Entry-format">Entry format</a> for a summary
of the naming conventions used to specify restrictions on the types of
arguments to numerical routines.
The examples used in this section assume that any numerical constant written
using an <span class="roman">exact</span> notation is indeed represented as an <span class="roman">exact</span>
number.  Some examples also assume that certain numerical constants written
using an <span class="roman">inexact</span> notation can be represented without loss of
accuracy; the <span class="roman">inexact</span> constants were chosen so that this is
likely to be true in implementations that use IEEE binary doubles to represent
inexact numbers.
</p>



<dl class="def">
<dt id="index-number_003f"><span class="category">procedure: </span><span><strong>number?</strong> <em>obj</em><a href='#index-number_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-complex_003f"><span class="category">procedure: </span><span><strong>complex?</strong> <em>obj</em><a href='#index-complex_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-real_003f"><span class="category">procedure: </span><span><strong>real?</strong> <em>obj</em><a href='#index-real_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-rational_003f"><span class="category">procedure: </span><span><strong>rational?</strong> <em>obj</em><a href='#index-rational_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-integer_003f"><span class="category">procedure: </span><span><strong>integer?</strong> <em>obj</em><a href='#index-integer_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These numerical type predicates can be applied to any kind of
argument, including non-numbers.  They return <tt>#t</tt> if the object is
of the named type, and otherwise they return <tt>#f</tt>.
In general, if a type predicate is true of a number then all higher
type predicates are also true of that number.  Consequently, if a type
predicate is false of a number, then all lower type predicates are
also false of that number.
</p>
<p>If <var>z</var> is a complex number, then &lsquo;<samp>(real? <var>z</var>)</samp>&rsquo; is true if
and only if &lsquo;<samp>(zero? (imag-part <var>z</var>))</samp>&rsquo; is true.
If <var>x</var> is an inexact real number, then &lsquo;<samp>(integer? <var>x</var>)</samp>&rsquo; is true if and only if &lsquo;<samp>(= <var>x</var> (round <var>x</var>))</samp>&rsquo;.
</p>
<p>The numbers &lsquo;<samp>+inf.0</samp>&rsquo;, &lsquo;<samp>-inf.0</samp>&rsquo;, and &lsquo;<samp>+nan.0</samp>&rsquo; are real but
not rational.
</p>

<div class="format">
<pre class="format"><tt>(complex? 3+4i)                        ==&gt;  #t
(complex? 3)                           ==&gt;  #t
(real? 3)                              ==&gt;  #t
(real? -2.5+0i)                        ==&gt;  #t
(real? -2.5+0.0i)                      ==&gt;  #f
(real? #e1e10)                         ==&gt;  #t
(real? +inf.0)                         ==&gt;  #t
(real? +nan.0)                         ==&gt;  #t
(rational? -inf.0)                     ==&gt;  #f
(rational? 3.5)                        ==&gt;  #t
(rational? 6/10)                       ==&gt;  #t
(rational? 6/3)                        ==&gt;  #t
(integer? 3+0i)                        ==&gt;  #t
(integer? 3.0)                         ==&gt;  #t
(integer? 8/4)                         ==&gt;  #t
</tt>
</pre></div>



<blockquote>
<p><em>Note:</em>
The behavior of these type predicates on <span class="roman">inexact</span> numbers
is unreliable, since any inaccuracy might affect the result.
</p></blockquote>



<blockquote>
<p><em>Note:</em>
In many implementations the <code>complex?</code> procedure will be the same as
<span id="index-complex_003f-2"></span>
<code>number?</code>, but unusual implementations may represent
<span id="index-number_003f-3"></span>
some irrational numbers exactly or may extend the number system to
support some kind of non-complex numbers.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-exact_003f"><span class="category">procedure: </span><span><strong>exact?</strong> <em><var>z</var></em><a href='#index-exact_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-inexact_003f"><span class="category">procedure: </span><span><strong>inexact?</strong> <em><var>z</var></em><a href='#index-inexact_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These numerical predicates provide tests for the exactness of a
quantity.  For any Scheme number, precisely one of these predicates
is true.
</p>

<div class="format">
<pre class="format"><tt>(exact? 3.0)                           ==&gt;  #f
(exact? #e3.0)                         ==&gt;  #t
(inexact? 3.)                          ==&gt;  #t
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-exact_002dinteger_003f"><span class="category">procedure: </span><span><strong>exact-integer?</strong> <em><var>z</var></em><a href='#index-exact_002dinteger_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>z</var> is both <span class="roman">exact</span> and an <span class="roman">integer</span>;
otherwise returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(exact-integer? 32)                    ==&gt; #t
(exact-integer? 32.0)                  ==&gt; #f
(exact-integer? 32/5)                  ==&gt; #f
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-finite_003f"><span class="category">inexact library procedure: </span><span><strong>finite?</strong> <em><var>z</var></em><a href='#index-finite_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>finite?</samp>&rsquo; procedure returns <tt>#t</tt> on all real numbers except
&lsquo;<samp>+inf.0</samp>&rsquo;, &lsquo;<samp>-inf.0</samp>&rsquo;, and &lsquo;<samp>+nan.0</samp>&rsquo;, and on complex
numbers if their real and imaginary parts are both finite.
Otherwise it returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(finite? 3)                            ==&gt;  #t
(finite? +inf.0)                       ==&gt;  #f
(finite? 3.0+inf.0i)                   ==&gt;  #f
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-infinite_003f"><span class="category">inexact library procedure: </span><span><strong>infinite?</strong> <em><var>z</var></em><a href='#index-infinite_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>infinite?</samp>&rsquo; procedure returns <tt>#t</tt> on the real numbers
&lsquo;<samp>+inf.0</samp>&rsquo; and &lsquo;<samp>-inf.0</samp>&rsquo;, and on complex
numbers if their real or imaginary parts or both are infinite.
Otherwise it returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(infinite? 3)                          ==&gt;  #f
(infinite? +inf.0)                     ==&gt;  #t
(infinite? +nan.0)                     ==&gt;  #f
(infinite? 3.0+inf.0i)                 ==&gt;  #t
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-nan_003f"><span class="category">inexact library procedure: </span><span><strong>nan?</strong> <em><var>z</var></em><a href='#index-nan_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>nan?</samp>&rsquo; procedure returns <tt>#t</tt> on &lsquo;<samp>+nan.0</samp>&rsquo;, and on complex
numbers if their real or imaginary parts or both are &lsquo;<samp>+nan.0</samp>&rsquo;.
Otherwise it returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(nan? +nan.0)                          ==&gt;  #t
(nan? 32)                              ==&gt;  #f
(nan? +nan.0+5.0i)                     ==&gt;  #t
(nan? 1+2i)                            ==&gt;  #f
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-_003d"><span class="category">procedure: </span><span><strong>=</strong> <em>z1 z2 z3 &hellip;</em><a href='#index-_003d' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_003c"><span class="category">procedure: </span><span><strong>&lt;</strong> <em>x1 x2 x3 &hellip;</em><a href='#index-_003c' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_003e"><span class="category">procedure: </span><span><strong>&gt;</strong> <em>x1 x2 x3 &hellip;</em><a href='#index-_003e' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_003c_003d"><span class="category">procedure: </span><span><strong>&lt;=</strong> <em>x1 x2 x3 &hellip;</em><a href='#index-_003c_003d' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_003e_003d"><span class="category">procedure: </span><span><strong>&gt;=</strong> <em>x1 x2 x3 &hellip;</em><a href='#index-_003e_003d' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return <tt>#t</tt> if their arguments are (respectively):
equal, monotonically increasing, monotonically decreasing,
monotonically non-decreasing, or monotonically non-increasing,
and <tt>#f</tt> otherwise.
If any of the arguments are &lsquo;<samp>+nan.0</samp>&rsquo;, all the predicates return <tt>#f</tt>.
They do not distinguish between inexact zero and inexact negative zero.
</p>
<p>These predicates are required to be transitive.
</p>

<blockquote>
<p><em>Note:</em>
The implementation approach
of converting all arguments to inexact numbers
if any argument is inexact is not transitive.  For example, let
&lsquo;<samp>big</samp>&rsquo; be &lsquo;<samp>(expt 2 1000)</samp>&rsquo;, and assume that &lsquo;<samp>big</samp>&rsquo; is exact and that
inexact numbers are represented by 64-bit IEEE binary floating point numbers.
Then &lsquo;<samp>(= (- big 1) (inexact big))</samp>&rsquo; and
&lsquo;<samp>(= (inexact big) (+ big 1))</samp>&rsquo; would both be true with this approach,
because of the limitations of IEEE
representations of large integers, whereas &lsquo;<samp>(= (- big 1) (+ big 1))</samp>&rsquo;
is false.  Converting inexact values to exact numbers that are the same (in the sense of &lsquo;<samp>=</samp>&rsquo;) to them will avoid
this problem, though special care must be taken with infinities.
</p></blockquote>



<blockquote>
<p><em>Note:</em>
While it is not an error to compare <span class="roman">inexact</span> numbers using these
predicates, the results are unreliable because a small inaccuracy
can affect the result; this is especially true of <code>=</code> and <code>zero?</code>.
<span id="index-zero_003f-1"></span>
<span id="index-_003d-1"></span>
When in doubt, consult a numerical analyst.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-zero_003f"><span class="category">procedure: </span><span><strong>zero?</strong> <em><var>z</var></em><a href='#index-zero_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-positive_003f"><span class="category">procedure: </span><span><strong>positive?</strong> <em><var>x</var></em><a href='#index-positive_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-negative_003f"><span class="category">procedure: </span><span><strong>negative?</strong> <em><var>x</var></em><a href='#index-negative_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-odd_003f"><span class="category">procedure: </span><span><strong>odd?</strong> <em><var>n</var></em><a href='#index-odd_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-even_003f"><span class="category">procedure: </span><span><strong>even?</strong> <em><var>n</var></em><a href='#index-even_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These numerical predicates test a number for a particular property,
returning <tt>#t</tt> or <tt>#f</tt>.  See note above.
</p>
</dd></dl>


<dl class="def">
<dt id="index-max"><span class="category">procedure: </span><span><strong>max</strong> <em>x1 x2 &hellip;</em><a href='#index-max' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-min"><span class="category">procedure: </span><span><strong>min</strong> <em>x1 x2 &hellip;</em><a href='#index-min' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return the maximum or minimum of their arguments.
</p>

<div class="format">
<pre class="format"><tt>(max 3 4)                              ==&gt;  4    ; exact
(max 3.9 4)                            ==&gt;  4.0  ; inexact
</tt>
</pre></div>



<blockquote>
<p><em>Note:</em>
If any argument is inexact, then the result will also be inexact (unless
the procedure can prove that the inaccuracy is not large enough to affect the
result, which is possible only in unusual implementations).  If &lsquo;<samp>min</samp>&rsquo; or
&lsquo;<samp>max</samp>&rsquo; is used to compare numbers of mixed exactness, and the numerical
value of the result cannot be represented as an inexact number without loss of
accuracy, then the procedure may report a violation of an implementation
restriction.
</p></blockquote>


</dd></dl>



<dl class="def">
<dt id="index-_002b"><span class="category">procedure: </span><span><strong>+</strong> <em>z1 &hellip;</em><a href='#index-_002b' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_002a"><span class="category">procedure: </span><span><strong>*</strong> <em>z1 &hellip;</em><a href='#index-_002a' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return the sum or product of their arguments.
</p>

<div class="format">
<pre class="format"><tt>(+ 3 4)                                ==&gt;  7
(+ 3)                                  ==&gt;  3
(+)                                    ==&gt;  0
(* 4)                                  ==&gt;  4
(*)                                    ==&gt;  1
</tt>
</pre></div>
 
 
</dd></dl>



<dl class="def">
<dt id="index-_002d"><span class="category">procedure: </span><span><strong>-</strong> <em><var>z</var></em><a href='#index-_002d' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_002d-1"><span class="category">procedure: </span><span><strong>-</strong> <em>z1 z2 &hellip;</em><a href='#index-_002d-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_002f"><span class="category">procedure: </span><span><strong>/</strong> <em><var>z</var></em><a href='#index-_002f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-_002f-1"><span class="category">procedure: </span><span><strong>/</strong> <em>z1 z2 &hellip;</em><a href='#index-_002f-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>With two or more arguments, these procedures return the difference or
quotient of their arguments, associating to the left.  With one argument,
however, they return the additive or multiplicative inverse of their argument.
</p>
<p>It is an error if any argument of &lsquo;<samp>/</samp>&rsquo; other than the first is an exact zero.
If the first argument is an exact zero, an implementation may return an
exact zero unless one of the other arguments is a NaN.
</p>

<div class="format">
<pre class="format"><tt>(- 3 4)                                ==&gt;  -1
(- 3 4 5)                              ==&gt;  -6
(- 3)                                  ==&gt;  -3
(/ 3 4 5)                              ==&gt;  3/20
(/ 3)                                  ==&gt;  1/3
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-abs"><span class="category">procedure: </span><span><strong>abs</strong> <em>x</em><a href='#index-abs' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>abs</samp>&rsquo; procedure returns the absolute value of its argument.  
</p>
<div class="format">
<pre class="format"><tt>(abs -7)                               ==&gt;  7
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-floor_002f"><span class="category">procedure: </span><span><strong>floor/</strong> <em>n1 n2</em><a href='#index-floor_002f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-floor_002dquotient"><span class="category">procedure: </span><span><strong>floor-quotient</strong> <em>n1 n2</em><a href='#index-floor_002dquotient' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-floor_002dremainder"><span class="category">procedure: </span><span><strong>floor-remainder</strong> <em>n1 n2</em><a href='#index-floor_002dremainder' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-truncate_002f"><span class="category">procedure: </span><span><strong>truncate/</strong> <em>n1 n2</em><a href='#index-truncate_002f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-truncate_002dquotient"><span class="category">procedure: </span><span><strong>truncate-quotient</strong> <em>n1 n2</em><a href='#index-truncate_002dquotient' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-truncate_002dremainder"><span class="category">procedure: </span><span><strong>truncate-remainder</strong> <em>n1 n2</em><a href='#index-truncate_002dremainder' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures implement
number-theoretic (integer) division.  It is an error if <var>n2</var> is zero.
The procedures ending in &lsquo;<samp>/</samp>&rsquo; return two integers; the other
procedures return an integer.  All the procedures compute a
quotient <var>n_q</var> and remainder <var>n_r</var> such that
<var>n1</var> = <var>n2</var> <var>n_q</var> + <var>n_r</var>.  For each of the 
division operators, there are three procedures defined as follows:
</p>

<div class="format">
<pre class="format"><tt>(<span class="roman">&lt;operator&gt;</span>/ <var>n1</var> <var>n2</var>)                    ==&gt; <var>n_q</var> <var>n_r</var>
(<span class="roman">&lt;operator&gt;</span>-quotient <var>n1</var> <var>n2</var>)            ==&gt; <var>n_q</var>
(<span class="roman">&lt;operator&gt;</span>-remainder <var>n1</var> <var>n2</var>)           ==&gt; <var>n_r</var>
</tt>
</pre></div>


<p>The remainder <var>n_r</var> is determined by the choice of integer
<var>n_q</var>: <var>n_r</var> = <var>n1</var> - <var>n2</var> <var>n_q</var>.  Each set of
operators uses a different choice of <var>n_q</var>:
</p>
<blockquote>
<dl compact="compact">
<dt><span><tt>floor</tt></span></dt>
<dd><p><var>n_q</var> = lfloor<var>n1</var> / <var>n2</var>rfloor 
</p></dd>
<dt><span><tt>truncate</tt></span></dt>
<dd><p><var>n_q</var> = texttruncate(<var>n1</var> / <var>n2</var>) 
</p></dd>
</dl>
</blockquote>



<p>For any of the operators, and for integers <var>n1</var> and <var>n2</var>
with <var>n2</var> not equal to 0,
</p>
<div class="format">
<pre class="format"><tt>     (= <var>n1</var> (+ (* <var>n2</var> (<span class="roman">&lt;operator&gt;</span>-quotient <var>n1</var> <var>n2</var>))
           (<span class="roman">&lt;operator&gt;</span>-remainder <var>n1</var> <var>n2</var>)))
                                       ==&gt;  #t
</tt>
</pre></div>

<p>provided all numbers involved in that computation are exact.
</p>
<p>Examples:
</p>

<div class="format">
<pre class="format"><tt>(floor/ 5 2)                           ==&gt; 2 1
(floor/ -5 2)                          ==&gt; -3 1
(floor/ 5 -2)                          ==&gt; -3 -1
(floor/ -5 -2)                         ==&gt; 2 -1
(truncate/ 5 2)                        ==&gt; 2 1
(truncate/ -5 2)                       ==&gt; -2 -1
(truncate/ 5 -2)                       ==&gt; -2 1
(truncate/ -5 -2)                      ==&gt; 2 -1
(truncate/ -5.0 -2)                    ==&gt; 2.0 -1.0
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-quotient"><span class="category">procedure: </span><span><strong>quotient</strong> <em>n1 n2</em><a href='#index-quotient' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-remainder"><span class="category">procedure: </span><span><strong>remainder</strong> <em>n1 n2</em><a href='#index-remainder' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-modulo"><span class="category">procedure: </span><span><strong>modulo</strong> <em>n1 n2</em><a href='#index-modulo' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>quotient</samp>&rsquo; and &lsquo;<samp>remainder</samp>&rsquo; procedures are equivalent to &lsquo;<samp>truncate-quotient</samp>&rsquo; and &lsquo;<samp>truncate-remainder</samp>&rsquo;, respectively, and &lsquo;<samp>modulo</samp>&rsquo; is equivalent to &lsquo;<samp>floor-remainder</samp>&rsquo;.
</p>

<blockquote>
<p><em>Note:</em>
These procedures are provided for backward compatibility with earlier
versions of this report.
</p></blockquote>

</dd></dl>


<dl class="def">
<dt id="index-gcd"><span class="category">procedure: </span><span><strong>gcd</strong> <em>n1 &hellip;</em><a href='#index-gcd' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-lcm"><span class="category">procedure: </span><span><strong>lcm</strong> <em>n1 &hellip;</em><a href='#index-lcm' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return the greatest common divisor or least common
multiple of their arguments.  The result is always non-negative.
</p>

<div class="format">
<pre class="format"><tt>(gcd 32 -36)                           ==&gt;  4
(gcd)                                  ==&gt;  0
(lcm 32 -36)                           ==&gt;  288
(lcm 32.0 -36)                         ==&gt;  288.0  ; inexact
(lcm)                                  ==&gt;  1
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-numerator"><span class="category">procedure: </span><span><strong>numerator</strong> <em><var>q</var></em><a href='#index-numerator' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-denominator"><span class="category">procedure: </span><span><strong>denominator</strong> <em><var>q</var></em><a href='#index-denominator' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return the numerator or denominator of their
argument; the result is computed as if the argument was represented as
a fraction in lowest terms.  The denominator is always positive.  The
denominator of 0 is defined to be 1.
</p>

<div class="format">
<pre class="format"><tt>(numerator (/ 6 4))                    ==&gt;  3
(denominator (/ 6 4))                  ==&gt;  2
(denominator
  (inexact (/ 6 4)))                   ==&gt; 2.0
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-floor"><span class="category">procedure: </span><span><strong>floor</strong> <em>x</em><a href='#index-floor' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-ceiling"><span class="category">procedure: </span><span><strong>ceiling</strong> <em>x</em><a href='#index-ceiling' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-truncate"><span class="category">procedure: </span><span><strong>truncate</strong> <em>x</em><a href='#index-truncate' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-round"><span class="category">procedure: </span><span><strong>round</strong> <em>x</em><a href='#index-round' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>These procedures return integers.
The &lsquo;<samp>floor</samp>&rsquo; procedure returns the largest integer not larger than <var>x</var>.
The &lsquo;<samp>ceiling</samp>&rsquo; procedure returns the smallest integer not smaller than <var>x</var>,
&lsquo;<samp>truncate</samp>&rsquo; returns the integer closest to <var>x</var> whose absolute
value is not larger than the absolute value of <var>x</var>, and &lsquo;<samp>round</samp>&rsquo; returns the
closest integer to <var>x</var>, rounding to even when <var>x</var> is halfway between two
integers.
</p>

<blockquote>
<p><em>Rationale:</em>
The &lsquo;<samp>round</samp>&rsquo; procedure rounds to even for consistency with the default rounding
mode specified by the IEEE 754 IEEE floating-point standard.
</p></blockquote>



<blockquote>
<p><em>Note:</em>
If the argument to one of these procedures is inexact, then the result
will also be inexact.  If an exact value is needed, the
result can be passed to the &lsquo;<samp>exact</samp>&rsquo; procedure.
If the argument is infinite or a NaN, then it is returned.
</p></blockquote>



<div class="format">
<pre class="format"><tt>(floor -4.3)                           ==&gt;  -5.0
(ceiling -4.3)                         ==&gt;  -4.0
(truncate -4.3)                        ==&gt;  -4.0
(round -4.3)                           ==&gt;  -4.0

(floor 3.5)                            ==&gt;  3.0
(ceiling 3.5)                          ==&gt;  4.0
(truncate 3.5)                         ==&gt;  3.0
(round 3.5)                            ==&gt;  4.0  ; inexact

(round 7/2)                            ==&gt;  4    ; exact
(round 7)                              ==&gt;  7
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-rationalize"><span class="category">procedure: </span><span><strong>rationalize</strong> <em>x y</em><a href='#index-rationalize' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>The &lsquo;<samp>rationalize</samp>&rsquo; procedure returns the <em>simplest</em> rational number
differing from <var>x</var> by no more than <var>y</var>.  A rational number r_1 is
<em>simpler</em>  than another rational number
<span id="index-simplest-rational"></span>
r_2 if r_1 = p_1/q_1 and r_2 = p_2/q_2 (in lowest terms) and |p_1|&lt;= |p_2| and |q_1| &lt;= |q_2|.  Thus 3/5 is simpler than 4/7.
Although not all rationals are comparable in this ordering (consider 2/7
and 3/5), any interval contains a rational number that is simpler than
every other rational number in that interval (the simpler 2/5 lies
between 2/7 and 3/5).  Note that 0 = 0/1 is the simplest rational of
all.
</p>

<div class="format">
<pre class="format"><tt>(rationalize
  (exact .3) 1/10)                     ==&gt; 1/3    ; exact
(rationalize .3 1/10)                  ==&gt; #i1/3  ; inexact
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-exp"><span class="category">inexact library procedure: </span><span><strong>exp</strong> <em><var>z</var></em><a href='#index-exp' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-log"><span class="category">inexact library procedure: </span><span><strong>log</strong> <em><var>z</var></em><a href='#index-log' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-log-1"><span class="category">inexact library procedure: </span><span><strong>log</strong> <em>z1 z2</em><a href='#index-log-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-sin"><span class="category">inexact library procedure: </span><span><strong>sin</strong> <em><var>z</var></em><a href='#index-sin' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-cos"><span class="category">inexact library procedure: </span><span><strong>cos</strong> <em><var>z</var></em><a href='#index-cos' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-tan"><span class="category">inexact library procedure: </span><span><strong>tan</strong> <em><var>z</var></em><a href='#index-tan' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-asin"><span class="category">inexact library procedure: </span><span><strong>asin</strong> <em><var>z</var></em><a href='#index-asin' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-acos"><span class="category">inexact library procedure: </span><span><strong>acos</strong> <em><var>z</var></em><a href='#index-acos' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-atan"><span class="category">inexact library procedure: </span><span><strong>atan</strong> <em><var>z</var></em><a href='#index-atan' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-atan-1"><span class="category">inexact library procedure: </span><span><strong>atan</strong> <em><var>y</var> <var>x</var></em><a href='#index-atan-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures 
compute the usual transcendental functions.  The &lsquo;<samp>log</samp>&rsquo; procedure
computes the natural logarithm of <var>z</var> (not the base ten logarithm)
if a single argument is given, or the base-<var>z2</var> logarithm of <var>z1</var>
if two arguments are given.
The &lsquo;<samp>asin</samp>&rsquo;, &lsquo;<samp>acos</samp>&rsquo;, and &lsquo;<samp>atan</samp>&rsquo; procedures compute arcsine (sin^-1),
arc-cosine (cos^-1), and arctangent (tan^-1), respectively.
The two-argument variant of &lsquo;<samp>atan</samp>&rsquo; computes <tt>(angle
(make-rectangular <var>x</var> <var>y</var>))</tt> (see below), even in implementations
that don&rsquo;t support complex numbers.
</p>
<p>In general, the mathematical functions log, arcsine, arc-cosine, and
arctangent are multiply defined.
The value of log z is defined to be the one whose imaginary part
lies in the range from -pi (inclusive if &lsquo;<samp>-0.0</samp>&rsquo; is distinguished,
exclusive otherwise) to pi (inclusive).
The value of log 0 is mathematically undefined.
With log defined this way, the values of sin^-1 z, cos^-1 z,
and tan^-1 z are according to the following formulae:
</p>

<div align="center">sin^-1 z = -i log (i z + sqrt1 - z^2)
</div>


<div align="center">cos^-1 z = pi / 2 - sin^-1 z
</div>


<div align="center">tan^-1 z = (log (1 + i z) - log (1 - i z)) / (2 i)
</div>

<p>However, &lsquo;<samp>(log 0.0)</samp>&rsquo; returns &lsquo;<samp>-inf.0</samp>&rsquo; 
(and &lsquo;<samp>(log -0.0)</samp>&rsquo; returns &lsquo;<samp>-inf.0+pii</samp>&rsquo;) if the
implementation supports infinities (and &lsquo;<samp>-0.0</samp>&rsquo;).
</p>
<p>The range of <tt>(&lsquo;<samp>atan</samp>&rsquo; <var>y</var> <var>x</var>)</tt> is as in the
following table. The asterisk (*) indicates that the entry applies to
implementations that distinguish minus zero.
</p>

<blockquote>
<dl compact="compact">
<dd><p>y condition 
 x condition 
 range of result r
</p></dd>
<dt><span>hline</span></dt>
<dd><p>y = 0.0 
 x &gt; 0.0 
 0.0
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = +0.0 
 x &gt; 0.0 
 +0.0
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = -0.0 
 x &gt; 0.0 
 -0.0
</p></dd>
<dd><p>y &gt; 0.0 
 x &gt; 0.0 
 0.0 &lt; r &lt; fracpi2
</p></dd>
<dd><p>y &gt; 0.0 
 x = 0.0 
 fracpi2
</p></dd>
<dd><p>y &gt; 0.0 
 x &lt; 0.0 
 fracpi2 &lt; r &lt; pi
</p></dd>
<dd><p>y = 0.0 
 x &lt; 0 
 pi
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = +0.0 
 x &lt; 0.0 
 pi
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = -0.0 
 x &lt; 0.0 
 -pi
</p></dd>
<dd><p>y &lt; 0.0 
 x &lt; 0.0 
 -pi&lt; r&lt; -fracpi2
</p></dd>
<dd><p>y &lt; 0.0 
 x = 0.0 
 -fracpi2
</p></dd>
<dd><p>y &lt; 0.0 
 x &gt; 0.0 
 -fracpi2 &lt; r&lt; 0.0
</p></dd>
<dd><p>y = 0.0 
 x = 0.0 
 undefined
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = +0.0 
 x = +0.0 
 +0.0
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = -0.0 
 x = +0.0
 -0.0
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = +0.0 
 x = -0.0 
 pi
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = -0.0 
 x = -0.0 
 -pi
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = +0.0 
 x = 0 
 fracpi2
</p></dd>
<dt><span>ast</span></dt>
<dd><p>y = -0.0 
 x = 0 
 -fracpi2
</p></dd>
</dl>
</blockquote>




<p>The above specification follows [CLtL], which in turn
cites [Penfield81]; refer to these sources for more detailed
discussion of branch cuts, boundary conditions, and implementation of
these functions.  When it is possible, these procedures produce a real
result from a real argument.
</p>

</dd></dl>


<dl class="def">
<dt id="index-square"><span class="category">procedure: </span><span><strong>square</strong> <em><var>z</var></em><a href='#index-square' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the square of <var>z</var>.
This is equivalent to <tt>(&lsquo;<samp>*</samp>&rsquo; <var>z</var> <var>z</var>)</tt>.
</p>
<div class="format">
<pre class="format"><tt>(square 42)                            ==&gt; 1764
(square 2.0)                           ==&gt; 4.0
</tt>
</pre></div>



</dd></dl>


<dl class="def">
<dt id="index-sqrt"><span class="category">inexact library procedure: </span><span><strong>sqrt</strong> <em><var>z</var></em><a href='#index-sqrt' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the principal square root of <var>z</var>.  The result will have
either a positive real part, or a zero real part and a non-negative imaginary
part.
</p>

<div class="format">
<pre class="format"><tt>(sqrt 9)                               ==&gt; 3
(sqrt -1)                              ==&gt; +i
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-exact_002dinteger_002dsqrt"><span class="category">procedure: </span><span><strong>exact-integer-sqrt</strong> <em>k</em><a href='#index-exact_002dinteger_002dsqrt' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns two non-negative exact integers s and r where
<var>k</var> = s^2 + r and <var>k</var> &lt; (s+1)^2.
</p>

<div class="format">
<pre class="format"><tt>(exact-integer-sqrt 4)                 ==&gt; 2 0
(exact-integer-sqrt 5)                 ==&gt; 2 1
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-expt"><span class="category">procedure: </span><span><strong>expt</strong> <em>z1 z2</em><a href='#index-expt' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <var>z1</var> raised to the power <var>z2</var>.  For nonzero <var>z1</var>, this is
</p>

<div align="center">z_1^z_2 = e^z_2 log z_1
</div>
<p>The value of 0^z is 1 if &lsquo;<samp>(zero? z)</samp>&rsquo;, 0 if &lsquo;<samp>(real-part z)</samp>&rsquo;
is positive, and an error otherwise.  Similarly for 0.0^z,
with inexact results.
</p></dd></dl>





<dl class="def">
<dt id="index-make_002drectangular"><span class="category">complex library procedure: </span><span><strong>make-rectangular</strong> <em>x1 x2</em><a href='#index-make_002drectangular' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-make_002dpolar"><span class="category">complex library procedure: </span><span><strong>make-polar</strong> <em>x3 x4</em><a href='#index-make_002dpolar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-real_002dpart"><span class="category">complex library procedure: </span><span><strong>real-part</strong> <em><var>z</var></em><a href='#index-real_002dpart' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-imag_002dpart"><span class="category">complex library procedure: </span><span><strong>imag-part</strong> <em><var>z</var></em><a href='#index-imag_002dpart' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-magnitude"><span class="category">complex library procedure: </span><span><strong>magnitude</strong> <em><var>z</var></em><a href='#index-magnitude' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-angle"><span class="category">complex library procedure: </span><span><strong>angle</strong> <em><var>z</var></em><a href='#index-angle' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Let <var>x1</var>, <var>x2</var>, <var>x3</var>, and <var>x4</var> be
real numbers and <var>z</var> be a complex number such that
</p> 

<div align="center"><var>z</var> = <var>x1</var> + <var>x2</var>i<!-- /@w --> = <var>x3</var> . e^i x_4
</div>
<p>Then all of
</p>
<div class="format">
<pre class="format"><tt>(make-rectangular <var>x1</var> <var>x2</var>)               ==&gt; <var>z</var>
(make-polar <var>x3</var> <var>x4</var>)                     ==&gt; <var>z</var>
(real-part <var>z</var>)                          ==&gt; <var>x1</var>
(imag-part <var>z</var>)                          ==&gt; <var>x2</var>
(magnitude <var>z</var>)                          ==&gt; |<var>x3</var>|
(angle <var>z</var>)                              ==&gt; x_angle
</tt>
</pre></div>

<p>are true, where -pi &lt;= x_angle &lt;= pi with x_angle = <var>x4</var> + 2pi n
for some integer n.
</p>
<p>The &lsquo;<samp>make-polar</samp>&rsquo; procedure may return an inexact complex number even if its
arguments are exact.
The &lsquo;<samp>real-part</samp>&rsquo; and &lsquo;<samp>imag-part</samp>&rsquo; procedures may return exact real
numbers when applied to an inexact complex number if the corresponding
argument passed to &lsquo;<samp>make-rectangular</samp>&rsquo; was exact.
</p>


<blockquote>
<p><em>Rationale:</em>
The &lsquo;<samp>magnitude</samp>&rsquo; procedure is the same as <code>abs</code> for a real argument,
<span id="index-abs-1"></span>
but &lsquo;<samp>abs</samp>&rsquo; is in the base library, whereas
&lsquo;<samp>magnitude</samp>&rsquo; is in the optional complex library.
</p></blockquote>


</dd></dl>



<dl class="def">
<dt id="index-inexact"><span class="category">procedure: </span><span><strong>inexact</strong> <em><var>z</var></em><a href='#index-inexact' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-exact"><span class="category">procedure: </span><span><strong>exact</strong> <em><var>z</var></em><a href='#index-exact' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The procedure &lsquo;<samp>inexact</samp>&rsquo; returns an <span class="roman">inexact</span> representation of <var>z</var>.
The value returned is the
<span class="roman">inexact</span> number that is numerically closest to the argument.  
For inexact arguments, the result is the same as the argument. For exact
complex numbers, the result is a complex number whose real and imaginary
parts are the result of applying &lsquo;<samp>inexact</samp>&rsquo; to the real
and imaginary parts of the argument, respectively.
If an <span class="roman">exact</span> argument has no reasonably close <span class="roman">inexact</span> equivalent
(in the sense of &lsquo;<samp>=</samp>&rsquo;),
then a violation of an implementation restriction may be reported.
</p>
<p>The procedure &lsquo;<samp>exact</samp>&rsquo; returns an <span class="roman">exact</span> representation of
<var>z</var>.  The value returned is the <span class="roman">exact</span> number that is numerically
closest to the argument.
For exact arguments, the result is the same as the argument. For inexact
non-integral real arguments, the implementation may return a rational
approximation, or may report an implementation violation. For inexact
complex arguments, the result is a complex number whose real and
imaginary parts are the result of applying &lsquo;<samp>exact</samp>&rsquo; to the
real and imaginary parts of the argument, respectively.
If an <span class="roman">inexact</span> argument has no reasonably close <span class="roman">exact</span> equivalent,
(in the sense of &lsquo;<samp>=</samp>&rsquo;),
then a violation of an implementation restriction may be reported.
</p>
<p>These procedures implement the natural one-to-one correspondence between
<span class="roman">exact</span> and <span class="roman">inexact</span> integers throughout an
implementation-dependent range.  See section <a href="#Implementation-restrictions">Implementation restrictions</a>.
</p>

<blockquote>
<p><em>Note:</em>
These procedures were known in R<sup>5</sup>RS as &lsquo;<samp>exact-&gt;inexact</samp>&rsquo; and
&lsquo;<samp>inexact-&gt;exact</samp>&rsquo;, respectively, but they have always accepted
arguments of any exactness.  The new names are clearer and shorter,
as well as being compatible with R<sup>6</sup>RS.
</p></blockquote>


</dd></dl>

<br>
<br>
<br>

<hr>
</div>
<div class="subsection" id="Numerical-input-and-output">
<div class="header">
<p>
Previous: <a href="#Numerical-operations" accesskey="p" rel="prev">Numerical operations</a>, Up: <a href="#Numbers" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Numerical-input-and-output-1"></span><h4 class="subsection">6.2.7 Numerical input and output</h4>

<span id="index-numerical-input-and-output"></span>


<dl class="def">
<dt id="index-number_002d_003estring"><span class="category">procedure: </span><span><strong>number-&gt;string</strong> <em>z</em><a href='#index-number_002d_003estring' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-number_002d_003estring-1"><span class="category">procedure: </span><span><strong>number-&gt;string</strong> <em>z radix</em><a href='#index-number_002d_003estring-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>radix</var> is not one of 2, 8, 10, or 16.
The procedure &lsquo;<samp>number-&gt;string</samp>&rsquo; takes a
number and a radix and returns as a string an external representation of
the given number in the given radix such that
</p>
<div class="format">
<pre class="format"><tt>(let ((number <var>number</var>)
      (radix <var>radix</var>))
  (eqv? number
        (string-&gt;number (number-&gt;string number
                                        radix)
                        radix)))
</tt>
</pre></div>

<p>is true.  It is an error if no possible result makes this expression true.
If omitted, <var>radix</var> defaults to 10.
</p>
<p>If <var>z</var> is inexact, the radix is 10, and the above expression
can be satisfied by a result that contains a decimal point,
then the result contains a decimal point and is expressed using the
minimum number of digits (exclusive of exponent and trailing
zeroes) needed to make the above expression
true [howtoprint], [howtoread];
otherwise the format of the result is unspecified.
</p>
<p>The result returned by &lsquo;<samp>number-&gt;string</samp>&rsquo;
never contains an explicit radix prefix.
</p>

<blockquote>
<p><em>Note:</em>
The error case can occur only when <var>z</var> is not a complex number
or is a complex number with a non-rational real or imaginary part.
</p></blockquote>



<blockquote>
<p><em>Rationale:</em>
If <var>z</var> is an inexact number and
the radix is 10, then the above expression is normally satisfied by
a result containing a decimal point.  The unspecified case
allows for infinities, NaNs, and unusual representations.
</p></blockquote>


</dd></dl>



<dl class="def">
<dt id="index-string_002d_003enumber"><span class="category">procedure: </span><span><strong>string-&gt;number</strong> <em>string</em><a href='#index-string_002d_003enumber' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003enumber-1"><span class="category">procedure: </span><span><strong>string-&gt;number</strong> <em>string radix</em><a href='#index-string_002d_003enumber-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>Returns a number of the maximally precise representation expressed by the
given <var>string</var>.
It is an error if <var>radix</var> is not 2, 8, 10, or 16.
If supplied, <var>radix</var> is a default radix that will be overridden
if an explicit radix prefix is present in <var>string</var> (e.g. <tt>&quot;#o177&quot;</tt>).  If <var>radix</var>
is not supplied, then the default radix is 10.  If <var>string</var> is not
a syntactically valid notation for a number, or would result in a
number that the implementation cannot represent, then &lsquo;<samp>string-&gt;number</samp>&rsquo;
returns <tt>#f</tt>.
An error is never signaled due to the content of <var>string</var>.
</p>

<div class="format">
<pre class="format"><tt>(string-&gt;number &quot;100&quot;)                 ==&gt;  100
(string-&gt;number &quot;100&quot; 16)              ==&gt;  256
(string-&gt;number &quot;1e2&quot;)                 ==&gt;  100.0
</tt>
</pre></div>



<blockquote>
<p><em>Note:</em>
The domain of &lsquo;<samp>string-&gt;number</samp>&rsquo; may be restricted by implementations
in the following ways.  
If all numbers supported by an implementation are real, then
&lsquo;<samp>string-&gt;number</samp>&rsquo; is permitted to return <tt>#f</tt> whenever
<var>string</var> uses the polar or rectangular notations for complex
numbers.  If all numbers are integers, then
&lsquo;<samp>string-&gt;number</samp>&rsquo; may return <tt>#f</tt> whenever
the fractional notation is used.  If all numbers are exact, then
&lsquo;<samp>string-&gt;number</samp>&rsquo; may return <tt>#f</tt> whenever
an exponent marker or explicit exactness prefix is used.
If all inexact
numbers are integers, then
&lsquo;<samp>string-&gt;number</samp>&rsquo; may return <tt>#f</tt> whenever
a decimal point is used.
</p>
<p>The rules used by a particular implementation for &lsquo;<samp>string-&gt;number</samp>&rsquo; must
also be applied to &lsquo;<samp>read</samp>&rsquo; and to the routine that reads programs, in
order to maintain consistency between internal numeric processing, I/O,
and the processing of programs.
As a consequence, the R<sup>5</sup>RS permission to return <tt>#f</tt> when
<var>string</var> has an explicit radix prefix has been withdrawn.
</p></blockquote>


</dd></dl>

<hr>
</div>
</div>
<div class="section" id="Booleans">
<div class="header">
<p>
Next: <a href="#Pairs-and-lists" accesskey="n" rel="next">Pairs and lists</a>, Previous: <a href="#Numbers" accesskey="p" rel="prev">Numbers</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Booleans-1"></span><h3 class="section">6.3 Booleans</h3>

<span id="index-booleans"></span>


<p>The standard boolean objects for true and false are written as
<tt>#t</tt> and <tt>#f</tt>.  
<span id="index-_0023f"></span>
<span id="index-_0023t"></span>
Alternatively, they can be written <tt>#true</tt> and <tt>#false</tt>,
respectively.  What really
matters, though, are the objects that the Scheme conditional expressions
(&lsquo;<samp>if</samp>&rsquo;, &lsquo;<samp>cond</samp>&rsquo;, &lsquo;<samp>and</samp>&rsquo;, &lsquo;<samp>or</samp>&rsquo;, &lsquo;<samp>when</samp>&rsquo;, &lsquo;<samp>unless</samp>&rsquo;, &lsquo;<samp>do</samp>&rsquo;) treat as
true or false.  The phrase &ldquo;a true value&rdquo;
<span id="index-false-1"></span>
<span id="index-true-3"></span>
(or sometimes just &ldquo;true&rdquo;) means any object treated as true by the
conditional expressions, and the phrase &ldquo;a false value&rdquo; (or
&ldquo;false&rdquo;) means any object treated as false by the conditional expressions.
</p>
<p>Of all the Scheme values, only <tt>#f</tt>
counts as false in conditional expressions.
All other Scheme values, including <tt>#t</tt>,
count as true.
</p>

<blockquote>
<p><em>Note:</em>
Unlike some other dialects of Lisp,
Scheme distinguishes <tt>#f</tt> and the empty list 
<span id="index-empty-list-1"></span>
from each other and from the symbol <code>nil</code>.
<span id="index-nil"></span>
</p></blockquote>


<p>Boolean constants evaluate to themselves, so they do not need to be quoted
in programs.
</p>

<div class="example">
<pre class="example">

#t                                     ==&gt;  #t
#f                                     ==&gt;  #f
'#f                                    ==&gt;  #f

</pre></div>




<dl class="def">
<dt id="index-not"><span class="category">procedure: </span><span><strong>not</strong> <em>obj</em><a href='#index-not' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>not</samp>&rsquo; procedure returns <tt>#t</tt> if <var>obj</var> is false, and returns
<tt>#f</tt> otherwise.
</p>

<div class="format">
<pre class="format"><tt>(not #t)                               ==&gt;  #f
(not 3)                                ==&gt;  #f
(not (list 3))                         ==&gt;  #f
(not #f)                               ==&gt;  #t
(not '())                              ==&gt;  #f
(not (list))                           ==&gt;  #f
(not 'nil)                             ==&gt;  #f
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-boolean_003f"><span class="category">procedure: </span><span><strong>boolean?</strong> <em>obj</em><a href='#index-boolean_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>boolean?</samp>&rsquo; predicate returns <tt>#t</tt> if <var>obj</var> is either <tt>#t</tt> or
<tt>#f</tt> and returns <tt>#f</tt> otherwise.
</p>

<div class="format">
<pre class="format"><tt>(boolean? #f)                          ==&gt;  #t
(boolean? 0)                           ==&gt;  #f
(boolean? '())                         ==&gt;  #f
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-boolean_003d_003f"><span class="category">procedure: </span><span><strong>boolean=?</strong> <em>boolean1 boolean2 boolean3 &hellip;</em><a href='#index-boolean_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if all the arguments 
are <tt>#t</tt> or all are <tt>#f</tt>.
</p>
</dd></dl>
 
<hr>
</div>
<div class="section" id="Pairs-and-lists">
<div class="header">
<p>
Next: <a href="#Symbols" accesskey="n" rel="next">Symbols</a>, Previous: <a href="#Booleans" accesskey="p" rel="prev">Booleans</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Pairs-and-lists-1"></span><h3 class="section">6.4 Pairs and lists</h3>

<span id="index-pairs-and-lists"></span>


<p>A <em>pair</em> (sometimes called a <em>dotted pair</em>) is a
<span id="index-dotted-pair"></span>
<span id="index-pair"></span>
record structure with two fields called the car and cdr fields (for
historical reasons).  Pairs are created by the procedure &lsquo;<samp>cons</samp>&rsquo;.
The car and cdr fields are accessed by the procedures &lsquo;<samp>car</samp>&rsquo; and
&lsquo;<samp>cdr</samp>&rsquo;.  The car and cdr fields are assigned by the procedures
&lsquo;<samp>set-car!</samp>&rsquo; and &lsquo;<samp>set-cdr!</samp>&rsquo;.
</p>
<p>Pairs are used primarily to represent lists.  A <em>list</em> can
<span id="index-list"></span>
be defined recursively as either the empty list or a pair whose
<span id="index-empty-list-2"></span>
cdr is a list.  More precisely, the set of lists is defined as the smallest
set <var>X</var> such that
</p>


<ul>
<li> The empty list is in <var>X</var>.
</li><li> If <var>list</var> is in <var>X</var>, then any pair whose cdr field contains
<var>list</var> is also in <var>X</var>.

</li></ul>


<p>The objects in the car fields of successive pairs of a list are the
elements of the list.  For example, a two-element list is a pair whose car
is the first element and whose cdr is a pair whose car is the second element
and whose cdr is the empty list.  The length of a list is the number of
elements, which is the same as the number of pairs.
</p>
<p>The empty list is a special object of its own type.
It is not a pair, it has no elements, and its length is zero.
</p>

<blockquote>
<p><em>Note:</em>
The above definitions imply that all lists have finite length and are
terminated by the empty list.
</p></blockquote>


<p>The most general notation (external representation) for Scheme pairs is
the &ldquo;dotted&rdquo; notation &lsquo;<samp>(<var>c1</var>&nbsp;.&nbsp;<var>c2</var>)</samp>&rsquo;<!-- /@w --> where
<var>c1</var> is the value of the car field and <var>c2</var> is the value of the
cdr field.  For example &lsquo;<samp>(4 . 5)</samp>&rsquo; is a pair whose car is 4 and whose
cdr is 5.  Note that &lsquo;<samp>(4 . 5)</samp>&rsquo; is the external representation of a
pair, not an expression that evaluates to a pair.
</p>
<p>A more streamlined notation can be used for lists: the elements of the
list are simply enclosed in parentheses and separated by spaces.  The
empty list is written <tt>()</tt>.  For example,
</p>

<div class="example">
<pre class="example">

(a b c d e)

</pre></div>


<p>and
</p>

<div class="example">
<pre class="example">

(a . (b . (c . (d . (e . ())))))

</pre></div>


<p>are equivalent notations for a list of symbols.
</p>
<p>A chain of pairs not ending in the empty list is called an
<em>improper list</em>.  Note that an improper list is not a list.
<span id="index-improper-list"></span>
The list and dotted notations can be combined to represent
improper lists:
</p>

<div class="example">
<pre class="example">

(a b c . d)

</pre></div>


<p>is equivalent to
</p>

<div class="example">
<pre class="example">

(a . (b . (c . d)))

</pre></div>


<p>Whether a given pair is a list depends upon what is stored in the cdr
field.  When the <code>set-cdr!</code> procedure is used, an object can be a
<span id="index-set_002dcdr_0021-1"></span>
list one moment and not the next:
</p>

<div class="example">
<pre class="example">

(define x (list 'a 'b 'c))
(define y x)
y                                      ==&gt;  (a b c)
(list? y)                              ==&gt;  #t
(set-cdr! x 4)                         ==&gt;  <em>unspecified</em>
x                                      ==&gt;  (a . 4)
(eqv? x y)                             ==&gt;  #t
y                                      ==&gt;  (a . 4)
(list? y)                              ==&gt;  #f
(set-cdr! x x)                         ==&gt;  <em>unspecified</em>
(list? x)                              ==&gt;  #f

</pre></div>


<p>Within literal expressions and representations of objects read by the
<code>read</code> procedure, the forms <tt>'</tt><span class="roman">&lt;datum&gt;</span>,
<span id="index-_0027-1"></span>
<span id="index-read-2"></span>
<tt>`</tt><span class="roman">&lt;datum&gt;</span>, <tt>,</tt><span class="roman">&lt;datum&gt;</span>, and
<span id="index-_002c-2"></span>
<tt>,@</tt><span class="roman">&lt;datum&gt;</span> denote two-element lists whose first elements are
the symbols <code>quote</code>, <code>quasiquote</code>, <code>unquote</code><!-- /@w -->, and
<span id="index-unquote-1"></span>
<span id="index-quasiquote-1"></span>
<span id="index-quote-1"></span>
<code>unquote-splicing</code>, respectively.  The second element in each case
<span id="index-unquote_002dsplicing-1"></span>
is <span class="roman">&lt;datum&gt;</span>.  This convention is supported so that arbitrary Scheme
programs can be represented as lists.  
That is, according to Scheme&rsquo;s grammar, every
&lt;expression&gt; is also a &lt;datum&gt; (see section see <a href="#External-representation">External representations</a>).
Among other things, this permits the use of the &lsquo;<samp>read</samp>&rsquo; procedure to
parse Scheme programs.  See section <a href="#External-representations">External representations</a>. 
</p> 


<dl class="def">
<dt id="index-pair_003f"><span class="category">procedure: </span><span><strong>pair?</strong> <em>obj</em><a href='#index-pair_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>pair?</samp>&rsquo; predicate returns <tt>#t</tt> if <var>obj</var> is a pair, and otherwise
returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(pair? '(a . b))                       ==&gt;  #t
(pair? '(a b c))                       ==&gt;  #t
(pair? '())                            ==&gt;  #f
(pair? '#(a b))                        ==&gt;  #f
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-cons"><span class="category">procedure: </span><span><strong>cons</strong> <em>obj1 obj2</em><a href='#index-cons' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated pair whose car is <var>obj1</var> and whose cdr is
<var>obj2</var>.  The pair is guaranteed to be different (in the sense of
&lsquo;<samp>eqv?</samp>&rsquo;) from every existing object.
</p>

<div class="format">
<pre class="format"><tt>(cons 'a '())                          ==&gt;  (a)
(cons '(a) '(b c d))                   ==&gt;  ((a) b c d)
(cons &quot;a&quot; '(b c))                      ==&gt;  (&quot;a&quot; b c)
(cons 'a 3)                            ==&gt;  (a . 3)
(cons '(a b) 'c)                       ==&gt;  ((a b) . c)
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-car"><span class="category">procedure: </span><span><strong>car</strong> <em>pair</em><a href='#index-car' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the contents of the car field of <var>pair</var>.  Note that it is an
error to take the car of the empty list.
</p>

<div class="format">
<pre class="format"><tt>(car '(a b c))                         ==&gt;  a
(car '((a) b c d))                     ==&gt;  (a)
(car '(1 . 2))                         ==&gt;  1
(car '())                              ==&gt;  <em>error</em>
</tt>
</pre></div>

 
</dd></dl>



<dl class="def">
<dt id="index-cdr"><span class="category">procedure: </span><span><strong>cdr</strong> <em>pair</em><a href='#index-cdr' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the contents of the cdr field of <var>pair</var>.
Note that it is an error to take the cdr of the empty list.
</p>

<div class="format">
<pre class="format"><tt>(cdr '((a) b c d))                     ==&gt;  (b c d)
(cdr '(1 . 2))                         ==&gt;  2
(cdr '())                              ==&gt;  <em>error</em>
</tt>
</pre></div>

 
</dd></dl>



<dl class="def">
<dt id="index-set_002dcar_0021"><span class="category">procedure: </span><span><strong>set-car!</strong> <em>pair obj</em><a href='#index-set_002dcar_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Stores <var>obj</var> in the car field of <var>pair</var>.
</p>
<div class="format">
<pre class="format"><tt>(define (f) (list 'not-a-constant-list))
(define (g) '(constant-list))
(set-car! (f) 3)                       ==&gt;  <em>unspecified</em>
(set-car! (g) 3)                       ==&gt;  <em>error</em>
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-set_002dcdr_0021"><span class="category">procedure: </span><span><strong>set-cdr!</strong> <em>pair obj</em><a href='#index-set_002dcdr_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Stores <var>obj</var> in the cdr field of <var>pair</var>.
</p></dd></dl>






<dl class="def">
<dt id="index-caar"><span class="category">procedure: </span><span><strong>caar</strong> <em>pair</em><a href='#index-caar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-cadr"><span class="category">procedure: </span><span><strong>cadr</strong> <em>pair</em><a href='#index-cadr' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-cdar"><span class="category">procedure: </span><span><strong>cdar</strong> <em>pair</em><a href='#index-cdar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-cddr"><span class="category">procedure: </span><span><strong>cddr</strong> <em>pair</em><a href='#index-cddr' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures are compositions of &lsquo;<samp>car</samp>&rsquo; and &lsquo;<samp>cdr</samp>&rsquo; as follows:
</p>

<div class="format">
<pre class="format"><tt>(define (caar x) (car (car x)))
(define (cadr x) (car (cdr x)))
(define (cdar x) (cdr (car x)))
(define (cddr x) (cdr (cdr x)))
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-caaar"><span class="category">cxr library procedure: </span><span><strong>caaar</strong> <em>pair</em><a href='#index-caaar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-caadr"><span class="category">cxr library procedure: </span><span><strong>caadr</strong> <em>pair</em><a href='#index-caadr' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index--_2026"><span class="category">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&hellip;<!-- /@w -->: </span><span><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&hellip;<!-- /@w --></strong><a href='#index--_2026' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<span id="index-caddr"></span>
<span id="index-cadar"></span>

<span id="index-cdddr"></span>
<span id="index-cddar"></span>
<span id="index-cdadr"></span>
<span id="index-cdaar"></span>

<span id="index-caaddr"></span>
<span id="index-caadar"></span>
<span id="index-caaadr"></span>
<span id="index-caaaar"></span>

<span id="index-cadddr"></span>
<span id="index-caddar"></span>
<span id="index-cadadr"></span>
<span id="index-cadaar"></span>

<span id="index-cdaddr"></span>
<span id="index-cdadar"></span>
<span id="index-cdaadr"></span>
<span id="index-cdaaar"></span>

<span id="index-cddadr"></span>
<span id="index-cddaar"></span>
</dd><dt id="index-cdddar"><span class="category">cxr library procedure: </span><span><strong>cdddar</strong> <em>pair</em><a href='#index-cdddar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-cddddr"><span class="category">cxr library procedure: </span><span><strong>cddddr</strong> <em>pair</em><a href='#index-cddddr' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These twenty-four procedures are further compositions of &lsquo;<samp>car</samp>&rsquo; and &lsquo;<samp>cdr</samp>&rsquo;
on the same principles.
For example, &lsquo;<samp>caddr</samp>&rsquo; could be defined by
</p>

<div class="format">
<pre class="format"><tt>(define caddr (lambda (x) (car (cdr (cdr x)))))<span class="roman">.</span>
</tt>
</pre></div>


<p>Arbitrary compositions up to four deep are provided.  
</p>
</dd></dl>



<dl class="def">
<dt id="index-null_003f"><span class="category">procedure: </span><span><strong>null?</strong> <em>obj</em><a href='#index-null_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is the empty list,
otherwise returns <tt>#f</tt>.
</p>
</dd></dl>


<dl class="def">
<dt id="index-list_003f"><span class="category">procedure: </span><span><strong>list?</strong> <em>obj</em><a href='#index-list_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is a list.  Otherwise, it returns <tt>#f</tt>.
By definition, all lists have finite length and are terminated by
the empty list.
</p>

<div class="format">
<pre class="format"><tt>        (list? '(a b c))               ==&gt;  #t
        (list? '())                    ==&gt;  #t
        (list? '(a . b))               ==&gt;  #f
        (let ((x (list 'a)))
          (set-cdr! x x)
          (list? x))                   ==&gt;  #f
</tt>
</pre></div>



</dd></dl>


<dl class="def">
<dt id="index-make_002dlist"><span class="category">procedure: </span><span><strong>make-list</strong> <em>k</em><a href='#index-make_002dlist' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-make_002dlist-1"><span class="category">procedure: </span><span><strong>make-list</strong> <em>k fill</em><a href='#index-make_002dlist-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated list of <var>k</var> elements.  If a second
argument is given, then each element is initialized to <var>fill</var>.
Otherwise the initial contents of each element is unspecified.
</p>

<div class="format">
<pre class="format"><tt>(make-list 2 3)                        ==&gt;   (3 3)
</tt>
</pre></div>


</dd></dl>




<dl class="def">
<dt id="index-list-1"><span class="category">procedure: </span><span><strong>list</strong> <em><var>obj</var> &hellip;</em><a href='#index-list-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated list of its arguments.
</p>

<div class="format">
<pre class="format"><tt>(list 'a (+ 3 4) 'c)                   ==&gt;  (a 7 c)
(list)                                 ==&gt;  ()
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-length"><span class="category">procedure: </span><span><strong>length</strong> <em>list</em><a href='#index-length' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the length of <var>list</var>.
</p>

<div class="format">
<pre class="format"><tt>(length '(a b c))                      ==&gt;  3
(length '(a (b) (c d e)))              ==&gt;  3
(length '())                           ==&gt;  0
</tt>
</pre></div>



</dd></dl>



<dl class="def">
<dt id="index-append"><span class="category">procedure: </span><span><strong>append</strong> <em>list &hellip;</em><a href='#index-append' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The last argument, if there is one, can be of any type.
Returns a list consisting of the elements of the first <var>list</var>
followed by the elements of the other <var>list</var>s.
If there are no arguments, the empty list is returned.
If there is exactly one argument, it is returned.
Otherwise the resulting list is always newly allocated, except that it shares
structure with the last argument.  
An improper list results if the last argument is not a
proper list.  
</p>

<div class="format">
<pre class="format"><tt>(append '(x) '(y))                     ==&gt;  (x y)
(append '(a) '(b c d))                 ==&gt;  (a b c d)
(append '(a (b)) '((c)))               ==&gt;  (a (b) (c))
</tt>
</pre></div>




<div class="format">
<pre class="format"><tt>(append '(a b) '(c . d))               ==&gt;  (a b c . d)
(append '() 'a)                        ==&gt;  a
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-reverse"><span class="category">procedure: </span><span><strong>reverse</strong> <em>list</em><a href='#index-reverse' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated list consisting of the elements of <var>list</var>
in reverse order.
</p>

<div class="format">
<pre class="format"><tt>(reverse '(a b c))                     ==&gt;  (c b a)
(reverse '(a (b c) d (e (f))))  
          ==&gt;  ((e (f)) d (b c) a)
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-list_002dtail"><span class="category">procedure: </span><span><strong>list-tail</strong> <em>list <var>k</var></em><a href='#index-list_002dtail' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>list</var> has fewer than <var>k</var> elements.
Returns the sublist of <var>list</var> obtained by omitting the first <var>k</var>
elements.
The &lsquo;<samp>list-tail</samp>&rsquo; procedure could be defined by
</p>

<div class="format">
<pre class="format"><tt>(define list-tail
  (lambda (x k)
    (if (zero? k)
        x
        (list-tail (cdr x) (- k 1)))))
</tt>
</pre></div>
 
</dd></dl>



<dl class="def">
<dt id="index-list_002dref"><span class="category">procedure: </span><span><strong>list-ref</strong> <em>list <var>k</var></em><a href='#index-list_002dref' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The <var>list</var> argument can be circular, but
it is an error if <var>list</var> has <var>k</var> or fewer elements.
Returns the <var>k</var>th element of <var>list</var>.  (This is the same
as the car of <tt>(list-tail <var>list</var> <var>k</var>)</tt>.)
</p>

<div class="format">
<pre class="format"><tt>(list-ref '(a b c d) 2)                 ==&gt;  c
(list-ref '(a b c d)
          (exact (round 1.8))) 
          ==&gt;  c
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-list_002dset_0021"><span class="category">procedure: </span><span><strong>list-set!</strong> <em>list k obj</em><a href='#index-list_002dset_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>list</var>.
The &lsquo;<samp>list-set!</samp>&rsquo; procedure stores <var>obj</var> in element <var>k</var> of <var>list</var>.
</p>
<div class="format">
<pre class="format"><tt>(let ((ls (list 'one 'two 'five!)))
  (list-set! ls 2 'three)
  ls)      
          ==&gt;  (one two three)

(list-set! '(0 1 2) 1 &quot;oops&quot;)  
          ==&gt;  <em>error</em>  ; constant list
</tt>
</pre></div>

</dd></dl>





<dl class="def">
<dt id="index-memq"><span class="category">procedure: </span><span><strong>memq</strong> <em>obj list</em><a href='#index-memq' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-memv"><span class="category">procedure: </span><span><strong>memv</strong> <em>obj list</em><a href='#index-memv' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-member"><span class="category">procedure: </span><span><strong>member</strong> <em>obj list</em><a href='#index-member' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-member-1"><span class="category">procedure: </span><span><strong>member</strong> <em>obj list compare</em><a href='#index-member-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return the first sublist of <var>list</var> whose car is
<var>obj</var>, where the sublists of <var>list</var> are the non-empty lists
returned by <tt>(list-tail <var>list</var> <var>k</var>)</tt> for <var>k</var> less
than the length of <var>list</var>.  If
<var>obj</var> does not occur in <var>list</var>, then <tt>#f</tt> (not the empty list) is
returned.  The &lsquo;<samp>memq</samp>&rsquo; procedure uses &lsquo;<samp>eq?</samp>&rsquo; to compare <var>obj</var> with the elements of
<var>list</var>, while &lsquo;<samp>memv</samp>&rsquo; uses &lsquo;<samp>eqv?</samp>&rsquo; and 
&lsquo;<samp>member</samp>&rsquo; uses <var>compare</var>, if given, and &lsquo;<samp>equal?</samp>&rsquo; otherwise.
</p>

<div class="format">
<pre class="format"><tt>(memq 'a '(a b c))                     ==&gt;  (a b c)
(memq 'b '(a b c))                     ==&gt;  (b c)
(memq 'a '(b c d))                     ==&gt;  #f
(memq (list 'a) '(b (a) c))            ==&gt;  #f
(member (list 'a)
        '(b (a) c))                    ==&gt;  ((a) c)
(member &quot;B&quot;
        '(&quot;a&quot; &quot;b&quot; &quot;c&quot;)
        string-ci=?)                   ==&gt;  (&quot;b&quot; &quot;c&quot;)
(memq 101 '(100 101 102))              ==&gt;  <em>unspecified</em>
(memv 101 '(100 101 102))              ==&gt;  (101 102)
</tt>
</pre></div>
 
 
</dd></dl>



<dl class="def">
<dt id="index-assq"><span class="category">procedure: </span><span><strong>assq</strong> <em>obj alist</em><a href='#index-assq' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-assv"><span class="category">procedure: </span><span><strong>assv</strong> <em>obj alist</em><a href='#index-assv' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-assoc"><span class="category">procedure: </span><span><strong>assoc</strong> <em>obj alist</em><a href='#index-assoc' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-assoc-1"><span class="category">procedure: </span><span><strong>assoc</strong> <em>obj alist compare</em><a href='#index-assoc-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>alist</var> (for &ldquo;association list&rdquo;) is not a list of
pairs.
These procedures find the first pair in <var>alist</var> whose car field is <var>obj</var>,
and returns that pair.  If no pair in <var>alist</var> has <var>obj</var> as its
car, then <tt>#f</tt> (not the empty list) is returned.  The &lsquo;<samp>assq</samp>&rsquo; procedure uses
&lsquo;<samp>eq?</samp>&rsquo; to compare <var>obj</var> with the car fields of the pairs in <var>alist</var>,
while &lsquo;<samp>assv</samp>&rsquo; uses &lsquo;<samp>eqv?</samp>&rsquo; and &lsquo;<samp>assoc</samp>&rsquo; uses <var>compare</var> if given
and &lsquo;<samp>equal?</samp>&rsquo; otherwise.
</p>

<div class="format">
<pre class="format"><tt>(define e '((a 1) (b 2) (c 3)))
(assq 'a e)                            ==&gt;  (a 1)
(assq 'b e)                            ==&gt;  (b 2)
(assq 'd e)                            ==&gt;  #f
(assq (list 'a) '(((a)) ((b)) ((c))))
                                       ==&gt;  #f
(assoc (list 'a) '(((a)) ((b)) ((c))))   
                                       ==&gt;  ((a))
(assoc 2.0 '((1 1) (2 4) (3 9)) =)
                                       ==&gt; (2 4)
(assq 5 '((2 3) (5 7) (11 13)))    
                                       ==&gt;  <em>unspecified</em>
(assv 5 '((2 3) (5 7) (11 13)))    
                                       ==&gt;  (5 7)
</tt>
</pre></div>




<blockquote>
<p><em>Rationale:</em>
Although they are often used as predicates,
&lsquo;<samp>memq</samp>&rsquo;, &lsquo;<samp>memv</samp>&rsquo;, &lsquo;<samp>member</samp>&rsquo;, &lsquo;<samp>assq</samp>&rsquo;, &lsquo;<samp>assv</samp>&rsquo;, and &lsquo;<samp>assoc</samp>&rsquo; do not
have question marks in their names because they return 
potentially useful values rather than just <tt>#t</tt> or <tt>#f</tt>.
</p></blockquote>

</dd></dl>


<dl class="def">
<dt id="index-list_002dcopy"><span class="category">procedure: </span><span><strong>list-copy</strong> <em>obj</em><a href='#index-list_002dcopy' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated copy of the given <var>obj</var> if it is a list.
Only the pairs themselves are copied; the cars of the result are
the same (in the sense of &lsquo;<samp>eqv?</samp>&rsquo;) as the cars of <var>list</var>.
If <var>obj</var> is an improper list, so is the result, and the final
cdrs are the same in the sense of &lsquo;<samp>eqv?</samp>&rsquo;.
An <var>obj</var> which is not a list is returned unchanged.
It is an error if <var>obj</var> is a circular list.
</p>

<div class="format">
<pre class="format"><tt>(define a '(1 8 2 8)) ; a may be immutable
(define b (list-copy a))
(set-car! b 3)        ; b is mutable
b                                      ==&gt; (3 8 2 8)
a                                      ==&gt; (1 8 2 8)
</tt>
</pre></div>


</dd></dl>


<hr>
</div>
<div class="section" id="Symbols">
<div class="header">
<p>
Next: <a href="#Characters" accesskey="n" rel="next">Characters</a>, Previous: <a href="#Pairs-and-lists" accesskey="p" rel="prev">Pairs and lists</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Symbols-1"></span><h3 class="section">6.5 Symbols</h3>

<span id="index-symbols"></span>


<p>Symbols are objects whose usefulness rests on the fact that two
symbols are identical (in the sense of &lsquo;<samp>eqv?</samp>&rsquo;) if and only if their
names are spelled the same way.  For instance, they can be used
the way enumerated values are used in other languages.
</p>
<p>The rules for writing a symbol are exactly the same as the rules for
writing an identifier; see sections <a href="#Identifiers">Identifiers</a>
and <a href="#Lexical-structure">Lexical structure</a>.
</p>
<p>It is guaranteed that any symbol that has been returned as part of
a literal expression, or read using the &lsquo;<samp>read</samp>&rsquo; procedure, and
subsequently written out using the &lsquo;<samp>write</samp>&rsquo; procedure, will read back
in as the identical symbol (in the sense of &lsquo;<samp>eqv?</samp>&rsquo;).
</p>

<blockquote>
<p><em>Note:</em>
Some implementations have values known as &ldquo;uninterned symbols,&rdquo;
which defeat write/read invariance, and also violate the rule that two
symbols are the same if and only if their names are spelled the same.
This report does not specify the behavior of
implementation-dependent extensions.
</p></blockquote>




<dl class="def">
<dt id="index-symbol_003f"><span class="category">procedure: </span><span><strong>symbol?</strong> <em>obj</em><a href='#index-symbol_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is a symbol, otherwise returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(symbol? 'foo)                         ==&gt;  #t
(symbol? (car '(a b)))                 ==&gt;  #t
(symbol? &quot;bar&quot;)                        ==&gt;  #f
(symbol? 'nil)                         ==&gt;  #t
(symbol? '())                          ==&gt;  #f
(symbol? #f)                           ==&gt;  #f
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-symbol_003d_003f"><span class="category">procedure: </span><span><strong>symbol=?</strong> <em>symbol1 symbol2 symbol3 &hellip;</em><a href='#index-symbol_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if all the arguments all have the same
names in the sense of &lsquo;<samp>string=?</samp>&rsquo;.
</p>

<blockquote>
<p><em>Note:</em>
The definition above assumes that none of the arguments
are uninterned symbols.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-symbol_002d_003estring"><span class="category">procedure: </span><span><strong>symbol-&gt;string</strong> <em>symbol</em><a href='#index-symbol_002d_003estring' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the name of <var>symbol</var> as a string, but without adding escapes.
It is an error
to apply mutation procedures like <code>string-set!</code> to strings returned
<span id="index-string_002dset_0021-1"></span>
by this procedure.
</p>

<div class="format">
<pre class="format"><tt>(symbol-&gt;string 'flying-fish)     
                                       ==&gt;  &quot;flying-fish&quot;
(symbol-&gt;string 'Martin)               ==&gt;  &quot;Martin&quot;
(symbol-&gt;string
   (string-&gt;symbol &quot;Malvina&quot;))     
                                       ==&gt;  &quot;Malvina&quot;
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-string_002d_003esymbol"><span class="category">procedure: </span><span><strong>string-&gt;symbol</strong> <em>string</em><a href='#index-string_002d_003esymbol' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the symbol whose name is <var>string</var>.  This procedure can
create symbols with names containing special characters that would
require escaping when written, but does not interpret escapes in its input.
</p>

<div class="format">
<pre class="format"><tt>(string-&gt;symbol &quot;mISSISSIppi&quot;)  
          ==&gt;
  mISSISSIppi
(eqv? 'bitBlt (string-&gt;symbol &quot;bitBlt&quot;))     
          ==&gt;  #t
(eqv? 'LollyPop
     (string-&gt;symbol
       (symbol-&gt;string 'LollyPop)))  
          ==&gt;  #t
(string=? &quot;K. Harper, M.D.&quot;
          (symbol-&gt;string
            (string-&gt;symbol &quot;K. Harper, M.D.&quot;)))  
          ==&gt;  #t
</tt>
</pre></div>


</dd></dl>


<hr>
</div>
<div class="section" id="Characters">
<div class="header">
<p>
Next: <a href="#Strings" accesskey="n" rel="next">Strings</a>, Previous: <a href="#Symbols" accesskey="p" rel="prev">Symbols</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Characters-1"></span><h3 class="section">6.6 Characters</h3>

<span id="index-characters"></span>


<p>Characters are objects that represent printed characters such as
letters and digits.  
All Scheme implementations must support at least the ASCII character
repertoire: that is, Unicode characters U+0000 through U+007F.
Implementations may support any other Unicode characters they see fit,
and may also support non-Unicode characters as well.
Except as otherwise specified, the result of applying any of the
following procedures to a non-Unicode character is implementation-dependent.
</p>
<p>Characters are written using the notation #\<span class="roman">&lt;character&gt;</span>
or #\<span class="roman">&lt;character name&gt;</span> or
#\x&lt;hex scalar value&gt;.
</p>
<p>The following character names must be supported
by all implementations with the given values.  
Implementations may add other names
provided they cannot be interpreted as hex scalar values preceded by &lsquo;<samp>x</samp>&rsquo;.
</p>


<blockquote>
<dl compact="compact">
<dt><span><tt>#\alarm</tt></span></dt>
<dd><p>; <span class="roman">U+0007</span>
</p></dd>
<dt><span><tt>#\backspace</tt></span></dt>
<dd><p>; <span class="roman">U+0008</span>
</p></dd>
<dt><span><tt>#\delete</tt></span></dt>
<dd><p>; <span class="roman">U+007F</span>
</p></dd>
<dt><span><tt>#\escape</tt></span></dt>
<dd><p>; <span class="roman">U+001B</span>
</p></dd>
<dt><span><tt>#\newline</tt></span></dt>
<dd><p>; the linefeed character, <span class="roman">U+000A</span>
</p></dd>
<dt><span><tt>#\null</tt></span></dt>
<dd><p>; the null character, <span class="roman">U+0000</span>
</p></dd>
<dt><span><tt>#\return</tt></span></dt>
<dd><p>; the return character, <span class="roman">U+000D</span>
</p></dd>
<dt><span><tt>#\space</tt></span></dt>
<dd><p>; the preferred way to write a space
</p></dd>
<dt><span><tt>#\tab</tt></span></dt>
<dd><p>; the tab character, <span class="roman">U+0009</span>
</p></dd>
</dl>
</blockquote>




<p>Here are some additional examples:
</p>


<blockquote>
<dl compact="compact">
<dt><span><tt>#\a</tt></span></dt>
<dd><p>; lower case letter
</p></dd>
<dt><span><tt>#\A</tt></span></dt>
<dd><p>; upper case letter
</p></dd>
<dt><span><tt>#\(</tt></span></dt>
<dd><p>; left parenthesis
</p></dd>
<dt><span><tt>#\ </tt></span></dt>
<dd><p>; the space character
</p></dd>
<dt><span><tt>#\x03BB</tt></span></dt>
<dd><p>; lambda (if character is supported)
</p></dd>
<dt><span><tt>#\iota</tt></span></dt>
<dd><p>; iota (if character and name are supported)
</p></dd>
</dl>
</blockquote>




<p>Case is significant in #\<span class="roman">&lt;character&gt;</span>, and in
#\<span class="roman">&lt;character name&gt;</span>,
but not in &lsquo;<samp>#\x</samp>&rsquo;&lt;hex scalar value&gt;.  
If <span class="roman">&lt;character&gt;</span> in
#\<span class="roman">&lt;character&gt;</span> is alphabetic, then any character
immediately following <span class="roman">&lt;character&gt;</span> cannot be one that can appear in an identifier.
This rule resolves the ambiguous case where, for
example, the sequence of characters &ldquo;<tt>#\ space</tt>&rdquo;
could be taken to be either a representation of the space character or a
representation of the character &ldquo;<tt>#\ s</tt>&rdquo; followed
by a representation of the symbol &ldquo;<tt>pace</tt>.&rdquo;
</p>

<p>Characters written in the #\ notation are self-evaluating.
That is, they do not have to be quoted in programs.  
</p>
<p>Some of the procedures that operate on characters ignore the
difference between upper case and lower case.  The procedures that
ignore case have &ldquo;<tt><span class="nolinebreak">-ci</span></tt>&rdquo;<!-- /@w --> (for &ldquo;case
insensitive&rdquo;) embedded in their names.
</p>


<dl class="def">
<dt id="index-char_003f"><span class="category">procedure: </span><span><strong>char?</strong> <em>obj</em><a href='#index-char_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is a character, otherwise returns <tt>#f</tt>.
</p>
</dd></dl>



<dl class="def">
<dt id="index-char_003d_003f"><span class="category">procedure: </span><span><strong>char=?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_003c_003f"><span class="category">procedure: </span><span><strong>char&lt;?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_003c_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_003e_003f"><span class="category">procedure: </span><span><strong>char&gt;?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_003e_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_003c_003d_003f"><span class="category">procedure: </span><span><strong>char&lt;=?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_003c_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_003e_003d_003f"><span class="category">procedure: </span><span><strong>char&gt;=?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_003e_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>


<p>These procedures return <tt>#t</tt> if 
the results of passing their arguments to &lsquo;<samp>char-&gt;integer</samp>&rsquo;
are respectively
equal, monotonically increasing, monotonically decreasing,
monotonically non-decreasing, or monotonically non-increasing.
</p>
<p>These predicates are required to be transitive.
</p>
</dd></dl>



<dl class="def">
<dt id="index-char_002dci_003d_003f"><span class="category">char library procedure: </span><span><strong>char-ci=?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_002dci_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dci_003c_003f"><span class="category">char library procedure: </span><span><strong>char-ci&lt;?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_002dci_003c_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dci_003e_003f"><span class="category">char library procedure: </span><span><strong>char-ci&gt;?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_002dci_003e_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dci_003c_003d_003f"><span class="category">char library procedure: </span><span><strong>char-ci&lt;=?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_002dci_003c_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dci_003e_003d_003f"><span class="category">char library procedure: </span><span><strong>char-ci&gt;=?</strong> <em>char1 char2 char3 &hellip;</em><a href='#index-char_002dci_003e_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures are similar to &lsquo;<samp>char=?</samp>&rsquo; et cetera, but they treat
upper case and lower case letters as the same.  For example, &lsquo;<samp>(char-ci=? #\A #\a)</samp>&rsquo; returns <tt>#t</tt>.
</p>
<p>Specifically, these procedures behave as if &lsquo;<samp>char-foldcase</samp>&rsquo; were
applied to their arguments before they were compared.
</p>
</dd></dl>



<dl class="def">
<dt id="index-char_002dalphabetic_003f"><span class="category">char library procedure: </span><span><strong>char-alphabetic?</strong> <em>char</em><a href='#index-char_002dalphabetic_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dnumeric_003f"><span class="category">char library procedure: </span><span><strong>char-numeric?</strong> <em>char</em><a href='#index-char_002dnumeric_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dwhitespace_003f"><span class="category">char library procedure: </span><span><strong>char-whitespace?</strong> <em>char</em><a href='#index-char_002dwhitespace_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dupper_002dcase_003f"><span class="category">char library procedure: </span><span><strong>char-upper-case?</strong> <em>letter</em><a href='#index-char_002dupper_002dcase_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dlower_002dcase_003f"><span class="category">char library procedure: </span><span><strong>char-lower-case?</strong> <em>letter</em><a href='#index-char_002dlower_002dcase_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return <tt>#t</tt> if their arguments are alphabetic,
numeric, whitespace, upper case, or lower case characters, respectively,
otherwise they return <tt>#f</tt>.  
</p>
<p>Specifically, they must return <tt>#t</tt> when applied to characters with
the Unicode properties Alphabetic, Numeric Type=Decimal,
White Space, Uppercase, and
Lowercase respectively, and <tt>#f</tt> when applied to any other Unicode
characters.  Note that many Unicode characters are alphabetic but neither
upper nor lower case.
</p>
</dd></dl>



<dl class="def">
<dt id="index-digit_002dvalue"><span class="category">char library procedure: </span><span><strong>digit-value</strong> <em>char</em><a href='#index-digit_002dvalue' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>This procedure returns the numeric value (0 to 9) of its argument
if it is a numeric digit (that is, if &lsquo;<samp>char-numeric?</samp>&rsquo; returns <tt>#t</tt>),
or <tt>#f</tt> on any other character.
</p>

<div class="format">
<pre class="format"><tt>(digit-value #\3)                      ==&gt; 3
(digit-value #\x0664)                  ==&gt; 4
(digit-value #\x0AE6)                  ==&gt; 0
(digit-value #\x0EA6)                  ==&gt; #f
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-char_002d_003einteger"><span class="category">procedure: </span><span><strong>char-&gt;integer</strong> <em>char</em><a href='#index-char_002d_003einteger' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-integer_002d_003echar"><span class="category">procedure: </span><span><strong>integer-&gt;char</strong> <em><var>n</var></em><a href='#index-integer_002d_003echar' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Given a Unicode character, 
&lsquo;<samp>char-&gt;integer</samp>&rsquo; returns an exact integer 
between 0 and <tt>#xD7FF</tt> or 
between <tt>#xE000</tt> and <tt>#x10FFFF</tt> 
which is equal to the Unicode scalar value of that character.
Given a non-Unicode character, 
it returns an exact integer greater than <tt>#x10FFFF</tt>.  
This is true independent of whether the implementation uses
the Unicode representation internally.
</p>
<p>Given an exact integer that is the value returned by
a character when &lsquo;<samp>char-&gt;integer</samp>&rsquo; is applied to it, &lsquo;<samp>integer-&gt;char</samp>&rsquo;
returns that character.
</p></dd></dl>



<dl class="def">
<dt id="index-char_002dupcase"><span class="category">char library procedure: </span><span><strong>char-upcase</strong> <em>char</em><a href='#index-char_002dupcase' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002ddowncase"><span class="category">char library procedure: </span><span><strong>char-downcase</strong> <em>char</em><a href='#index-char_002ddowncase' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dfoldcase"><span class="category">char library procedure: </span><span><strong>char-foldcase</strong> <em>char</em><a href='#index-char_002dfoldcase' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>The &lsquo;<samp>char-upcase</samp>&rsquo; procedure, given an argument that is the
lowercase part of a Unicode casing pair, returns the uppercase member
of the pair, provided that both characters are supported by the Scheme
implementation.  Note that language-sensitive casing pairs are not used.  If the
argument is not the lowercase member of such a pair, it is returned.
</p>
<p>The &lsquo;<samp>char-downcase</samp>&rsquo; procedure, given an argument that is the
uppercase part of a Unicode casing pair, returns the lowercase member
of the pair, provided that both characters are supported by the Scheme
implementation.  Note that language-sensitive casing pairs are not used.  If the
argument is not the uppercase member of such a pair, it is returned.
</p>
<p>The &lsquo;<samp>char-foldcase</samp>&rsquo; procedure applies the Unicode simple
case-folding algorithm to its argument and returns the result.  Note that
language-sensitive folding is not used.  
If the character that results from folding
is not supported by the implementation,
the argument is returned.
See UAX #44 [uax44] (part of the Unicode Standard) for details.
</p>
<p>Note that many Unicode lowercase characters do not have uppercase
equivalents.
</p>
</dd></dl>


<hr>
</div>
<div class="section" id="Strings">
<div class="header">
<p>
Next: <a href="#Vectors" accesskey="n" rel="next">Vectors</a>, Previous: <a href="#Characters" accesskey="p" rel="prev">Characters</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Strings-1"></span><h3 class="section">6.7 Strings</h3>

<span id="index-strings"></span>


<p>Strings are sequences of characters.  
Strings are written as sequences of characters enclosed within quotation marks
(&lsquo;<samp>&quot;</samp>&rsquo;).  Within a string literal, various escape
sequences represent characters other than
<span id="index-escape-sequence"></span>
themselves.  Escape sequences always start with a backslash (\):
</p>


<ul>
<li> &lsquo;<samp>\a</samp>&rsquo; : alarm, U+0007
</li><li> &lsquo;<samp>\b</samp>&rsquo; : backspace, U+0008 
</li><li> &lsquo;<samp>\t</samp>&rsquo; : character tabulation, U+0009 
</li><li> &lsquo;<samp>\n</samp>&rsquo; : linefeed, U+000A 
</li><li> &lsquo;<samp>\r</samp>&rsquo; : return, U+000D 
</li><li> &lsquo;<samp>\</samp>&rsquo;&quot; : double quote, U+0022 
</li><li> &lsquo;<samp>\\</samp>&rsquo; : backslash, U+005C 
</li><li> &lsquo;<samp>\|</samp>&rsquo; : vertical line, U+007C
</li><li> &lsquo;<samp>\<span class="roman">&lt;intraline whitespace&gt;</span>*<span class="roman">&lt;line ending&gt;</span>
<span class="roman">&lt;intraline whitespace&gt;</span>*</samp>&rsquo; : nothing
</li><li> &lsquo;<samp>\x&lt;hex scalar value&gt;;</samp>&rsquo; : specified character (note the
terminating semi-colon).

</li></ul>


<p>The result is unspecified if any other character in a string occurs
after a backslash.
</p>
<p>Except for a line ending, any character outside of an escape
sequence stands for itself in the string literal.  A line ending which
is preceded by &lsquo;<samp>\<span class="roman">&lt;intraline whitespace&gt;</span></samp>&rsquo; expands
to nothing (along with any trailing intraline whitespace), and can be
used to indent strings for improved legibility. Any other line ending
has the same effect as inserting a &lsquo;<samp>\n</samp>&rsquo; character into
the string.
</p>
<p>Examples:
</p>

<div class="example">
<pre class="example">

&quot;The word \&quot;recursion\&quot; has many meanings.&quot;
&quot;Another example:\ntwo lines of text&quot;
&quot;Here's text \ 
   containing just one line&quot;
&quot;\x03B1; is named GREEK SMALL LETTER ALPHA.&quot;

</pre></div>


<p>The <em>length</em> of a string is the number of characters that it
contains.  This number is an exact, non-negative integer that is fixed when the
string is created.  The <em>valid indexes</em> of a string are the
<span id="index-valid-indexes"></span>
exact non-negative integers less than the length of the string.  The first
character of a string has index 0, the second has index 1, and so on.
</p>

<p>Some of the procedures that operate on strings ignore the
difference between upper and lower case.  The names of the versions that ignore case
end with &ldquo;&lsquo;<samp><span class="nolinebreak">-ci</span></samp>&rsquo;&rdquo;<!-- /@w --> (for &ldquo;case insensitive&rdquo;).
</p>
<p>Implementations may forbid certain characters from appearing in strings.
However, with the exception of <tt>#\null</tt>, ASCII characters must
not be forbidden.
For example, an implementation might support the entire Unicode repertoire,
but only allow characters U+0001 to U+00FF (the Latin-1 repertoire
without <tt>#\null</tt>) in strings.
</p>
<p>It is an error to pass such a forbidden character to
&lsquo;<samp>make-string</samp>&rsquo;, &lsquo;<samp>string</samp>&rsquo;, &lsquo;<samp>string-set!</samp>&rsquo;, or &lsquo;<samp>string-fill!</samp>&rsquo;,
as part of the list passed to &lsquo;<samp>list-&gt;string</samp>&rsquo;,
or as part of the vector passed to &lsquo;<samp>vector-&gt;string</samp>&rsquo;
(see section see <a href="#Vectors">Vectors</a>),
or in UTF-8 encoded form within a bytevector passed to
&lsquo;<samp>utf8-&gt;string</samp>&rsquo; (see section see <a href="#Bytevectors">Bytevectors</a>).
It is also an error for a procedure passed to &lsquo;<samp>string-map</samp>&rsquo;
(see section see <a href="#Control-features">Control features</a>) to return a forbidden character,
or for &lsquo;<samp>read-string</samp>&rsquo; (see section see <a href="#Input">Input</a>)
to attempt to read one.
</p>

<dl class="def">
<dt id="index-string_003f"><span class="category">procedure: </span><span><strong>string?</strong> <em>obj</em><a href='#index-string_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is a string, otherwise returns <tt>#f</tt>.
</p></dd></dl>



<dl class="def">
<dt id="index-make_002dstring"><span class="category">procedure: </span><span><strong>make-string</strong> <em><var>k</var></em><a href='#index-make_002dstring' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-make_002dstring-1"><span class="category">procedure: </span><span><strong>make-string</strong> <em><var>k</var> char</em><a href='#index-make_002dstring-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>make-string</samp>&rsquo; procedure returns a newly allocated string of
length <var>k</var>.  If <var>char</var> is given, then all the characters of the string
are initialized to <var>char</var>, otherwise the contents of the
string are unspecified.
</p>
</dd></dl>


<dl class="def">
<dt id="index-string"><span class="category">procedure: </span><span><strong>string</strong> <em>char &hellip;</em><a href='#index-string' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated string composed of the arguments.
It is analogous to &lsquo;<samp>list</samp>&rsquo;.
</p>
</dd></dl>


<dl class="def">
<dt id="index-string_002dlength"><span class="category">procedure: </span><span><strong>string-length</strong> <em>string</em><a href='#index-string_002dlength' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the number of characters in the given <var>string</var>.
</p></dd></dl>



<dl class="def">
<dt id="index-string_002dref"><span class="category">procedure: </span><span><strong>string-ref</strong> <em>string <var>k</var></em><a href='#index-string_002dref' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>string</var>.
The &lsquo;<samp>string-ref</samp>&rsquo; procedure returns character <var>k</var> of <var>string</var> using zero-origin indexing.
</p></dd></dl>
<p>There is no requirement for this procedure to execute in constant time.
</p>


<dl class="def">
<dt id="index-string_002dset_0021"><span class="category">procedure: </span><span><strong>string-set!</strong> <em>string k char</em><a href='#index-string_002dset_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>string</var>.
The &lsquo;<samp>string-set!</samp>&rsquo; procedure stores <var>char</var> in element <var>k</var> of <var>string</var>.
There is no requirement for this procedure to execute in constant time.
</p>

<div class="format">
<pre class="format"><tt>(define (f) (make-string 3 #\*))
(define (g) &quot;***&quot;)
(string-set! (f) 0 #\?)                ==&gt;  <em>unspecified</em>
(string-set! (g) 0 #\?)                ==&gt;  <em>error</em>
(string-set! (symbol-&gt;string 'immutable)
             0
             #\?)                      ==&gt;  <em>error</em>
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-string_003d_003f"><span class="category">procedure: </span><span><strong>string=?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if all the strings are the same length and contain
exactly the same characters in the same positions, otherwise returns
<tt>#f</tt>.
</p>
</dd></dl>


<dl class="def">
<dt id="index-string_002dci_003d_003f"><span class="category">char library procedure: </span><span><strong>string-ci=?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_002dci_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if, after case-folding, all the strings are the same
length and contain the same characters in the same positions, otherwise
returns <tt>#f</tt>.  Specifically, these procedures behave as if 
&lsquo;<samp>string-foldcase</samp>&rsquo; were applied to their arguments before comparing them.
</p>
</dd></dl>



<dl class="def">
<dt id="index-string_003c_003f"><span class="category">procedure: </span><span><strong>string&lt;?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_003c_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dci_003c_003f"><span class="category">char library procedure: </span><span><strong>string-ci&lt;?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_002dci_003c_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_003e_003f"><span class="category">procedure: </span><span><strong>string&gt;?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_003e_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dci_003e_003f"><span class="category">char library procedure: </span><span><strong>string-ci&gt;?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_002dci_003e_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_003c_003d_003f"><span class="category">procedure: </span><span><strong>string&lt;=?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_003c_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dci_003c_003d_003f"><span class="category">char library procedure: </span><span><strong>string-ci&lt;=?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_002dci_003c_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_003e_003d_003f"><span class="category">procedure: </span><span><strong>string&gt;=?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_003e_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dci_003e_003d_003f"><span class="category">char library procedure: </span><span><strong>string-ci&gt;=?</strong> <em>string1 string2 string3 &hellip;</em><a href='#index-string_002dci_003e_003d_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return <tt>#t</tt> if their arguments are (respectively):
monotonically increasing, monotonically decreasing,
monotonically non-decreasing, or monotonically non-increasing.
</p>
<p>These predicates are required to be transitive.
</p>
<p>These procedures compare strings in an implementation-defined way.
One approach is to make them the lexicographic extensions to strings of
the corresponding orderings on characters.  In that case, &lsquo;<samp>string&lt;?</samp>&rsquo;
would be the lexicographic ordering on strings induced by the ordering
&lsquo;<samp>char&lt;?</samp>&rsquo; on characters, and if the two strings differ in length but
are the same up to the length of the shorter string, the shorter string
would be considered to be lexicographically less than the longer string.
However, it is also permitted to use the natural ordering imposed by the
implementation&rsquo;s internal representation of strings, or a more complex locale-specific
ordering.
</p>
<p>In all cases, a pair of strings must satisfy exactly one of
&lsquo;<samp>string&lt;?</samp>&rsquo;, &lsquo;<samp>string=?</samp>&rsquo;, and &lsquo;<samp>string&gt;?</samp>&rsquo;, and must satisfy
&lsquo;<samp>string&lt;=?</samp>&rsquo; if and only if they do not satisfy &lsquo;<samp>string&gt;?</samp>&rsquo; and
&lsquo;<samp>string&gt;=?</samp>&rsquo; if and only if they do not satisfy &lsquo;<samp>string&lt;?</samp>&rsquo;.
</p>
<p>The &ldquo;<tt><span class="nolinebreak">-ci</span></tt>&rdquo;<!-- /@w --> procedures behave as if they applied
&lsquo;<samp>string-foldcase</samp>&rsquo; to their arguments before invoking the corresponding
procedures without  &ldquo;<tt><span class="nolinebreak">-ci</span></tt>&rdquo;<!-- /@w -->.
</p>

</dd></dl>


<dl class="def">
<dt id="index-string_002dupcase"><span class="category">char library procedure: </span><span><strong>string-upcase</strong> <em>string</em><a href='#index-string_002dupcase' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002ddowncase"><span class="category">char library procedure: </span><span><strong>string-downcase</strong> <em>string</em><a href='#index-string_002ddowncase' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dfoldcase"><span class="category">char library procedure: </span><span><strong>string-foldcase</strong> <em>string</em><a href='#index-string_002dfoldcase' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>These procedures apply the Unicode full string uppercasing, lowercasing,
and case-folding algorithms to their arguments and return the result.
In certain cases, the result differs in length from the argument.
If the result is equal to the argument in the sense of &lsquo;<samp>string=?</samp>&rsquo;, the argument may be returned.
Note that language-sensitive mappings and foldings are not used.  
</p>
<p>The Unicode Standard prescribes special treatment of the Greek letter
Sigma, whose normal lower-case form is sigma but which becomes
varsigma at the end of a word.  See UAX #44 [uax44] (part of
the Unicode Standard) for details.  However, implementations of &lsquo;<samp>string-downcase</samp>&rsquo; are not required to provide this behavior, and may
choose to change Sigma to sigma in all cases.
</p>
</dd></dl>



<dl class="def">
<dt id="index-substring"><span class="category">procedure: </span><span><strong>substring</strong> <em>string start end</em><a href='#index-substring' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>substring</samp>&rsquo; procedure returns a newly allocated string formed from the characters of
<var>string</var> beginning with index <var>start</var> and ending with index
<var>end</var>.
This is equivalent to calling &lsquo;<samp>string-copy</samp>&rsquo; with the same arguments,
but is provided for backward compatibility and
stylistic flexibility.
</p></dd></dl>



<dl class="def">
<dt id="index-string_002dappend"><span class="category">procedure: </span><span><strong>string-append</strong> <em><var>string</var> &hellip;</em><a href='#index-string_002dappend' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated string whose characters are the concatenation of the
characters in the given strings.
</p>
</dd></dl>



<dl class="def">
<dt id="index-string_002d_003elist"><span class="category">procedure: </span><span><strong>string-&gt;list</strong> <em>string</em><a href='#index-string_002d_003elist' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003elist-1"><span class="category">procedure: </span><span><strong>string-&gt;list</strong> <em>string start</em><a href='#index-string_002d_003elist-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003elist-2"><span class="category">procedure: </span><span><strong>string-&gt;list</strong> <em>string start end</em><a href='#index-string_002d_003elist-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-list_002d_003estring"><span class="category">procedure: </span><span><strong>list-&gt;string</strong> <em>list</em><a href='#index-list_002d_003estring' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if any element of <var>list</var> is not a character.
The &lsquo;<samp>string-&gt;list</samp>&rsquo; procedure returns a newly allocated list of the
characters of <var>string</var> between <var>start</var> and <var>end</var>.
&lsquo;<samp>list-&gt;string</samp>&rsquo;
returns a newly allocated string formed from the elements in the list
<var>list</var>.
In both procedures, order is preserved.
&lsquo;<samp>string-&gt;list</samp>&rsquo;
and &lsquo;<samp>list-&gt;string</samp>&rsquo; are
inverses so far as &lsquo;<samp>equal?</samp>&rsquo; is concerned.  
</p>
</dd></dl>



<dl class="def">
<dt id="index-string_002dcopy"><span class="category">procedure: </span><span><strong>string-copy</strong> <em>string</em><a href='#index-string_002dcopy' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dcopy-1"><span class="category">procedure: </span><span><strong>string-copy</strong> <em>string start</em><a href='#index-string_002dcopy-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dcopy-2"><span class="category">procedure: </span><span><strong>string-copy</strong> <em>string start end</em><a href='#index-string_002dcopy-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated copy of the part of the given <var>string</var>
between <var>start</var> and <var>end</var>.
</p>
</dd></dl>



<dl class="def">
<dt id="index-string_002dcopy_0021"><span class="category">procedure: </span><span><strong>string-copy!</strong> <em>to at from</em><a href='#index-string_002dcopy_0021' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dcopy_0021-1"><span class="category">procedure: </span><span><strong>string-copy!</strong> <em>to at from start</em><a href='#index-string_002dcopy_0021-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dcopy_0021-2"><span class="category">procedure: </span><span><strong>string-copy!</strong> <em>to at from start end</em><a href='#index-string_002dcopy_0021-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>at</var> is less than zero or greater than the length of <var>to</var>.
It is also an error if &lsquo;<samp>(- (string-length <var>to</var>) <var>at</var>)</samp>&rsquo;
is less than &lsquo;<samp>(- <var>end</var> <var>start</var>)</samp>&rsquo;.
Copies the characters of string <var>from</var> between <var>start</var> and <var>end</var>
to string <var>to</var>, starting at <var>at</var>.  The order in which characters are
copied is unspecified, except that if the source and destination overlap,
copying takes place as if the source is first copied into a temporary
string and then into the destination.  This can be achieved without
allocating storage by making sure to copy in the correct direction in
such circumstances.
</p>

<div class="format">
<pre class="format"><tt>(define a &quot;12345&quot;)
(define b (string-copy &quot;abcde&quot;))
(string-copy! b 1 a 0 2)
b                                      ==&gt; &quot;a12de&quot;
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-string_002dfill_0021"><span class="category">procedure: </span><span><strong>string-fill!</strong> <em>string fill</em><a href='#index-string_002dfill_0021' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dfill_0021-1"><span class="category">procedure: </span><span><strong>string-fill!</strong> <em>string fill start</em><a href='#index-string_002dfill_0021-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002dfill_0021-2"><span class="category">procedure: </span><span><strong>string-fill!</strong> <em>string fill start end</em><a href='#index-string_002dfill_0021-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>fill</var> is not a character.
</p>
<p>The &lsquo;<samp>string-fill!</samp>&rsquo; procedure stores <var>fill</var>
in the elements of <var>string</var>
between <var>start</var> and <var>end</var>.
</p>
</dd></dl>


<hr>
</div>
<div class="section" id="Vectors">
<div class="header">
<p>
Next: <a href="#Bytevectors" accesskey="n" rel="next">Bytevectors</a>, Previous: <a href="#Strings" accesskey="p" rel="prev">Strings</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Vectors-1"></span><h3 class="section">6.8 Vectors</h3>

<span id="index-vectors"></span>


<p>Vectors are heterogeneous structures whose elements are indexed
by integers.  A vector typically occupies less space than a list
of the same length, and the average time needed to access a randomly
chosen element is typically less for the vector than for the list.
</p>
<p>The <em>length</em> of a vector is the number of elements that it
contains.  This number is a non-negative integer that is fixed when the
vector is created.  The <em>valid indexes</em> of a
<span id="index-valid-indexes-1"></span>
vector are the exact non-negative integers less than the length of the
vector.  The first element in a vector is indexed by zero, and the last
element is indexed by one less than the length of the vector.
</p>
<p>Vectors are written using the notation <tt>#(<var>obj</var> &hellip;)</tt>.
For example, a vector of length 3 containing the number zero in element
0, the list &lsquo;<samp>(2 2 2 2)</samp>&rsquo; in element 1, and the string &lsquo;<samp>&quot;Anna&quot;</samp>&rsquo; in
element 2 can be written as follows:
</p>

<div class="example">
<pre class="example">

#(0 (2 2 2 2) &quot;Anna&quot;)

</pre></div>


<p>Vector constants are self-evaluating, so they do not need to be quoted in programs.
</p>

<dl class="def">
<dt id="index-vector_003f"><span class="category">procedure: </span><span><strong>vector?</strong> <em>obj</em><a href='#index-vector_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd> 
<p>Returns <tt>#t</tt> if <var>obj</var> is a vector; otherwise returns <tt>#f</tt>.
</p></dd></dl>



<dl class="def">
<dt id="index-make_002dvector"><span class="category">procedure: </span><span><strong>make-vector</strong> <em>k</em><a href='#index-make_002dvector' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-make_002dvector-1"><span class="category">procedure: </span><span><strong>make-vector</strong> <em>k fill</em><a href='#index-make_002dvector-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated vector of <var>k</var> elements.  If a second
argument is given, then each element is initialized to <var>fill</var>.
Otherwise the initial contents of each element is unspecified.
</p>
</dd></dl>



<dl class="def">
<dt id="index-vector"><span class="category">procedure: </span><span><strong>vector</strong> <em>obj &hellip;</em><a href='#index-vector' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated vector whose elements contain the given
arguments.  It is analogous to &lsquo;<samp>list</samp>&rsquo;.
</p>

<div class="format">
<pre class="format"><tt>(vector 'a 'b 'c)                      ==&gt;  #(a b c)
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-vector_002dlength"><span class="category">procedure: </span><span><strong>vector-length</strong> <em>vector</em><a href='#index-vector_002dlength' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the number of elements in <var>vector</var> as an exact integer.
</p></dd></dl>



<dl class="def">
<dt id="index-vector_002dref"><span class="category">procedure: </span><span><strong>vector-ref</strong> <em>vector k</em><a href='#index-vector_002dref' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>vector</var>.
The &lsquo;<samp>vector-ref</samp>&rsquo; procedure returns the contents of element <var>k</var> of
<var>vector</var>.
</p>

<div class="format">
<pre class="format"><tt>(vector-ref '#(1 1 2 3 5 8 13 21)
            5)  
          ==&gt;  8
(vector-ref '#(1 1 2 3 5 8 13 21)
            (exact
             (round (* 2 (acos -1))))) 
          ==&gt; 13
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-vector_002dset_0021"><span class="category">procedure: </span><span><strong>vector-set!</strong> <em>vector k obj</em><a href='#index-vector_002dset_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>vector</var>.
The &lsquo;<samp>vector-set!</samp>&rsquo; procedure stores <var>obj</var> in element <var>k</var> of <var>vector</var>.
</p>
<div class="format">
<pre class="format"><tt>(let ((vec (vector 0 '(2 2 2 2) &quot;Anna&quot;)))
  (vector-set! vec 1 '(&quot;Sue&quot; &quot;Sue&quot;))
  vec)      
          ==&gt;  #(0 (&quot;Sue&quot; &quot;Sue&quot;) &quot;Anna&quot;)

(vector-set! '#(0 1 2) 1 &quot;doe&quot;)  
          ==&gt;  <em>error</em>  ; constant vector
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-vector_002d_003elist"><span class="category">procedure: </span><span><strong>vector-&gt;list</strong> <em>vector</em><a href='#index-vector_002d_003elist' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002d_003elist-1"><span class="category">procedure: </span><span><strong>vector-&gt;list</strong> <em>vector start</em><a href='#index-vector_002d_003elist-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002d_003elist-2"><span class="category">procedure: </span><span><strong>vector-&gt;list</strong> <em>vector start end</em><a href='#index-vector_002d_003elist-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-list_002d_003evector"><span class="category">procedure: </span><span><strong>list-&gt;vector</strong> <em>list</em><a href='#index-list_002d_003evector' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>vector-&gt;list</samp>&rsquo; procedure returns a newly allocated list of the objects contained
in the elements of <var>vector</var> between <var>start</var> and <var>end</var>.
The &lsquo;<samp>list-&gt;vector</samp>&rsquo; procedure returns a newly
created vector initialized to the elements of the list <var>list</var>.
</p>
<p>In both procedures, order is preserved.
</p>

<div class="format">
<pre class="format"><tt>(vector-&gt;list '#(dah dah didah))  
          ==&gt;  (dah dah didah)
(vector-&gt;list '#(dah dah didah) 1 2) 
          ==&gt; (dah)
(list-&gt;vector '(dididit dah))   
          ==&gt;  #(dididit dah)
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-vector_002d_003estring"><span class="category">procedure: </span><span><strong>vector-&gt;string</strong> <em>vector</em><a href='#index-vector_002d_003estring' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002d_003estring-1"><span class="category">procedure: </span><span><strong>vector-&gt;string</strong> <em>vector start</em><a href='#index-vector_002d_003estring-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002d_003estring-2"><span class="category">procedure: </span><span><strong>vector-&gt;string</strong> <em>vector start end</em><a href='#index-vector_002d_003estring-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003evector"><span class="category">procedure: </span><span><strong>string-&gt;vector</strong> <em>string</em><a href='#index-string_002d_003evector' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003evector-1"><span class="category">procedure: </span><span><strong>string-&gt;vector</strong> <em>string start</em><a href='#index-string_002d_003evector-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003evector-2"><span class="category">procedure: </span><span><strong>string-&gt;vector</strong> <em>string start end</em><a href='#index-string_002d_003evector-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>It is an error if any element of <var>vector</var> between <var>start</var>
and <var>end</var> is not a character.
The &lsquo;<samp>vector-&gt;string</samp>&rsquo; procedure returns a newly allocated string of the objects contained
in the elements of <var>vector</var>
between <var>start</var> and <var>end</var>.
The &lsquo;<samp>string-&gt;vector</samp>&rsquo; procedure returns a newly
created vector initialized to the elements of the string <var>string</var>
between <var>start</var> and <var>end</var>.
</p>
<p>In both procedures, order is preserved.
</p>


<div class="format">
<pre class="format"><tt>(string-&gt;vector &quot;ABC&quot;)                 ==&gt;   #(#\A #\B #\C)
(vector-&gt;string
  #(#\1 #\2 #\3) 
)
                      ==&gt; &quot;123&quot;
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-vector_002dcopy"><span class="category">procedure: </span><span><strong>vector-copy</strong> <em>vector</em><a href='#index-vector_002dcopy' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002dcopy-1"><span class="category">procedure: </span><span><strong>vector-copy</strong> <em>vector start</em><a href='#index-vector_002dcopy-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002dcopy-2"><span class="category">procedure: </span><span><strong>vector-copy</strong> <em>vector start end</em><a href='#index-vector_002dcopy-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated copy of the elements of the given <var>vector</var>
between <var>start</var> and <var>end</var>.
The elements of the new vector are the same (in the sense of
&lsquo;<samp>eqv?</samp>&rsquo;) as the elements of the old.
</p>


<div class="format">
<pre class="format"><tt>(define a #(1 8 2 8)) ; a may be immutable
(define b (vector-copy a))
(vector-set! b 0 3)   ; b is mutable
b                                      ==&gt; #(3 8 2 8)
(define c (vector-copy b 1 3))
c                                      ==&gt; #(8 2)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-vector_002dcopy_0021"><span class="category">procedure: </span><span><strong>vector-copy!</strong> <em>to at from</em><a href='#index-vector_002dcopy_0021' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002dcopy_0021-1"><span class="category">procedure: </span><span><strong>vector-copy!</strong> <em>to at from start</em><a href='#index-vector_002dcopy_0021-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002dcopy_0021-2"><span class="category">procedure: </span><span><strong>vector-copy!</strong> <em>to at from start end</em><a href='#index-vector_002dcopy_0021-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>at</var> is less than zero or greater than the length of <var>to</var>.
It is also an error if &lsquo;<samp>(- (vector-length <var>to</var>) <var>at</var>)</samp>&rsquo;
is less than &lsquo;<samp>(- <var>end</var> <var>start</var>)</samp>&rsquo;.
Copies the elements of vector <var>from</var> between <var>start</var> and <var>end</var>
to vector <var>to</var>, starting at <var>at</var>.  The order in which elements are
copied is unspecified, except that if the source and destination overlap,
copying takes place as if the source is first copied into a temporary
vector and then into the destination.  This can be achieved without
allocating storage by making sure to copy in the correct direction in
such circumstances.
</p>

<div class="format">
<pre class="format"><tt>(define a (vector 1 2 3 4 5))
(define b (vector 10 20 30 40 50))
(vector-copy! b 1 a 0 2)
b                                      ==&gt; #(10 1 2 40 50)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-vector_002dappend"><span class="category">procedure: </span><span><strong>vector-append</strong> <em><var>vector</var> &hellip;</em><a href='#index-vector_002dappend' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated vector whose elements are the concatenation
of the elements of the given vectors.
</p>

<div class="format">
<pre class="format"><tt>(vector-append #(a b c) #(d e f)) 
          ==&gt; #(a b c d e f)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-vector_002dfill_0021"><span class="category">procedure: </span><span><strong>vector-fill!</strong> <em>vector fill</em><a href='#index-vector_002dfill_0021' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002dfill_0021-1"><span class="category">procedure: </span><span><strong>vector-fill!</strong> <em>vector fill start</em><a href='#index-vector_002dfill_0021-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-vector_002dfill_0021-2"><span class="category">procedure: </span><span><strong>vector-fill!</strong> <em>vector fill start end</em><a href='#index-vector_002dfill_0021-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>vector-fill!</samp>&rsquo; procedure stores <var>fill</var>
in the elements of <var>vector</var>
between <var>start</var> and <var>end</var>.
</p>

<div class="format">
<pre class="format"><tt>(define a (vector 1 2 3 4 5))
(vector-fill! a 'smash 2 4)
a 
          ==&gt; #(1 2 smash smash 5)
</tt>
</pre></div>


</dd></dl>


<hr>
</div>
<div class="section" id="Bytevectors">
<div class="header">
<p>
Next: <a href="#Control-features" accesskey="n" rel="next">Control features</a>, Previous: <a href="#Vectors" accesskey="p" rel="prev">Vectors</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Bytevectors-1"></span><h3 class="section">6.9 Bytevectors</h3>

<span id="index-bytevectors"></span>


<p><em>Bytevectors</em> represent blocks of binary data.
They are fixed-length sequences of bytes, where
a <em>byte</em> is an exact integer in the range from 0 to 255 inclusive.
<span id="index-byte"></span>
A bytevector is typically more space-efficient than a vector
containing the same values.
</p>
<p>The <em>length</em> of a bytevector is the number of elements that it
contains.  This number is a non-negative integer that is fixed when
the bytevector is created.  The <em>valid indexes</em> of
<span id="index-valid-indexes-2"></span>
a bytevector are the exact non-negative integers less than the length of the
bytevector, starting at index zero as with vectors.
</p>
<p>Bytevectors are written using the notation <tt>#u8(<var>byte</var> &hellip;)</tt>.
For example, a bytevector of length 3 containing the byte 0 in element
0, the byte 10 in element 1, and the byte 5 in
element 2 can be written as follows:
</p>

<div class="example">
<pre class="example">

#u8(0 10 5)

</pre></div>


<p>Bytevector constants are self-evaluating, so they do not need to be quoted in programs.
</p>


<dl class="def">
<dt id="index-bytevector_003f"><span class="category">procedure: </span><span><strong>bytevector?</strong> <em>obj</em><a href='#index-bytevector_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is a bytevector.
Otherwise, <tt>#f</tt> is returned.
</p></dd></dl>


<dl class="def">
<dt id="index-make_002dbytevector"><span class="category">procedure: </span><span><strong>make-bytevector</strong> <em>k</em><a href='#index-make_002dbytevector' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-make_002dbytevector-1"><span class="category">procedure: </span><span><strong>make-bytevector</strong> <em>k byte</em><a href='#index-make_002dbytevector-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>make-bytevector</samp>&rsquo; procedure returns a newly allocated bytevector of
length <var>k</var>.  If <var>byte</var> is given, then all elements of the bytevector
are initialized to <var>byte</var>, otherwise the contents of each
element are unspecified.
</p>

<div class="format">
<pre class="format"><tt>(make-bytevector 2 12)                 ==&gt; #u8(12 12)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-bytevector"><span class="category">procedure: </span><span><strong>bytevector</strong> <em><var>byte</var> &hellip;</em><a href='#index-bytevector' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated bytevector containing its arguments.
</p>

<div class="format">
<pre class="format"><tt>(bytevector 1 3 5 1 3 5)               ==&gt;  #u8(1 3 5 1 3 5)
(bytevector)                           ==&gt;  #u8()
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-bytevector_002dlength"><span class="category">procedure: </span><span><strong>bytevector-length</strong> <em>bytevector</em><a href='#index-bytevector_002dlength' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the length of <var>bytevector</var> in bytes as an exact integer.
</p></dd></dl>


<dl class="def">
<dt id="index-bytevector_002du8_002dref"><span class="category">procedure: </span><span><strong>bytevector-u8-ref</strong> <em>bytevector k</em><a href='#index-bytevector_002du8_002dref' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>bytevector</var>.
Returns the <var>k</var>th byte of <var>bytevector</var>.
</p>

<div class="format">
<pre class="format"><tt>(bytevector-u8-ref '#u8(1 1 2 3 5 8 13 21)
            5)  
          ==&gt;  8
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-bytevector_002du8_002dset_0021"><span class="category">procedure: </span><span><strong>bytevector-u8-set!</strong> <em>bytevector k byte</em><a href='#index-bytevector_002du8_002dset_0021' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>k</var> is not a valid index of <var>bytevector</var>.
Stores <var>byte</var> as the <var>k</var>th byte of <var>bytevector</var>.
</p>
<div class="format">
<pre class="format"><tt>(let ((bv (bytevector 1 2 3 4)))
  (bytevector-u8-set! bv 1 3)
  bv) 
          ==&gt; #u8(1 3 3 4)
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-bytevector_002dcopy"><span class="category">procedure: </span><span><strong>bytevector-copy</strong> <em>bytevector</em><a href='#index-bytevector_002dcopy' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-bytevector_002dcopy-1"><span class="category">procedure: </span><span><strong>bytevector-copy</strong> <em>bytevector start</em><a href='#index-bytevector_002dcopy-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-bytevector_002dcopy-2"><span class="category">procedure: </span><span><strong>bytevector-copy</strong> <em>bytevector start end</em><a href='#index-bytevector_002dcopy-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated bytevector containing the bytes in <var>bytevector</var>
between <var>start</var> and <var>end</var>.
</p>

<div class="format">
<pre class="format"><tt>(define a #u8(1 2 3 4 5))
(bytevector-copy a 2 4))               ==&gt; #u8(3 4)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-bytevector_002dcopy_0021"><span class="category">procedure: </span><span><strong>bytevector-copy!</strong> <em>to at from</em><a href='#index-bytevector_002dcopy_0021' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-bytevector_002dcopy_0021-1"><span class="category">procedure: </span><span><strong>bytevector-copy!</strong> <em>to at from start</em><a href='#index-bytevector_002dcopy_0021-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-bytevector_002dcopy_0021-2"><span class="category">procedure: </span><span><strong>bytevector-copy!</strong> <em>to at from start end</em><a href='#index-bytevector_002dcopy_0021-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>at</var> is less than zero or greater than the length of <var>to</var>.
It is also an error if &lsquo;<samp>(- (bytevector-length <var>to</var>) <var>at</var>)</samp>&rsquo;
is less than &lsquo;<samp>(- <var>end</var> <var>start</var>)</samp>&rsquo;.
Copies the bytes of bytevector <var>from</var> between <var>start</var> and <var>end</var>
to bytevector <var>to</var>, starting at <var>at</var>.  The order in which bytes are
copied is unspecified, except that if the source and destination overlap,
copying takes place as if the source is first copied into a temporary
bytevector and then into the destination.  This can be achieved without
allocating storage by making sure to copy in the correct direction in
such circumstances.
</p>

<div class="format">
<pre class="format"><tt>(define a (bytevector 1 2 3 4 5))
(define b (bytevector 10 20 30 40 50))
(bytevector-copy! b 1 a 0 2)
b                                      ==&gt; #u8(10 1 2 40 50)
</tt>
</pre></div>



<blockquote>
<p><em>Note:</em>
This procedure appears in R<sup>6</sup>RS, but places the source before the destination,
contrary to other such procedures in Scheme.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-bytevector_002dappend"><span class="category">procedure: </span><span><strong>bytevector-append</strong> <em><var>bytevector</var> &hellip;</em><a href='#index-bytevector_002dappend' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a newly allocated bytevector whose elements are the concatenation
of the elements in the given bytevectors.
</p>

<div class="format">
<pre class="format"><tt>(bytevector-append #u8(0 1 2) #u8(3 4 5)) 
          ==&gt; #u8(0 1 2 3 4 5)
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-utf8_002d_003estring"><span class="category">procedure: </span><span><strong>utf8-&gt;string</strong> <em>bytevector</em><a href='#index-utf8_002d_003estring' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-utf8_002d_003estring-1"><span class="category">procedure: </span><span><strong>utf8-&gt;string</strong> <em>bytevector start</em><a href='#index-utf8_002d_003estring-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-utf8_002d_003estring-2"><span class="category">procedure: </span><span><strong>utf8-&gt;string</strong> <em>bytevector start end</em><a href='#index-utf8_002d_003estring-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003eutf8"><span class="category">procedure: </span><span><strong>string-&gt;utf8</strong> <em>string</em><a href='#index-string_002d_003eutf8' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003eutf8-1"><span class="category">procedure: </span><span><strong>string-&gt;utf8</strong> <em>string start</em><a href='#index-string_002d_003eutf8-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-string_002d_003eutf8-2"><span class="category">procedure: </span><span><strong>string-&gt;utf8</strong> <em>string start end</em><a href='#index-string_002d_003eutf8-2' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error for <var>bytevector</var> to contain invalid UTF-8 byte sequences.
These procedures translate between strings and bytevectors
that encode those strings using the UTF-8 encoding.
The &lsquo;<samp>utf8-&gt;string</samp>&rsquo; procedure decodes the bytes of
a bytevector between <var>start</var> and <var>end</var>
and returns the corresponding string;
the &lsquo;<samp>string-&gt;utf8</samp>&rsquo; procedure encodes the characters of a
string between <var>start</var> and <var>end</var>
and returns the corresponding bytevector.
</p>

<div class="format">
<pre class="format"><tt>(utf8-&gt;string #u8(#x41))               ==&gt; &quot;A&quot;
(string-&gt;utf8 &quot;lambda&quot;)                   ==&gt; #u8(#xCE #xBB)
</tt>
</pre></div>


</dd></dl>

<hr>
</div>
<div class="section" id="Control-features">
<div class="header">
<p>
Next: <a href="#Exceptions" accesskey="n" rel="next">Exceptions</a>, Previous: <a href="#Bytevectors" accesskey="p" rel="prev">Bytevectors</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Control-features-1"></span><h3 class="section">6.10 Control features</h3>

<span id="index-control-features"></span>

 
<p>This section describes various primitive procedures which control the
flow of program execution in special ways.
Procedures in this section that invoke procedure arguments
always do so in the same dynamic environment as the call of the
original procedure.
The &lsquo;<samp>procedure?</samp>&rsquo; predicate is also described here.
</p>

<dl class="def">
<dt id="index-procedure_003f"><span class="category">procedure: </span><span><strong>procedure?</strong> <em>obj</em><a href='#index-procedure_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is a procedure, otherwise returns <tt>#f</tt>.
</p>

<div class="format">
<pre class="format"><tt>(procedure? car)                       ==&gt;  #t
(procedure? 'car)                      ==&gt;  #f
(procedure? (lambda (x) (* x x)))   
                                       ==&gt;  #t
(procedure? '(lambda (x) (* x x)))  
                                       ==&gt;  #f
(call-with-current-continuation procedure?)
                                       ==&gt;  #t
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-apply"><span class="category">procedure: </span><span><strong>apply</strong> <em>proc arg1 &hellip; args</em><a href='#index-apply' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>apply</samp>&rsquo; procedure calls <var>proc</var> with the elements of the list
&lsquo;<samp>(append (list <var>arg1</var> &hellip;) <var>args</var>)</samp>&rsquo; as the actual
arguments.
</p>

<div class="format">
<pre class="format"><tt>(apply + (list 3 4))                   ==&gt;  7

(define compose
  (lambda (f g)
    (lambda args
      (f (apply g args)))))

((compose sqrt *) 12 75)               ==&gt;  30
</tt>
</pre></div>

</dd></dl>



<dl class="def">
<dt id="index-map"><span class="category">procedure: </span><span><strong>map</strong> <em>proc list1 list2 &hellip;</em><a href='#index-map' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not
accept as many arguments as there are <i>list</i>s
and return a single value.
The &lsquo;<samp>map</samp>&rsquo; procedure applies <var>proc</var> element-wise to the elements of the
<var>list</var>s and returns a list of the results, in order.
If more than one <var>list</var> is given and not all lists have the same length,
&lsquo;<samp>map</samp>&rsquo; terminates when the shortest list runs out.
The <var>list</var>s can be circular, but it is an error if all of them are circular.
It is an error for <var>proc</var> to mutate any of the lists.
The dynamic order in which <var>proc</var> is applied to the elements of the
<var>list</var>s is unspecified.  If multiple returns occur from &lsquo;<samp>map</samp>&rsquo;,
the values returned by earlier returns are not mutated.
</p>

<div class="format">
<pre class="format"><tt>(map cadr '((a b) (d e) (g h)))   
          ==&gt;  (b e h)

(map (lambda (n) (expt n n))
     '(1 2 3 4 5))                
          ==&gt;  (1 4 27 256 3125)

(map + '(1 2 3) '(4 5 6 7))            ==&gt;  (5 7 9)

(let ((count 0))
  (map (lambda (ignored)
         (set! count (+ count 1))
         count)
       '(a b)))                        ==&gt;  (1 2) <var>or</var> (2 1)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-string_002dmap"><span class="category">procedure: </span><span><strong>string-map</strong> <em>proc string1 string2 &hellip;</em><a href='#index-string_002dmap' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>It is an error if <var>proc</var> does not
accept as many arguments as there are <i>string</i>s
and return a single character.
The &lsquo;<samp>string-map</samp>&rsquo; procedure applies <var>proc</var> element-wise to the elements of the
<var>string</var>s and returns a string of the results, in order.
If more than one <var>string</var> is given and not all strings have the same length,
&lsquo;<samp>string-map</samp>&rsquo; terminates when the shortest string runs out.
The dynamic order in which <var>proc</var> is applied to the elements of the
<var>string</var>s is unspecified.
If multiple returns occur from &lsquo;<samp>string-map</samp>&rsquo;,
the values returned by earlier returns are not mutated.
</p>

<div class="format">
<pre class="format"><tt>(string-map char-foldcase &quot;AbdEgH&quot;) 
          ==&gt;  &quot;abdegh&quot;

(string-map
 (lambda (c)
   (integer-&gt;char (+ 1 (char-&gt;integer c))))
 &quot;HAL&quot;)                
          ==&gt;  &quot;IBM&quot;

(string-map
 (lambda (c k)
   ((if (eqv? k #\u) char-upcase char-downcase)
    c))
 &quot;studlycaps xxx&quot;
 &quot;ululululul&quot;)   
          ==&gt;   &quot;StUdLyCaPs&quot;
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-vector_002dmap"><span class="category">procedure: </span><span><strong>vector-map</strong> <em>proc vector1 vector2 &hellip;</em><a href='#index-vector_002dmap' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not
accept as many arguments as there are <i>vector</i>s
and return a single value.
The &lsquo;<samp>vector-map</samp>&rsquo; procedure applies <var>proc</var> element-wise to the elements of the
<var>vector</var>s and returns a vector of the results, in order.
If more than one <var>vector</var> is given and not all vectors have the same length,
&lsquo;<samp>vector-map</samp>&rsquo; terminates when the shortest vector runs out.
The dynamic order in which <var>proc</var> is applied to the elements of the
<var>vector</var>s is unspecified.
If multiple returns occur from &lsquo;<samp>vector-map</samp>&rsquo;,
the values returned by earlier returns are not mutated.
</p>

<div class="format">
<pre class="format"><tt>(vector-map cadr '#((a b) (d e) (g h)))   
          ==&gt;  #(b e h)

(vector-map (lambda (n) (expt n n))
            '#(1 2 3 4 5))                
          ==&gt;  #(1 4 27 256 3125)

(vector-map + '#(1 2 3) '#(4 5 6 7))       
          ==&gt;  #(5 7 9)

(let ((count 0))
  (vector-map
   (lambda (ignored)
     (set! count (+ count 1))
     count)
   '#(a b)))                           ==&gt;  #(1 2) <var>or</var> #(2 1)
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-for_002deach"><span class="category">procedure: </span><span><strong>for-each</strong> <em>proc list1 list2 &hellip;</em><a href='#index-for_002deach' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not
accept as many arguments as there are <i>list</i>s.
The arguments to &lsquo;<samp>for-each</samp>&rsquo; are like the arguments to &lsquo;<samp>map</samp>&rsquo;, but
&lsquo;<samp>for-each</samp>&rsquo; calls <var>proc</var> for its side effects rather than for its
values.  Unlike &lsquo;<samp>map</samp>&rsquo;, &lsquo;<samp>for-each</samp>&rsquo; is guaranteed to call <var>proc</var> on
the elements of the <var>list</var>s in order from the first element(s) to the
last, and the value returned by &lsquo;<samp>for-each</samp>&rsquo; is unspecified.
If more than one <var>list</var> is given and not all lists have the same length,
&lsquo;<samp>for-each</samp>&rsquo; terminates when the shortest list runs out.
The <var>list</var>s can be circular, but it is an error if all of them are circular.
</p>
<p>It is an error for <var>proc</var> to mutate any of the lists.
</p>

<div class="format">
<pre class="format"><tt>(let ((v (make-vector 5)))
  (for-each (lambda (i)
              (vector-set! v i (* i i)))
            '(0 1 2 3 4))
  v)                                   ==&gt;  #(0 1 4 9 16)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-string_002dfor_002deach"><span class="category">procedure: </span><span><strong>string-for-each</strong> <em>proc string1 string2 &hellip;</em><a href='#index-string_002dfor_002deach' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not
accept as many arguments as there are <i>string</i>s.
The arguments to &lsquo;<samp>string-for-each</samp>&rsquo; are like the arguments to &lsquo;<samp>string-map</samp>&rsquo;, but &lsquo;<samp>string-for-each</samp>&rsquo; calls <var>proc</var> for its side
effects rather than for its values.  Unlike &lsquo;<samp>string-map</samp>&rsquo;, &lsquo;<samp>string-for-each</samp>&rsquo; is guaranteed to call <var>proc</var> on the elements of
the <var>string</var>s in order from the first element(s) to the last, and the
value returned by &lsquo;<samp>string-for-each</samp>&rsquo; is unspecified.
If more than one <var>string</var> is given and not all strings have the same length,
&lsquo;<samp>string-for-each</samp>&rsquo; terminates when the shortest string runs out.
It is an error for <var>proc</var> to mutate any of the strings.
</p>

<div class="format">
<pre class="format"><tt>(let ((v '()))
  (string-for-each
   (lambda (c) (set! v (cons (char-&gt;integer c) v)))
   &quot;abcde&quot;)
  v)                                   ==&gt;  (101 100 99 98 97)
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-vector_002dfor_002deach"><span class="category">procedure: </span><span><strong>vector-for-each</strong> <em>proc vector1 vector2 &hellip;</em><a href='#index-vector_002dfor_002deach' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not
accept as many arguments as there are <i>vector</i>s.
The arguments to &lsquo;<samp>vector-for-each</samp>&rsquo; are like the arguments to &lsquo;<samp>vector-map</samp>&rsquo;, but &lsquo;<samp>vector-for-each</samp>&rsquo; calls <var>proc</var> for its side
effects rather than for its values.  Unlike &lsquo;<samp>vector-map</samp>&rsquo;, &lsquo;<samp>vector-for-each</samp>&rsquo; is guaranteed to call <var>proc</var> on the elements of
the <var>vector</var>s in order from the first element(s) to the last, and
the value returned by &lsquo;<samp>vector-for-each</samp>&rsquo; is unspecified.
If more than one <var>vector</var> is given and not all vectors have the same length,
&lsquo;<samp>vector-for-each</samp>&rsquo; terminates when the shortest vector runs out.
It is an error for <var>proc</var> to mutate any of the vectors.
</p>

<div class="format">
<pre class="format"><tt>(let ((v (make-list 5)))
  (vector-for-each
   (lambda (i) (list-set! v i (* i i)))
   '#(0 1 2 3 4))
  v)                                   ==&gt;  (0 1 4 9 16)
</tt>
</pre></div>


</dd></dl>



<dl class="def">
<dt id="index-call_002dwith_002dcurrent_002dcontinuation"><span class="category">procedure: </span><span><strong>call-with-current-continuation</strong> <em>proc</em><a href='#index-call_002dwith_002dcurrent_002dcontinuation' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-call_002fcc"><span class="category">procedure: </span><span><strong>call/cc</strong> <em>proc</em><a href='#index-call_002fcc' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not accept one
argument.
The procedure &lsquo;<samp>call-with-current-continuation</samp>&rsquo; (or its
equivalent abbreviation &lsquo;<samp>call/cc</samp>&rsquo;) packages
the current continuation (see the rationale below) as an &ldquo;escape
procedure&rdquo; and passes it as an argument to
<span id="index-escape-procedure"></span>
<var>proc</var>.
The escape procedure is a Scheme procedure that, if it is
later called, will abandon whatever continuation is in effect at that later
time and will instead use the continuation that was in effect
when the escape procedure was created.  Calling the escape procedure
will cause the invocation of <var>before</var> and <var>after</var> thunks installed using
<code>dynamic-wind</code>.
<span id="index-dynamic_002dwind-1"></span>
</p>
<p>The escape procedure accepts the same number of arguments as the continuation to
the original call to <tt>call-with-current-continuation</tt>.
Most continuations take only one value.
Continuations created by the &lsquo;<samp>call-with-values</samp>&rsquo;
procedure (including the initialization expressions of
&lsquo;<samp>define-values</samp>&rsquo;, &lsquo;<samp>let-values</samp>&rsquo;, and &lsquo;<samp>let*-values</samp>&rsquo; expressions),
take the number of values that the consumer expects.
The continuations of all non-final expressions within a sequence
of expressions, such as in &lsquo;<samp>lambda</samp>&rsquo;, &lsquo;<samp>case-lambda</samp>&rsquo;, &lsquo;<samp>begin</samp>&rsquo;,
&lsquo;<samp>let</samp>&rsquo;, &lsquo;<samp>let*</samp>&rsquo;, &lsquo;<samp>letrec</samp>&rsquo;, &lsquo;<samp>letrec*</samp>&rsquo;, &lsquo;<samp>let-values</samp>&rsquo;, 
&lsquo;<samp>let*-values</samp>&rsquo;, &lsquo;<samp>let-syntax</samp>&rsquo;, &lsquo;<samp>letrec-syntax</samp>&rsquo;, &lsquo;<samp>parameterize</samp>&rsquo;,
&lsquo;<samp>guard</samp>&rsquo;, &lsquo;<samp>case</samp>&rsquo;, &lsquo;<samp>cond</samp>&rsquo;, &lsquo;<samp>when</samp>&rsquo;, and &lsquo;<samp>unless</samp>&rsquo; expressions,
take an arbitrary number of values because they discard the values passed
to them in any event.
The effect of passing no values or more than one value to continuations
that were not created in one of these ways is unspecified.
</p>

<p>The escape procedure that is passed to <var>proc</var> has
unlimited extent just like any other procedure in Scheme.  It can be stored
in variables or data structures and can be called as many times as desired.
However, like the &lsquo;<samp>raise</samp>&rsquo; and &lsquo;<samp>error</samp>&rsquo; procedures, it never
returns to its caller.
</p>
<p>The following examples show only the simplest ways in which
&lsquo;<samp>call-with-current-continuation</samp>&rsquo; is used.  If all real uses were as
simple as these examples, there would be no need for a procedure with
the power of &lsquo;<samp>call-with-current-continuation</samp>&rsquo;.
</p>

<div class="format">
<pre class="format"><tt>(call-with-current-continuation
  (lambda (exit)
    (for-each (lambda (x)
                (if (negative? x)
                    (exit x)))
              '(54 0 37 -3 245 19))
    #t))                               ==&gt;  -3

(define list-length
  (lambda (obj)
    (call-with-current-continuation
      (lambda (return)
        (letrec ((r
                  (lambda (obj)
                    (cond ((null? obj) 0)
                          ((pair? obj)
                           (+ (r (cdr obj)) 1))
                          (else (return #f))))))
          (r obj))))))

(list-length '(1 2 3 4))               ==&gt;  4

(list-length '(a b . c))               ==&gt;  #f
</tt>
</pre></div>



<blockquote>
<p><em>Rationale:</em>
</p>
<p>A common use of &lsquo;<samp>call-with-current-continuation</samp>&rsquo; is for
structured, non-local exits from loops or procedure bodies, but in fact
&lsquo;<samp>call-with-current-continuation</samp>&rsquo; is useful for implementing a
wide variety of advanced control structures.
In fact, &lsquo;<samp>raise</samp>&rsquo; and &lsquo;<samp>guard</samp>&rsquo; provide a more structured mechanism
for non-local exits.
</p>
<p>Whenever a Scheme expression is evaluated there is a
<em>continuation</em> wanting the result of the expression.  The continuation
<span id="index-continuation"></span>
represents an entire (default) future for the computation.  If the expression is
evaluated at the REPL, for example, then the continuation might take the
result, print it on the screen, prompt for the next input, evaluate it, and
so on forever.  Most of the time the continuation includes actions
specified by user code, as in a continuation that will take the result,
multiply it by the value stored in a local variable, add seven, and give
the answer to the REPL&rsquo;s continuation to be printed.  Normally these
ubiquitous continuations are hidden behind the scenes and programmers do not
think much about them.  On rare occasions, however, a programmer
needs to deal with continuations explicitly.
The &lsquo;<samp>call-with-current-continuation</samp>&rsquo; procedure allows Scheme programmers to do
that by creating a procedure that acts just like the current
continuation.
</p>


</blockquote>





</dd></dl>


<dl class="def">
<dt id="index-values"><span class="category">procedure: </span><span><strong>values</strong> <em>obj &hellip;</em><a href='#index-values' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Delivers all of its arguments to its continuation.
The <tt>values</tt> procedure might be defined as follows:
</p>
<div class="format">
<pre class="format"><tt>(define (values . things)
  (call-with-current-continuation 
    (lambda (cont) (apply cont things))))
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-call_002dwith_002dvalues"><span class="category">procedure: </span><span><strong>call-with-values</strong> <em>producer consumer</em><a href='#index-call_002dwith_002dvalues' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Calls its <var>producer</var> argument with no arguments and
a continuation that, when passed some values, calls the
<var>consumer</var> procedure with those values as arguments.
The continuation for the call to <var>consumer</var> is the
continuation of the call to <tt>call-with-values</tt>.
</p>

<div class="format">
<pre class="format"><tt>(call-with-values (lambda () (values 4 5))
                  (lambda (a b) b))
                                                   ==&gt;  5

(call-with-values * -)                             ==&gt;  -1
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-dynamic_002dwind"><span class="category">procedure: </span><span><strong>dynamic-wind</strong> <em>before thunk after</em><a href='#index-dynamic_002dwind' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Calls <var>thunk</var> without arguments, returning the result(s) of this call.
<var>Before</var> and <var>after</var> are called, also without arguments, as required
by the following rules.  Note that, in the absence of calls to continuations
captured using <code>call-with-current-continuation</code>, the three arguments are
<span id="index-call_002dwith_002dcurrent_002dcontinuation-2"></span>
called once each, in order.  <var>Before</var> is called whenever execution
enters the dynamic extent of the call to <var>thunk</var> and <var>after</var> is called
whenever it exits that dynamic extent.  The dynamic extent of a procedure
call is the period between when the call is initiated and when it
returns.
The <var>before</var> and <var>after</var> thunks are called in the same dynamic
environment as the call to &lsquo;<samp>dynamic-wind</samp>&rsquo;.
In Scheme, because of &lsquo;<samp>call-with-current-continuation</samp>&rsquo;, the
dynamic extent of a call is not always a single, connected time period.
It is defined as follows:
</p>

<ul>
<li> The dynamic extent is entered when execution of the body of the
called procedure begins.

</li><li> The dynamic extent is also entered when execution is not within
the dynamic extent and a continuation is invoked that was captured
(using &lsquo;<samp>call-with-current-continuation</samp>&rsquo;) during the dynamic extent.

</li><li> It is exited when the called procedure returns.

</li><li> It is also exited when execution is within the dynamic extent and
a continuation is invoked that was captured while not within the
dynamic extent.

</li></ul>


<p>If a second call to &lsquo;<samp>dynamic-wind</samp>&rsquo; occurs within the dynamic extent of the
call to <var>thunk</var> and then a continuation is invoked in such a way that the
<var>after</var>s from these two invocations of &lsquo;<samp>dynamic-wind</samp>&rsquo; are both to be
called, then the <var>after</var> associated with the second (inner) call to
&lsquo;<samp>dynamic-wind</samp>&rsquo; is called first.
</p>
<p>If a second call to &lsquo;<samp>dynamic-wind</samp>&rsquo; occurs within the dynamic extent of the
call to <var>thunk</var> and then a continuation is invoked in such a way that the
<var>before</var>s from these two invocations of &lsquo;<samp>dynamic-wind</samp>&rsquo; are both to be
called, then the <var>before</var> associated with the first (outer) call to
&lsquo;<samp>dynamic-wind</samp>&rsquo; is called first.
</p>
<p>If invoking a continuation requires calling the <var>before</var> from one call
to &lsquo;<samp>dynamic-wind</samp>&rsquo; and the <var>after</var> from another, then the <var>after</var>
is called first.
</p>

<p>The effect of using a captured continuation to enter or exit the dynamic
extent of a call to <var>before</var> or <var>after</var> is unspecified.
</p>

<div class="format">
<pre class="format"><tt>(let ((path '())
      (c #f))
  (let ((add (lambda (s)
               (set! path (cons s path)))))
    (dynamic-wind
      (lambda () (add 'connect))
      (lambda ()
        (add (call-with-current-continuation
               (lambda (c0)
                 (set! c c0)
                 'talk1))))
      (lambda () (add 'disconnect)))
    (if (&lt; (length path) 4)
        (c 'talk2)
        (reverse path))))
    
          ==&gt; (connect talk1 disconnect
               connect talk2 disconnect)
</tt>
</pre></div>

</dd></dl>

<hr>
</div>
<div class="section" id="Exceptions">
<div class="header">
<p>
Next: <a href="#Environments-and-evaluation" accesskey="n" rel="next">Environments and evaluation</a>, Previous: <a href="#Control-features" accesskey="p" rel="prev">Control features</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Exceptions-1"></span><h3 class="section">6.11 Exceptions</h3>

<span id="index-exceptions"></span>


<p>This section describes Scheme&rsquo;s exception-handling and
exception-raising procedures.
For the concept of Scheme exceptions, see section <a href="#Error-situations-and-unspecified-behavior">Error situations and unspecified behavior</a>.
See also &lsquo;guard&rsquo; for the &lsquo;<samp>guard</samp>&rsquo; syntax.
</p>
<p><em>Exception handler</em>s are one-argument procedures that determine the
<span id="index-exception-handler"></span>
action the program takes when an exceptional situation is signaled.
The system implicitly maintains a current exception handler
in the dynamic environment.
</p>
<p>The program raises an exception by
<span id="index-current-exception-handler"></span>
invoking the current exception handler, passing it an object
encapsulating information about the exception.  Any procedure
accepting one argument can serve as an exception handler and any
object can be used to represent an exception.
</p>

<dl class="def">
<dt id="index-with_002dexception_002dhandler"><span class="category">procedure: </span><span><strong>with-exception-handler</strong> <em><var>handler</var> <var>thunk</var></em><a href='#index-with_002dexception_002dhandler' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>handler</var> does not accept one argument.
It is also an error if <var>thunk</var> does not accept zero arguments.
The &lsquo;<samp>with-exception-handler</samp>&rsquo; procedure returns the results of invoking
<var>thunk</var>.  <var>Handler</var> is installed as the current
exception handler 
in the dynamic environment used for the invocation of <var>thunk</var>.
</p>

<div class="format">
<pre class="format"><tt>(call-with-current-continuation
 (lambda (k)
  (with-exception-handler
   (lambda (x)
    (display &quot;condition: &quot;)
    (write x)
    (newline)
    (k 'exception))
   (lambda ()
    (+ 1 (raise 'an-error))))))
                                       ==&gt; exception
          <em>and prints</em>  condition: an-error

(with-exception-handler
 (lambda (x)
  (display &quot;something went wrong\n&quot;))
 (lambda ()
  (+ 1 (raise 'an-error))))
          <em>prints</em>  something went wrong
</tt>
</pre></div>


<p>After printing, the second example then raises another exception.
</p></dd></dl>


<dl class="def">
<dt id="index-raise"><span class="category">procedure: </span><span><strong>raise</strong> <em><var>obj</var></em><a href='#index-raise' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Raises an exception by invoking the current exception
handler on <var>obj</var>. The handler is called with the same
dynamic environment as that of the call to &lsquo;<samp>raise</samp>&rsquo;, except that
the current exception handler is the one that was in place when the
handler being called was installed.  If the handler returns, a secondary
exception is raised in the same dynamic environment as the handler.
The relationship between <var>obj</var> and the object raised by
the secondary exception is unspecified.
</p></dd></dl>


<dl class="def">
<dt id="index-raise_002dcontinuable"><span class="category">procedure: </span><span><strong>raise-continuable</strong> <em><var>obj</var></em><a href='#index-raise_002dcontinuable' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Raises an exception by invoking the current
exception handler on <var>obj</var>. The handler is called with
the same dynamic environment as the call to
&lsquo;<samp>raise-continuable</samp>&rsquo;, except that: (1) the current
exception handler is the one that was in place when the handler being
called was installed, and (2) if the handler being called returns,
then it will again become the current exception handler.  If the
handler returns, the values it returns become the values returned by
the call to &lsquo;<samp>raise-continuable</samp>&rsquo;.
</p></dd></dl>


<div class="example">
<pre class="example">

(with-exception-handler
  (lambda (con)
    (cond
      ((string? con)
       (display con))
      (else
       (display &quot;a warning has been issued&quot;)))
    42)
  (lambda ()
    (+ (raise-continuable &quot;should be a number&quot;)
       23)))
   <i>prints:</i> should be a number
                                       ==&gt; 65

</pre></div>



<dl class="def">
<dt id="index-error-1"><span class="category">procedure: </span><span><strong>error</strong> <em><var>message</var> <var>obj</var> &hellip;</em><a href='#index-error-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><var>Message</var> should be a string.
Raises an exception as if by calling
&lsquo;<samp>raise</samp>&rsquo; on a newly allocated implementation-defined object which encapsulates
the information provided by <var>message</var>,
as well as any <var>obj</var>s, known as the <em>irritants</em>.
<span id="index-irritants"></span>
The procedure &lsquo;<samp>error-object?</samp>&rsquo; must return <tt>#t</tt> on such objects.
</p>

<div class="format">
<pre class="format"><tt>(define (null-list? l)
  (cond ((pair? l) #f)
        ((null? l) #t)
        (else
          (error
            &quot;null-list?: argument out of domain&quot;
            l))))
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-error_002dobject_003f"><span class="category">procedure: </span><span><strong>error-object?</strong> <em>obj</em><a href='#index-error_002dobject_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is an object created by &lsquo;<samp>error</samp>&rsquo; 
or one of an implementation-defined set of objects.  Otherwise, it returns
<tt>#f</tt>.  
The objects used to signal errors, including those which satisfy the
predicates &lsquo;<samp>file-error?</samp>&rsquo; and &lsquo;<samp>read-error?</samp>&rsquo;, may or may not
satisfy &lsquo;<samp>error-object?</samp>&rsquo;.
</p>
</dd></dl>


<dl class="def">
<dt id="index-error_002dobject_002dmessage"><span class="category">procedure: </span><span><strong>error-object-message</strong> <em>error-object</em><a href='#index-error_002dobject_002dmessage' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the message encapsulated by <var>error-object</var>.
</p>
</dd></dl>


<dl class="def">
<dt id="index-error_002dobject_002dirritants"><span class="category">procedure: </span><span><strong>error-object-irritants</strong> <em>error-object</em><a href='#index-error_002dobject_002dirritants' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a list of the irritants encapsulated by <var>error-object</var>.
</p>
</dd></dl>


<dl class="def">
<dt id="index-read_002derror_003f"><span class="category">procedure: </span><span><strong>read-error?</strong> <em>obj</em><a href='#index-read_002derror_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-file_002derror_003f"><span class="category">procedure: </span><span><strong>file-error?</strong> <em>obj</em><a href='#index-file_002derror_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Error type predicates.  Returns <tt>#t</tt> if <var>obj</var> is an
object raised by the &lsquo;<samp>read</samp>&rsquo; procedure or by the inability to open
an input or output port on a file, respectively.  Otherwise, it
returns <tt>#f</tt>.
</p>
</dd></dl>

<hr>
</div>
<div class="section" id="Environments-and-evaluation">
<div class="header">
<p>
Next: <a href="#Input-and-output" accesskey="n" rel="next">Input and output</a>, Previous: <a href="#Exceptions" accesskey="p" rel="prev">Exceptions</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Environments-and-evaluation-1"></span><h3 class="section">6.12 Environments and evaluation</h3>

<span id="index-environments-and-evaluation"></span>


<dl class="def">
<dt id="index-environment-1"><span class="category">eval library procedure: </span><span><strong>environment</strong> <em>list1 &hellip;</em><a href='#index-environment-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>This procedure returns a specifier for the environment that results by
starting with an empty environment and then importing each <var>list</var>,
considered as an import set, into it.  (See section see <a href="#Libraries">Libraries</a> for
a description of import sets.)  The bindings of the environment
represented by the specifier are immutable, as is the environment itself.
</p>
</dd></dl>


<dl class="def">
<dt id="index-scheme_002dreport_002denvironment"><span class="category">r5rs library procedure: </span><span><strong>scheme-report-environment</strong> <em>version</em><a href='#index-scheme_002dreport_002denvironment' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>If <var>version</var> is equal to &lsquo;<samp>5</samp>&rsquo;,
corresponding to R<sup>5</sup>RS,
&lsquo;<samp>scheme-report-environment</samp>&rsquo; returns a specifier for an
environment that contains only the bindings
defined in the R<sup>5</sup>RS library.
Implementations must support this value of <var>version</var>.
</p>
<p>Implementations may also support other values of <var>version</var>, in which
case they return a specifier for an environment containing bindings corresponding to the specified version of the report.
If <var>version</var>
is neither &lsquo;<samp>5</samp>&rsquo; nor another value supported by
the implementation, an error is signaled.
</p>

<p>The effect of defining or assigning (through the use of &lsquo;<samp>eval</samp>&rsquo;)
an identifier bound in a &lsquo;<samp>scheme-report-environment</samp>&rsquo; (for example
&lsquo;<samp>car</samp>&rsquo;) is unspecified.  Thus both the environment and the bindings
it contains may be immutable.
</p>
</dd></dl>


<dl class="def">
<dt id="index-null_002denvironment"><span class="category">r5rs library procedure: </span><span><strong>null-environment</strong> <em>version</em><a href='#index-null_002denvironment' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>If <var>version</var> is equal to &lsquo;<samp>5</samp>&rsquo;,
corresponding to R<sup>5</sup>RS,
the &lsquo;<samp>null-environment</samp>&rsquo; procedure returns
a specifier for an environment that contains only the
bindings for all syntactic keywords
defined in the R<sup>5</sup>RS library.
Implementations must support this value of <var>version</var>.
</p>
<p>Implementations may also support other values of <var>version</var>, in which
case they return a specifier for an environment containing appropriate bindings corresponding to the specified version of the report.
If <var>version</var>
is neither &lsquo;<samp>5</samp>&rsquo; nor another value supported by
the implementation, an error is signaled.
</p>
<p>The effect of defining or assigning (through the use of &lsquo;<samp>eval</samp>&rsquo;)
an identifier bound in a &lsquo;<samp>scheme-report-environment</samp>&rsquo; (for example
&lsquo;<samp>car</samp>&rsquo;) is unspecified.  Thus both the environment and the bindings
it contains may be immutable.
</p>
</dd></dl>


<dl class="def">
<dt id="index-interaction_002denvironment"><span class="category">repl library procedure: </span><span><strong>interaction-environment</strong><a href='#index-interaction_002denvironment' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>This procedure returns a specifier for a mutable environment that contains an
implementation-defined set of bindings, typically a superset of
those exported by &lsquo;<samp>(scheme base)</samp>&rsquo;.  The intent is that this procedure
will return the environment in which the implementation would evaluate
expressions entered by the user into a REPL.
</p>
</dd></dl>


<dl class="def">
<dt id="index-eval"><span class="category">eval library procedure: </span><span><strong>eval</strong> <em>expr-or-def environment-specifier</em><a href='#index-eval' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>If <var>expr-or-def</var> is an expression, it is evaluated in the
specified environment and its values are returned.
If it is a definition, the specified identifier(s) are defined in the specified
environment, provided the environment is not immutable.
Implementations may extend &lsquo;<samp>eval</samp>&rsquo; to allow other objects.
</p>

<div class="format">
<pre class="format"><tt>(eval '(* 7 3) (environment '(scheme base)))
                                                   ==&gt;  21

(let ((f (eval '(lambda (f x) (f x x))
               (null-environment 5))))
  (f + 10))
                                                   ==&gt;  20
(eval '(define foo 32)
      (environment '(scheme base)))
                                                   ==&gt; <i></i> error is signaled
</tt>
</pre></div>


</dd></dl>

<hr>
</div>
<div class="section" id="Input-and-output">
<div class="header">
<p>
Next: <a href="#System-interface" accesskey="n" rel="next">System interface</a>, Previous: <a href="#Environments-and-evaluation" accesskey="p" rel="prev">Environments and evaluation</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Input-and-output-1"></span><h3 class="section">6.13 Input and output</h3>


<span id="index-input-and-output"></span>

<ul class="section-toc">
<li><a href="#Ports" accesskey="1">Ports</a></li>
<li><a href="#Input" accesskey="2">Input</a></li>
<li><a href="#Output" accesskey="3">Output</a></li>
</ul>
<hr>
<div class="subsection" id="Ports">
<div class="header">
<p>
Next: <a href="#Input" accesskey="n" rel="next">Input</a>, Previous: <a href="#Input-and-output" accesskey="p" rel="prev">Input and output</a>, Up: <a href="#Input-and-output" accesskey="u" rel="up">Input and output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Ports-1"></span><h4 class="subsection">6.13.1 Ports</h4>

<span id="index-ports"></span>


<p>Ports represent input and output devices.  To Scheme, an input port is
a Scheme object that can deliver data upon command, while an output
port is a Scheme object that can accept data.
<span id="index-port"></span>
Whether the input and output port types are disjoint is
implementation-dependent.
</p>
<p>Different <em>port types</em> operate on different data.  Scheme
implementations are required to support <em>textual ports</em>
and <em>binary ports</em>, but may also provide other port types.
</p>
<p>A textual port supports reading or writing of individual characters
from or to a backing store containing characters
using &lsquo;<samp>read-char</samp>&rsquo; and &lsquo;<samp>write-char</samp>&rsquo; below, and it supports operations
defined in terms of characters, such as &lsquo;<samp>read</samp>&rsquo; and &lsquo;<samp>write</samp>&rsquo;.
</p>
<p>A binary port supports reading or writing of individual bytes from
or to a backing store containing bytes using &lsquo;<samp>read-u8</samp>&rsquo; and &lsquo;<samp>write-u8</samp>&rsquo; below, as well as operations defined in terms of bytes.
Whether the textual and binary port types are disjoint is
implementation-dependent.
</p>
<p>Ports can be used to access files, devices, and similar things on the host
system on which the Scheme program is running.
</p>

<dl class="def">
<dt id="index-call_002dwith_002dport"><span class="category">procedure: </span><span><strong>call-with-port</strong> <em>port proc</em><a href='#index-call_002dwith_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not accept one argument.
The &lsquo;<samp>call-with-port</samp>&rsquo;
procedure calls <var>proc</var> with <var>port</var> as an argument.  
If <var>proc</var> returns,
then the port is closed automatically and the values yielded by the
<var>proc</var> are returned.  If <var>proc</var> does not return, then 
the port must not be closed automatically unless it is possible to
prove that the port will never again be used for a read or write
operation.
</p>

<blockquote>
<p><em>Rationale:</em>
Because Scheme&rsquo;s escape procedures have unlimited extent, it  is
possible to escape from the current continuation but later to resume it. 
If implementations were permitted to close the port on any escape from the
current continuation, then it would be impossible to write portable code using
both &lsquo;<samp>call-with-current-continuation</samp>&rsquo; and &lsquo;<samp>call-with-port</samp>&rsquo;.
</p></blockquote>
 

</dd></dl>


<dl class="def">
<dt id="index-call_002dwith_002dinput_002dfile"><span class="category">file library procedure: </span><span><strong>call-with-input-file</strong> <em>string proc</em><a href='#index-call_002dwith_002dinput_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-call_002dwith_002doutput_002dfile"><span class="category">file library procedure: </span><span><strong>call-with-output-file</strong> <em>string proc</em><a href='#index-call_002dwith_002doutput_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>proc</var> does not accept one argument.
These procedures obtain a
textual port obtained by opening the named file for input or output
as if by &lsquo;<samp>open-input-file</samp>&rsquo; or &lsquo;<samp>open-output-file</samp>&rsquo;.  
The port and <var>proc</var> are then passed to a procedure equivalent
to &lsquo;<samp>call-with-port</samp>&rsquo;.
</p></dd></dl>


<dl class="def">
<dt id="index-input_002dport_003f"><span class="category">procedure: </span><span><strong>input-port?</strong> <em>obj</em><a href='#index-input_002dport_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-output_002dport_003f"><span class="category">procedure: </span><span><strong>output-port?</strong> <em>obj</em><a href='#index-output_002dport_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-textual_002dport_003f"><span class="category">procedure: </span><span><strong>textual-port?</strong> <em>obj</em><a href='#index-textual_002dport_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-binary_002dport_003f"><span class="category">procedure: </span><span><strong>binary-port?</strong> <em>obj</em><a href='#index-binary_002dport_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-port_003f"><span class="category">procedure: </span><span><strong>port?</strong> <em>obj</em><a href='#index-port_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>These procedures return <tt>#t</tt> if <var>obj</var> is an input port, output port, 
textual port, binary port, or any
kind of port, respectively.  Otherwise they return <tt>#f</tt>.
</p>
</dd></dl>



<dl class="def">
<dt id="index-input_002dport_002dopen_003f"><span class="category">procedure: </span><span><strong>input-port-open?</strong> <em>port</em><a href='#index-input_002dport_002dopen_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-output_002dport_002dopen_003f"><span class="category">procedure: </span><span><strong>output-port-open?</strong> <em>port</em><a href='#index-output_002dport_002dopen_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>port</var> is still open and capable of
performing input or output, respectively, and <tt>#f</tt> otherwise.
</p>

</dd></dl>



<dl class="def">
<dt id="index-current_002dinput_002dport"><span class="category">procedure: </span><span><strong>current-input-port</strong><a href='#index-current_002dinput_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-current_002doutput_002dport"><span class="category">procedure: </span><span><strong>current-output-port</strong><a href='#index-current_002doutput_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-current_002derror_002dport"><span class="category">procedure: </span><span><strong>current-error-port</strong><a href='#index-current_002derror_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the current default input port, output port, or error port (an
output port), respectively.  These procedures are parameter objects, which can be
overridden with &lsquo;<samp>parameterize</samp>&rsquo; (see
section see <a href="#Dynamic-bindings">Dynamic bindings</a>).  The initial bindings for these
are implementation-defined textual ports.
</p>
</dd></dl>



<dl class="def">
<dt id="index-with_002dinput_002dfrom_002dfile"><span class="category">file library procedure: </span><span><strong>with-input-from-file</strong> <em>string thunk</em><a href='#index-with_002dinput_002dfrom_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-with_002doutput_002dto_002dfile"><span class="category">file library procedure: </span><span><strong>with-output-to-file</strong> <em>string thunk</em><a href='#index-with_002doutput_002dto_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The file is opened for input or output
as if by &lsquo;<samp>open-input-file</samp>&rsquo; or &lsquo;<samp>open-output-file</samp>&rsquo;, 
and the new port is made to be the value returned by
&lsquo;<samp>current-input-port</samp>&rsquo; or &lsquo;<samp>current-output-port</samp>&rsquo;
(as used by <tt>(read)</tt>, <tt>(write <var>obj</var>)</tt>, and so forth).
The <var>thunk</var> is then called with no arguments.  When the <var>thunk</var> returns,
the port is closed and the previous default is restored.
It is an error if <var>thunk</var> does not accept zero arguments.
Both procedures return the values yielded by <var>thunk</var>.
If an escape procedure
is used to escape from the continuation of these procedures, they
behave exactly as if the current input or output port had been bound
dynamically with &lsquo;<samp>parameterize</samp>&rsquo;.
</p>

</dd></dl>



<dl class="def">
<dt id="index-open_002dinput_002dfile"><span class="category">file library procedure: </span><span><strong>open-input-file</strong> <em>string</em><a href='#index-open_002dinput_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-open_002dbinary_002dinput_002dfile"><span class="category">file library procedure: </span><span><strong>open-binary-input-file</strong> <em>string</em><a href='#index-open_002dbinary_002dinput_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dd> 
<p>Takes a <var>string</var> for an existing file and returns a textual
input port or binary input port that is capable of delivering data from the
file.  If the file does not exist or cannot be opened, an error that satisfies &lsquo;<samp>file-error?</samp>&rsquo; is signaled.
</p>
</dd></dl>



<dl class="def">
<dt id="index-open_002doutput_002dfile"><span class="category">file library procedure: </span><span><strong>open-output-file</strong> <em>string</em><a href='#index-open_002doutput_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-open_002dbinary_002doutput_002dfile"><span class="category">file library procedure: </span><span><strong>open-binary-output-file</strong> <em>string</em><a href='#index-open_002dbinary_002doutput_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Takes a <var>string</var> naming an output file to be created and returns a
textual output port or binary output port that is capable of writing
data to a new file by that name.
</p>
<p>If a file with the given name already exists,
the effect is unspecified.
If the file cannot be opened,
an error that satisfies &lsquo;<samp>file-error?</samp>&rsquo; is signaled.
</p>
</dd></dl>



<dl class="def">
<dt id="index-close_002dport"><span class="category">procedure: </span><span><strong>close-port</strong> <em>port</em><a href='#index-close_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-close_002dinput_002dport"><span class="category">procedure: </span><span><strong>close-input-port</strong> <em>port</em><a href='#index-close_002dinput_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-close_002doutput_002dport"><span class="category">procedure: </span><span><strong>close-output-port</strong> <em>port</em><a href='#index-close_002doutput_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Closes the resource associated with <var>port</var>, rendering the <var>port</var>
incapable of delivering or accepting data.  
It is an error
to apply the last two procedures to a port which is not an input
or output port, respectively.
Scheme implementations may provide ports which are simultaneously
input and output ports, such as sockets; the &lsquo;<samp>close-input-port</samp>&rsquo;
and &lsquo;<samp>close-output-port</samp>&rsquo; procedures can then be used to close the
input and output sides of the port independently.
</p>
<p>These routines have no effect if the port has already been closed.
</p>

</dd></dl>


<dl class="def">
<dt id="index-open_002dinput_002dstring"><span class="category">procedure: </span><span><strong>open-input-string</strong> <em>string</em><a href='#index-open_002dinput_002dstring' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Takes a string and returns a textual input port that delivers
characters from the string.
If the string is modified, the effect is unspecified.
</p>
</dd></dl>


<dl class="def">
<dt id="index-open_002doutput_002dstring"><span class="category">procedure: </span><span><strong>open-output-string</strong><a href='#index-open_002doutput_002dstring' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a textual output port that will accumulate characters for
retrieval by &lsquo;<samp>get-output-string</samp>&rsquo;.
</p>
</dd></dl>


<dl class="def">
<dt id="index-get_002doutput_002dstring"><span class="category">procedure: </span><span><strong>get-output-string</strong> <em>port</em><a href='#index-get_002doutput_002dstring' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>port</var> was not created with
&lsquo;<samp>open-output-string</samp>&rsquo;.
Returns a string consisting of the
characters that have been output to the port so far in the order they
were output.
If the result string is modified, the effect is unspecified.
</p>

<div class="format">
<pre class="format"><tt>(parameterize
    ((current-output-port
      (open-output-string)))
    (display &quot;piece&quot;)
    (display &quot; by piece &quot;)
    (display &quot;by piece.&quot;)
    (newline)
    (get-output-string (current-output-port)))

          ==&gt; &quot;piece by piece by piece.\n&quot;
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-open_002dinput_002dbytevector"><span class="category">procedure: </span><span><strong>open-input-bytevector</strong> <em>bytevector</em><a href='#index-open_002dinput_002dbytevector' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Takes a bytevector and returns a binary input port that delivers
bytes from the bytevector.
</p>
</dd></dl>


<dl class="def">
<dt id="index-open_002doutput_002dbytevector"><span class="category">procedure: </span><span><strong>open-output-bytevector</strong><a href='#index-open_002doutput_002dbytevector' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a binary output port that will accumulate bytes for
retrieval by &lsquo;<samp>get-output-bytevector</samp>&rsquo;.
</p>
</dd></dl>


<dl class="def">
<dt id="index-get_002doutput_002dbytevector"><span class="category">procedure: </span><span><strong>get-output-bytevector</strong> <em>port</em><a href='#index-get_002doutput_002dbytevector' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>port</var> was not created with
&lsquo;<samp>open-output-bytevector</samp>&rsquo;.  Returns a bytevector consisting
of the bytes that have been output to the port so far in the
order they were output.
</p></dd></dl>


<hr>
</div>
<div class="subsection" id="Input">
<div class="header">
<p>
Next: <a href="#Output" accesskey="n" rel="next">Output</a>, Previous: <a href="#Ports" accesskey="p" rel="prev">Ports</a>, Up: <a href="#Input-and-output" accesskey="u" rel="up">Input and output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Input-1"></span><h4 class="subsection">6.13.2 Input</h4>

<span id="index-input"></span>


<p>If <var>port</var> is omitted from any input procedure, it defaults to the
value returned by &lsquo;<samp>(current-input-port)</samp>&rsquo;.
It is an error to attempt an input operation on a closed port.
</p>

<p> &nbsp;<!-- /@w -->  
</p><br>
<br>
<br>
<br>
<br>



<dl class="def">
<dt id="index-read"><span class="category">read library procedure: </span><span><strong>read</strong><a href='#index-read' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read-1"><span class="category">read library procedure: </span><span><strong>read</strong> <em>port</em><a href='#index-read-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>read</samp>&rsquo; procedure converts external representations of Scheme objects into the
objects themselves.  That is, it is a parser for the non-terminal
&lt;datum&gt; (see sections see <a href="#External-representation">External representations</a> and
see <a href="#Pairs-and-lists">Pairs and lists</a>).  It returns the next
object parsable from the given textual input <var>port</var>, updating
<var>port</var> to point to
the first character past the end of the external representation of the object.
</p>
<p>Implementations may support extended syntax to represent record types or
other types that do not have datum representations.
</p>
<p>If an end of file is encountered in the input before any
characters are found that can begin an object, then an end-of-file
object is returned.  The port remains open, and further attempts
to read will also return an end-of-file object.  If an end of file is
encountered after the beginning of an object&rsquo;s external representation,
but the external representation is incomplete and therefore not parsable,
an error that satisfies &lsquo;<samp>read-error?</samp>&rsquo; is signaled.
</p>
</dd></dl>


<dl class="def">
<dt id="index-read_002dchar"><span class="category">procedure: </span><span><strong>read-char</strong><a href='#index-read_002dchar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dchar-1"><span class="category">procedure: </span><span><strong>read-char</strong> <em>port</em><a href='#index-read_002dchar-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the next character available from the textual input <var>port</var>,
updating
the <var>port</var> to point to the following character.  If no more characters
are available, an end-of-file object is returned.  
</p>
</dd></dl>



<dl class="def">
<dt id="index-peek_002dchar"><span class="category">procedure: </span><span><strong>peek-char</strong><a href='#index-peek_002dchar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-peek_002dchar-1"><span class="category">procedure: </span><span><strong>peek-char</strong> <em>port</em><a href='#index-peek_002dchar-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the next character available from the textual input <var>port</var>,
but <em>without</em> updating
the <var>port</var> to point to the following character.  If no more characters
are available, an end-of-file object is returned.  
</p>

<blockquote>
<p><em>Note:</em>
The value returned by a call to &lsquo;<samp>peek-char</samp>&rsquo; is the same as the
value that would have been returned by a call to &lsquo;<samp>read-char</samp>&rsquo; with the
same <var>port</var>.  The only difference is that the very next call to
&lsquo;<samp>read-char</samp>&rsquo; or &lsquo;<samp>peek-char</samp>&rsquo; on that <var>port</var> will return the
value returned by the preceding call to &lsquo;<samp>peek-char</samp>&rsquo;.  In particular, a call
to &lsquo;<samp>peek-char</samp>&rsquo; on an interactive port will hang waiting for input
whenever a call to &lsquo;<samp>read-char</samp>&rsquo; would have hung.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-read_002dline"><span class="category">procedure: </span><span><strong>read-line</strong><a href='#index-read_002dline' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dline-1"><span class="category">procedure: </span><span><strong>read-line</strong> <em>port</em><a href='#index-read_002dline-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the next line of text available from the textual input
<var>port</var>, updating the <var>port</var> to point to the following character.
If an end of line is read, a string containing all of the text up to
(but not including) the end of line is returned, and the port is updated
to point just past the end of line. If an end of file is encountered
before any end of line is read, but some characters have been
read, a string containing those characters is returned. If an end of
file is encountered before any characters are read, an end-of-file
object is returned.  For the purpose of this procedure, an end of line
consists of either a linefeed character, a carriage return character, or a
sequence of a carriage return character followed by a linefeed character.
Implementations may also recognize other end of line characters or sequences.
</p>
</dd></dl>



<dl class="def">
<dt id="index-eof_002dobject_003f"><span class="category">procedure: </span><span><strong>eof-object?</strong> <em>obj</em><a href='#index-eof_002dobject_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if <var>obj</var> is an end-of-file object, otherwise returns
<tt>#f</tt>.  The precise set of end-of-file objects will vary among
implementations, but in any case no end-of-file object will ever be an object
that can be read in using &lsquo;<samp>read</samp>&rsquo;.
</p>
</dd></dl>


<dl class="def">
<dt id="index-eof_002dobject"><span class="category">procedure: </span><span><strong>eof-object</strong><a href='#index-eof_002dobject' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns an end-of-file object, not necessarily unique.
</p>
</dd></dl>



<dl class="def">
<dt id="index-char_002dready_003f"><span class="category">procedure: </span><span><strong>char-ready?</strong><a href='#index-char_002dready_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-char_002dready_003f-1"><span class="category">procedure: </span><span><strong>char-ready?</strong> <em>port</em><a href='#index-char_002dready_003f-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if a character is ready on the textual input <var>port</var> and
returns <tt>#f</tt> otherwise.  If &lsquo;<samp>char-ready</samp>&rsquo; returns <tt>#t</tt> then
the next &lsquo;<samp>read-char</samp>&rsquo; operation on the given <var>port</var> is guaranteed
not to hang.  If the <var>port</var> is at end of file then &lsquo;<samp>char-ready?</samp>&rsquo;
returns <tt>#t</tt>.  
</p>

<blockquote>
<p><em>Rationale:</em>
The &lsquo;<samp>char-ready?</samp>&rsquo; procedure exists to make it possible for a program to
accept characters from interactive ports without getting stuck waiting for
input.  Any input editors associated with such ports must ensure that
characters whose existence has been asserted by &lsquo;<samp>char-ready?</samp>&rsquo; cannot
be removed from the input.  If &lsquo;<samp>char-ready?</samp>&rsquo; were to return <tt>#f</tt> at end of
file, a port at end of file would be indistinguishable from an interactive
port that has no ready characters.
</p></blockquote>

</dd></dl>


<dl class="def">
<dt id="index-read_002dstring"><span class="category">procedure: </span><span><strong>read-string</strong> <em>k</em><a href='#index-read_002dstring' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dstring-1"><span class="category">procedure: </span><span><strong>read-string</strong> <em>k port</em><a href='#index-read_002dstring-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>

<p>Reads the next <var>k</var> characters, or as many as are available before the end of file,
from the textual
input <var>port</var> into a newly allocated string in left-to-right order
and returns the string.
If no characters are available before the end of file,
an end-of-file object is returned.
</p>
</dd></dl>



<dl class="def">
<dt id="index-read_002du8"><span class="category">procedure: </span><span><strong>read-u8</strong><a href='#index-read_002du8' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002du8-1"><span class="category">procedure: </span><span><strong>read-u8</strong> <em>port</em><a href='#index-read_002du8-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the next byte available from the binary input <var>port</var>,
updating the <var>port</var> to point to the following byte.  
If no more bytes are
available, an end-of-file object is returned.  
</p>
</dd></dl>


<dl class="def">
<dt id="index-peek_002du8"><span class="category">procedure: </span><span><strong>peek-u8</strong><a href='#index-peek_002du8' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-peek_002du8-1"><span class="category">procedure: </span><span><strong>peek-u8</strong> <em>port</em><a href='#index-peek_002du8-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the next byte available from the binary input <var>port</var>,
but <em>without</em> updating the <var>port</var> to point to the following
byte.  If no more bytes are available, an end-of-file object is returned.  
</p>
</dd></dl>


<dl class="def">
<dt id="index-u8_002dready_003f"><span class="category">procedure: </span><span><strong>u8-ready?</strong><a href='#index-u8_002dready_003f' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-u8_002dready_003f-1"><span class="category">procedure: </span><span><strong>u8-ready?</strong> <em>port</em><a href='#index-u8_002dready_003f-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <tt>#t</tt> if a byte is ready on the binary input <var>port</var>
and returns <tt>#f</tt> otherwise.  If &lsquo;<samp>u8-ready?</samp>&rsquo; returns
<tt>#t</tt> then the next &lsquo;<samp>read-u8</samp>&rsquo; operation on the given
<var>port</var> is guaranteed not to hang.  If the <var>port</var> is at end of
file then &lsquo;<samp>u8-ready?</samp>&rsquo; returns <tt>#t</tt>.  
</p>
</dd></dl>


<dl class="def">
<dt id="index-read_002dbytevector"><span class="category">procedure: </span><span><strong>read-bytevector</strong> <em>k</em><a href='#index-read_002dbytevector' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dbytevector-1"><span class="category">procedure: </span><span><strong>read-bytevector</strong> <em>k port</em><a href='#index-read_002dbytevector-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Reads the next <var>k</var> bytes, or as many as are available before the end of file,
from the binary
input <var>port</var> into a newly allocated bytevector in left-to-right order
and returns the bytevector.
If no bytes are available before the end of file,
an end-of-file object is returned.
</p>
</dd></dl>


<dl class="def">
<dt id="index-read_002dbytevector_0021"><span class="category">procedure: </span><span><strong>read-bytevector!</strong> <em>bytevector</em><a href='#index-read_002dbytevector_0021' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dbytevector_0021-1"><span class="category">procedure: </span><span><strong>read-bytevector!</strong> <em>bytevector port</em><a href='#index-read_002dbytevector_0021-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dbytevector_0021-2"><span class="category">procedure: </span><span><strong>read-bytevector!</strong> <em>bytevector port start</em><a href='#index-read_002dbytevector_0021-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-read_002dbytevector_0021-3"><span class="category">procedure: </span><span><strong>read-bytevector!</strong> <em>bytevector port start end</em><a href='#index-read_002dbytevector_0021-3' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Reads the next end - start bytes, or as many as are available
before the end of file,
from the binary
input <var>port</var> into <var>bytevector</var> in left-to-right order
beginning at the <var>start</var> position.  If <var>end</var> is not supplied,
reads until the end of <var>bytevector</var> has been reached.  If
<var>start</var> is not supplied, reads beginning at position 0.
Returns the number of bytes read.
If no bytes are available, an end-of-file object is returned.
</p>
</dd></dl>


<hr>
</div>
<div class="subsection" id="Output">
<div class="header">
<p>
Previous: <a href="#Input" accesskey="p" rel="prev">Input</a>, Up: <a href="#Input-and-output" accesskey="u" rel="up">Input and output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Output-1"></span><h4 class="subsection">6.13.3 Output</h4>

<span id="index-output"></span>


<p>If <var>port</var> is omitted from any output procedure, it defaults to the
value returned by &lsquo;<samp>(current-output-port)</samp>&rsquo;.
It is an error to attempt an output operation on a closed port.
</p>

<p> <!-- /@w -->
</p><br>
<br>
<br>
<br>
<br>


<dl class="def">
<dt id="index-write"><span class="category">write library procedure: </span><span><strong>write</strong> <em>obj</em><a href='#index-write' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write-1"><span class="category">write library procedure: </span><span><strong>write</strong> <em>obj port</em><a href='#index-write-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes a representation of <var>obj</var> to the given textual output
<var>port</var>.  Strings
that appear in the written representation are enclosed in quotation marks, and
within those strings backslash and quotation mark characters are
escaped by backslashes.  Symbols that contain non-ASCII characters
are escaped with vertical lines.
Character objects are written using the &lsquo;<samp>#\</samp>&rsquo; notation.
</p>
<p>If <var>obj</var> contains cycles which would cause an infinite loop using
the normal written representation, then at least the objects that form
part of the cycle must be represented using datum labels as described
in section <a href="#Datum-labels">Datum labels</a>.  Datum labels must not be used if there
are no cycles.
</p>
<p>Implementations may support extended syntax to represent record types or
other types that do not have datum representations.
</p>
<p>The &lsquo;<samp>write</samp>&rsquo; procedure returns an unspecified value.
</p>
</dd></dl>


<dl class="def">
<dt id="index-write_002dshared"><span class="category">write library procedure: </span><span><strong>write-shared</strong> <em>obj</em><a href='#index-write_002dshared' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dshared-1"><span class="category">write library procedure: </span><span><strong>write-shared</strong> <em>obj port</em><a href='#index-write_002dshared-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>write-shared</samp>&rsquo; procedure is the same as &lsquo;<samp>write</samp>&rsquo;, except that
shared structure must be represented using datum labels for all pairs
and vectors that appear more than once in the output.
</p>
</dd></dl>


<dl class="def">
<dt id="index-write_002dsimple"><span class="category">write library procedure: </span><span><strong>write-simple</strong> <em>obj</em><a href='#index-write_002dsimple' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dsimple-1"><span class="category">write library procedure: </span><span><strong>write-simple</strong> <em>obj port</em><a href='#index-write_002dsimple-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>The &lsquo;<samp>write-simple</samp>&rsquo; procedure is the same as &lsquo;<samp>write</samp>&rsquo;, except that shared structure is
never represented using datum labels.  This can cause &lsquo;<samp>write-simple</samp>&rsquo; not to
terminate if <var>obj</var> contains circular structure.
</p>
</dd></dl>



<dl class="def">
<dt id="index-display"><span class="category">write library procedure: </span><span><strong>display</strong> <em>obj</em><a href='#index-display' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-display-1"><span class="category">write library procedure: </span><span><strong>display</strong> <em>obj port</em><a href='#index-display-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes a representation of <var>obj</var> to the given textual output <var>port</var>.
Strings that appear in the written representation are output as if by
&lsquo;<samp>write-string</samp>&rsquo; instead of by &lsquo;<samp>write</samp>&rsquo;.
Symbols are not escaped.  Character
objects appear in the representation as if written by &lsquo;<samp>write-char</samp>&rsquo;
instead of by &lsquo;<samp>write</samp>&rsquo;.
</p>
<p>The &lsquo;<samp>display</samp>&rsquo; representation of other objects is unspecified.
However, &lsquo;<samp>display</samp>&rsquo; must not loop forever on 
self-referencing pairs, vectors, or records.  Thus if the
normal &lsquo;<samp>write</samp>&rsquo; representation is used, datum labels are needed
to represent cycles as in &lsquo;<samp>write</samp>&rsquo;.
</p>
<p>Implementations may support extended syntax to represent record types or
other types that do not have datum representations.
</p>
<p>The &lsquo;<samp>display</samp>&rsquo; procedure returns an unspecified value.
</p>

<blockquote>
<p><em>Rationale:</em>
The &lsquo;<samp>write</samp>&rsquo; procedure is intended
for producing machine-readable output and &lsquo;<samp>display</samp>&rsquo; for producing
human-readable output.  
</p></blockquote>

</dd></dl>



<dl class="def">
<dt id="index-newline"><span class="category">procedure: </span><span><strong>newline</strong><a href='#index-newline' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-newline-1"><span class="category">procedure: </span><span><strong>newline</strong> <em>port</em><a href='#index-newline-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes an end of line to textual output <var>port</var>.  Exactly how this
is done differs
from one operating system to another.  Returns an unspecified value.
</p>
</dd></dl>



<dl class="def">
<dt id="index-write_002dchar"><span class="category">procedure: </span><span><strong>write-char</strong> <em>char</em><a href='#index-write_002dchar' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dchar-1"><span class="category">procedure: </span><span><strong>write-char</strong> <em>char port</em><a href='#index-write_002dchar-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes the character <var>char</var> (not an external representation of the
character) to the given textual output <var>port</var> and returns an unspecified
value.  
</p>
</dd></dl>


<dl class="def">
<dt id="index-write_002dstring"><span class="category">procedure: </span><span><strong>write-string</strong> <em>string</em><a href='#index-write_002dstring' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dstring-1"><span class="category">procedure: </span><span><strong>write-string</strong> <em>string port</em><a href='#index-write_002dstring-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dstring-2"><span class="category">procedure: </span><span><strong>write-string</strong> <em>string port start</em><a href='#index-write_002dstring-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dstring-3"><span class="category">procedure: </span><span><strong>write-string</strong> <em>string port start end</em><a href='#index-write_002dstring-3' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes the characters of <var>string</var>
from <var>start</var> to <var>end</var>
in left-to-right order to the
textual output <var>port</var>.
</p>
</dd></dl>


<dl class="def">
<dt id="index-write_002du8"><span class="category">procedure: </span><span><strong>write-u8</strong> <em>byte</em><a href='#index-write_002du8' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002du8-1"><span class="category">procedure: </span><span><strong>write-u8</strong> <em>byte port</em><a href='#index-write_002du8-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes the <var>byte</var> to
the given binary output <var>port</var> and returns an unspecified value.
</p>
</dd></dl>


<dl class="def">
<dt id="index-write_002dbytevector"><span class="category">procedure: </span><span><strong>write-bytevector</strong> <em>bytevector</em><a href='#index-write_002dbytevector' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dbytevector-1"><span class="category">procedure: </span><span><strong>write-bytevector</strong> <em>bytevector port</em><a href='#index-write_002dbytevector-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dbytevector-2"><span class="category">procedure: </span><span><strong>write-bytevector</strong> <em>bytevector port start</em><a href='#index-write_002dbytevector-2' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-write_002dbytevector-3"><span class="category">procedure: </span><span><strong>write-bytevector</strong> <em>bytevector port start end</em><a href='#index-write_002dbytevector-3' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Writes the bytes of <var>bytevector</var>
from <var>start</var> to <var>end</var>
in left-to-right order to the
binary output <var>port</var>.
</p>
</dd></dl>


<dl class="def">
<dt id="index-flush_002doutput_002dport"><span class="category">procedure: </span><span><strong>flush-output-port</strong><a href='#index-flush_002doutput_002dport' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-flush_002doutput_002dport-1"><span class="category">procedure: </span><span><strong>flush-output-port</strong> <em>port</em><a href='#index-flush_002doutput_002dport-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Flushes any buffered output from the buffer of output-port to the
underlying file or device and returns an unspecified value.
</p>
</dd></dl>


<hr>
</div>
</div>
<div class="section" id="System-interface">
<div class="header">
<p>
Previous: <a href="#Input-and-output" accesskey="p" rel="prev">Input and output</a>, Up: <a href="#Standard-procedures" accesskey="u" rel="up">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="System-interface-1"></span><h3 class="section">6.14 System interface</h3>

<span id="index-system-interface"></span>

<p>Questions of system interface generally fall outside of the domain of this
report.  However, the following operations are important enough to
deserve description here.
</p>


<dl class="def">
<dt id="index-load"><span class="category">load library procedure: </span><span><strong>load</strong> <em>filename</em><a href='#index-load' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-load-1"><span class="category">load library procedure: </span><span><strong>load</strong> <em>filename environment-specifier</em><a href='#index-load-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>filename</var> is not a string.
An implementation-dependent operation is used to transform
<var>filename</var> into the name of an existing file
containing Scheme source code.  The &lsquo;<samp>load</samp>&rsquo; procedure reads
expressions and definitions from the file and evaluates them
sequentially in the environment specified by <var>environment-specifier</var>.
If <var>environment-specifier</var> is omitted, &lsquo;<samp>(interaction-environment)</samp>&rsquo;
is assumed.
</p>
<p>It is unspecified whether the results of the expressions
are printed.  The &lsquo;<samp>load</samp>&rsquo; procedure does not affect the values
returned by &lsquo;<samp>current-input-port</samp>&rsquo; and &lsquo;<samp>current-output-port</samp>&rsquo;.
It returns an unspecified value.
</p>


<blockquote>
<p><em>Rationale:</em>
For portability, &lsquo;<samp>load</samp>&rsquo; must operate on source files.
Its operation on other kinds of files necessarily varies among
implementations.
</p></blockquote>

</dd></dl>


<dl class="def">
<dt id="index-file_002dexists_003f"><span class="category">file library procedure: </span><span><strong>file-exists?</strong> <em>filename</em><a href='#index-file_002dexists_003f' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>filename</var> is not a string.
The &lsquo;<samp>file-exists?</samp>&rsquo; procedure returns
<tt>#t</tt> if the named file exists at the time the procedure is called,
and <tt>#f</tt> otherwise.
</p>
</dd></dl>


<dl class="def">
<dt id="index-delete_002dfile"><span class="category">file library procedure: </span><span><strong>delete-file</strong> <em>filename</em><a href='#index-delete_002dfile' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>It is an error if <var>filename</var> is not a string.
The &lsquo;<samp>delete-file</samp>&rsquo; procedure deletes the
named file if it exists and can be deleted, and returns an unspecified
value.  If the file does not exist or cannot be deleted, an error
that satisfies &lsquo;<samp>file-error?</samp>&rsquo; is signaled.
</p>
</dd></dl>


<dl class="def">
<dt id="index-command_002dline"><span class="category">process-context library procedure: </span><span><strong>command-line</strong><a href='#index-command_002dline' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the command line passed to the process as a list of
strings.  The first string corresponds to the command name, and is
implementation-dependent.  It is an error to mutate any of these strings.
</p></dd></dl>


<dl class="def">
<dt id="index-exit"><span class="category">process-context library procedure: </span><span><strong>exit</strong><a href='#index-exit' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-exit-1"><span class="category">process-context library procedure: </span><span><strong>exit</strong> <em>obj</em><a href='#index-exit-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Runs all outstanding dynamic-wind <var>after</var> procedures, terminates the
running program, and communicates an exit value to the operating system.
If no argument is supplied, or if <var>obj</var> is <tt>#t</tt>, the &lsquo;<samp>exit</samp>&rsquo; procedure should communicate to the operating system that the
program exited normally.  If <var>obj</var> is <tt>#f</tt>, the &lsquo;<samp>exit</samp>&rsquo;
procedure should communicate to the operating system that the program
exited abnormally.  Otherwise, &lsquo;<samp>exit</samp>&rsquo; should translate <var>obj</var> into
an appropriate exit value for the operating system, if possible.
</p>
<p>The &lsquo;<samp>exit</samp>&rsquo; procedure
must not signal an exception or return to its continuation.
</p>

<blockquote>
<p><em>Note:</em>
Because of the requirement to run handlers, this procedure is not just the
operating system&rsquo;s exit procedure.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-emergency_002dexit"><span class="category">process-context library procedure: </span><span><strong>emergency-exit</strong><a href='#index-emergency_002dexit' class='copiable-anchor'> &para;</a></span></dt>
<dt id="index-emergency_002dexit-1"><span class="category">process-context library procedure: </span><span><strong>emergency-exit</strong> <em>obj</em><a href='#index-emergency_002dexit-1' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Terminates the program without running any
outstanding dynamic-wind <var>after</var> procedures
and communicates an exit value to the operating system
in the same manner as &lsquo;<samp>exit</samp>&rsquo;.
</p>

<blockquote>
<p><em>Note:</em>
The &lsquo;<samp>emergency-exit</samp>&rsquo; procedure corresponds to the &lsquo;<samp> exit</samp>&rsquo; procedure
in Windows and Posix.
</p></blockquote>


</dd></dl>





<dl class="def">
<dt id="index-get_002denvironment_002dvariable"><span class="category">process-context library procedure: </span><span><strong>get-environment-variable</strong> <em>name</em><a href='#index-get_002denvironment_002dvariable' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Many operating systems provide each running process with an
<em>environment</em> consisting of <em>environment variables</em>.
<span id="index-environment-variables"></span>
<span id="index-environment"></span>
(This environment is not to be confused with the Scheme environments that
can be passed to &lsquo;<samp>eval</samp>&rsquo;: see section see <a href="#Environments-and-evaluation">Environments and evaluation</a>.)
Both the name and value of an environment variable are strings.
The procedure &lsquo;<samp>get-environment-variable</samp>&rsquo; returns the value 
of the environment variable <var>name</var>,
or <tt>#f</tt> if the named
environment variable is not found.  It may
use locale information to encode the name and decode the value
of the environment variable.  It is an error if 
&lsquo;<samp>get-environment-variable</samp>&rsquo; can&rsquo;t decode the value.
It is also an error to mutate the resulting string.
</p>

<div class="format">
<pre class="format"><tt>(get-environment-variable &quot;PATH&quot;) 
          ==&gt; &quot;/usr/local/bin:/usr/bin:/bin&quot;
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-get_002denvironment_002dvariables"><span class="category">process-context library procedure: </span><span><strong>get-environment-variables</strong><a href='#index-get_002denvironment_002dvariables' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the names and values of all the environment variables as an
alist, where the car of each entry is the name of an environment
variable and the cdr is its value, both as strings.  The order of the list is unspecified.
It is an error to mutate any of these strings or the alist itself.
</p>

<div class="format">
<pre class="format"><tt>(get-environment-variables) 
          ==&gt; ((&quot;USER&quot; . &quot;root&quot;) (&quot;HOME&quot; . &quot;/&quot;))
</tt>
</pre></div>


</dd></dl>


<dl class="def">
<dt id="index-current_002dsecond"><span class="category">time library procedure: </span><span><strong>current-second</strong><a href='#index-current_002dsecond' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns an inexact number representing the current time on the International Atomic
Time (TAI) scale.  The value 0.0 represents midnight
on January 1, 1970 TAI (equivalent to 8.000082 seconds before midnight Universal Time)
and the value 1.0 represents one TAI
second later.  Neither high accuracy nor high precision are required; in particular,
returning Coordinated Universal Time plus a suitable constant might be
the best an implementation can do.
</p>
<p>As of 2018, a TAI-UTC offset table can be found at [TAI].
</p></dd></dl>


<dl class="def">
<dt id="index-current_002djiffy"><span class="category">time library procedure: </span><span><strong>current-jiffy</strong><a href='#index-current_002djiffy' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns the number of <em>jiffies</em> as an exact integer that have elapsed since an arbitrary,
<span id="index-jiffies"></span>
implementation-defined epoch. A jiffy is an implementation-defined
fraction of a second which is defined by the return value of the
&lsquo;<samp>jiffies-per-second</samp>&rsquo; procedure. The starting epoch is guaranteed to be
constant during a run of the program, but may vary between runs.
</p>

<blockquote>
<p><em>Rationale:</em>
Jiffies are allowed to be implementation-dependent so that
&lsquo;<samp>current-jiffy</samp>&rsquo; can execute with minimum overhead. It
should be very likely that a compactly represented integer will suffice
as the returned value.  Any particular jiffy size will be inappropriate
for some implementations: a microsecond is too long for a very fast
machine, while a much smaller unit would force many implementations to
return integers which have to be allocated for most calls, rendering 
&lsquo;<samp>current-jiffy</samp>&rsquo; less useful for accurate timing measurements.
</p></blockquote>


</dd></dl>


<dl class="def">
<dt id="index-jiffies_002dper_002dsecond"><span class="category">time library procedure: </span><span><strong>jiffies-per-second</strong><a href='#index-jiffies_002dper_002dsecond' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns an exact integer representing the number of jiffies per SI
second. This value is an implementation-specified constant.
</p>

<div class="format">
<pre class="format"><tt>(define (time-length)
  (let ((list (make-list 100000))
        (start (current-jiffy)))
    (length list)
    (/ (- (current-jiffy) start)
       (jiffies-per-second))))
</tt>
</pre></div>

</dd></dl>


<dl class="def">
<dt id="index-features"><span class="category">procedure: </span><span><strong>features</strong><a href='#index-features' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns a list of the feature identifiers which &lsquo;<samp>cond-expand</samp>&rsquo;
treats as true.  It is an error to modify this list.  Here is an
example of what &lsquo;<samp>features</samp>&rsquo; might return:
</p>

<div class="format">
<pre class="format"><tt>(features)                             ==&gt;
  (r7rs ratios exact-complex full-unicode
   gnu-linux little-endian 
   fantastic-scheme
   fantastic-scheme-1.0
   space-ship-control-system)
</tt>
</pre></div>

</dd></dl>

         

<hr>
</div>
</div>
<div class="chapter" id="Formal-syntax-and-semantics">
<div class="header">
<p>
Next: <a href="#Standard-Libraries" accesskey="n" rel="next">Standard Libraries</a>, Previous: <a href="#Standard-procedures" accesskey="p" rel="prev">Standard procedures</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Formal-syntax-and-semantics-1"></span><h2 class="chapter">7 Formal syntax and semantics</h2>


<span id="index-formal-syntax-and-semantics"></span>


<p>This chapter provides formal descriptions of what has already been
described informally in previous chapters of this report.
</p>


<ul class="section-toc">
<li><a href="#Formal-syntax" accesskey="1">Formal syntax</a></li>
<li><a href="#Formal-semantics" accesskey="2">Formal semantics</a></li>
<li><a href="#Derived-expression-type" accesskey="3">Derived expression types</a></li>
</ul>
<hr>
<div class="section" id="Formal-syntax">
<div class="header">
<p>
Next: <a href="#Formal-semantics" accesskey="n" rel="next">Formal semantics</a>, Previous: <a href="#Formal-syntax-and-semantics" accesskey="p" rel="prev">Formal syntax and semantics</a>, Up: <a href="#Formal-syntax-and-semantics" accesskey="u" rel="up">Formal syntax and semantics</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Formal-syntax-1"></span><h3 class="section">7.1 Formal syntax</h3>


<span id="index-formal-syntax"></span>


<p>This section provides a formal syntax for Scheme written in an extended
BNF.
</p>
<p>All spaces in the grammar are for legibility.  Case is not significant
except in the definitions of &lt;letter&gt;, &lt;character name&gt; and &lt;mnemonic escape&gt;; for example, &lsquo;<samp>#x1A</samp>&rsquo;
and &lsquo;<samp>#X1a</samp>&rsquo; are equivalent, but &lsquo;<samp>foo</samp>&rsquo; and &lsquo;<samp>Foo</samp>&rsquo;
and &lsquo;<samp>#\space</samp>&rsquo; and &lsquo;<samp>#\Space</samp>&rsquo; are distinct.
&lt;empty&gt; stands for the empty string.
</p>
<p>The following extensions to BNF are used to make the description more
concise:  &lt;thing&gt;* means zero or more occurrences of
&lt;thing&gt;; and &lt;thing&gt;+ means at least one
&lt;thing&gt;.
</p>

<ul class="section-toc">
<li><a href="#Lexical-structure" accesskey="1">Lexical structure</a></li>
<li><a href="#External-representation" accesskey="2">External representations</a></li>
<li><a href="#Expression" accesskey="3">Expressions</a></li>
<li><a href="#Quasiquotations" accesskey="4">Quasiquotations</a></li>
<li><a href="#Transformers" accesskey="5">Transformers</a></li>
<li><a href="#Programs-and-definitions" accesskey="6">Programs and definitions</a></li>
<li><a href="#Librarie" accesskey="7">Libraries</a></li>
</ul>
<hr>
<div class="subsection" id="Lexical-structure">
<div class="header">
<p>
Next: <a href="#External-representation" accesskey="n" rel="next">External representations</a>, Previous: <a href="#Formal-syntax" accesskey="p" rel="prev">Formal syntax</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Lexical-structure-1"></span><h4 class="subsection">7.1.1 Lexical structure</h4>

<span id="index-lexical-structure"></span>

<p>This section describes how individual tokens (identifiers,
<span id="index-token"></span>
numbers, etc.) are formed from sequences of characters.  The following
sections describe how expressions and programs are formed from sequences
of tokens.
</p>
<p>&lt;Intertoken space&gt; can occur on either side of any token, but not
within a token.
</p>
<p>Identifiers that do not begin with a vertical line are
terminated by a &lt;delimiter&gt; or by the end of the input.
So are dot, numbers, characters, and booleans.
Identifiers that begin with a vertical line are terminated by another vertical line.
</p>
<p>The following four characters from the ASCII repertoire
are reserved for future extensions to the
language: <tt>[ ] { }</tt>
</p>
<p>In addition to the identifier characters of the ASCII repertoire specified
below, Scheme implementations may permit any additional repertoire of
non-ASCII Unicode characters to be employed in identifiers,
provided that each such character has a Unicode general category of Lu,
Ll, Lt, Lm, Lo, Mn, Mc, Me, Nd, Nl, No, Pd, Pc, Po, Sc, Sm, Sk, So,
or Co, or is U+200C or U+200D (the zero-width non-joiner and joiner,
respectively, which are needed for correct spelling in Persian, Hindi,
and other languages).
However, it is an error for the first character to have a general category
of Nd, Mc, or Me.  It is also an error to use a non-Unicode character
in symbols or identifiers.
</p>
<p>All Scheme implementations must permit the escape sequence
<tt>\x&lt;hexdigits&gt;;</tt>
to appear in Scheme identifiers that are enclosed in vertical lines. If the character
with the given Unicode scalar value is supported by the implementation,
identifiers containing such a sequence are equivalent to identifiers
containing the corresponding character. 
</p>

<div class="format">
<pre class="format"><tt>&lt;token&gt; --&gt; &lt;identifier&gt; | &lt;boolean&gt; | &lt;number&gt;
<span id="index-identifier-2"></span>     | &lt;character&gt; | &lt;string&gt;
     | ( | ) | #( | # u8( | <tt>'</tt> | <tt>`</tt> | , | ,@ | <b>.</b>
&lt;delimiter&gt; --&gt; &lt;whitespace&gt; | &lt;vertical line&gt;
    | ( | ) | &quot; | ;
&lt;intraline whitespace&gt; --&gt; &lt;space or tab&gt;
&lt;whitespace&gt; --&gt; &lt;intraline whitespace&gt; | &lt;line ending&gt;
&lt;vertical line&gt; --&gt; |
&lt;line ending&gt; --&gt; &lt;newline&gt; | &lt;return&gt; &lt;newline&gt;
    | &lt;return&gt;
&lt;comment&gt; --&gt; ;  &lt;<span class="roman">all subsequent characters up to a</span>
                 <span class="roman">line ending&gt;</span>
<span id="index-comment-1"></span>                 | &lt;nested comment&gt;
                 | #; &lt;intertoken space&gt; &lt;datum&gt;
&lt;nested comment&gt; --&gt; #|  &lt;comment text&gt;
                         &lt;comment cont&gt;* |#
&lt;comment text&gt; --&gt;  &lt;<span class="roman">character sequence not containing</span>
                    <span class="roman"><tt>#|</tt> or <tt>|#</tt>&gt;</span>
&lt;comment cont&gt; --&gt; &lt;nested comment&gt; &lt;comment text&gt;
&lt;directive&gt; --&gt; #!fold-case | #!no-fold-case</tt>

</pre></div>



<p>Note that it is ungrammatical to follow a &lt;directive&gt; with anything
but a &lt;delimiter&gt; or the end of file.
</p>

<div class="format">
<pre class="format"><tt>&lt;atmosphere&gt; --&gt; &lt;whitespace&gt; | &lt;comment&gt; | &lt;directive&gt;
&lt;intertoken space&gt; --&gt; &lt;atmosphere&gt;*</tt>

</pre></div>








<p>Note that &lsquo;<samp>+i</samp>&rsquo;, &lsquo;<samp>-i</samp>&rsquo; and &lt;infnan&gt; below are exceptions to the
&lt;peculiar identifier&gt; rule; they are parsed as numbers, not
identifiers.
</p>

<div class="format">
<pre class="format"><tt>&lt;identifier&gt; --&gt; &lt;initial&gt; &lt;subsequent&gt;*
     | &lt;vertical line&gt; &lt;symbol element&gt;* &lt;vertical line&gt;
     | &lt;peculiar identifier&gt;
&lt;initial&gt; --&gt; &lt;letter&gt; | &lt;special initial&gt;
&lt;letter&gt; --&gt; a | b | c | ... | z
    | A | B | C | ... | Z
&lt;special initial&gt; --&gt; ! | $ | % | &amp; | * | / | : | &lt; | =
     | &gt; | ? | @ | ^ | _ | ~
&lt;subsequent&gt; --&gt; &lt;initial&gt; | &lt;digit&gt;
     | &lt;special subsequent&gt;
&lt;digit&gt; --&gt; 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
&lt;hex digit&gt; --&gt; &lt;digit&gt; | a | b | c | d | e | f
&lt;explicit sign&gt; --&gt; + | -
&lt;special subsequent&gt; --&gt; &lt;explicit sign&gt; | . | @
&lt;inline hex escape&gt; --&gt; \x&lt;hex scalar value&gt;;
&lt;hex scalar value&gt; --&gt; &lt;hex digit&gt;+
&lt;mnemonic escape&gt; --&gt; \a | \b | \t | \n | \r
&lt;peculiar identifier&gt; --&gt; &lt;explicit sign&gt;
    | &lt;explicit sign&gt; &lt;sign subsequent&gt; &lt;subsequent&gt;*
    | &lt;explicit sign&gt; . &lt;dot subsequent&gt; &lt;subsequent&gt;*
    | . &lt;dot subsequent&gt; &lt;subsequent&gt;*
 
&lt;dot subsequent&gt; --&gt; &lt;sign subsequent&gt; | .
&lt;sign subsequent&gt; --&gt; &lt;initial&gt; | &lt;explicit sign&gt; | @
&lt;symbol element&gt; --&gt;
    &lt;any character other than &lt;vertical line&gt; or \&gt;
    | &lt;inline hex escape&gt; | &lt;mnemonic escape&gt; | \|

&lt;boolean&gt; --&gt; #t | #f | <tt>#true</tt> | <tt>#false</tt>

&lt;character&gt; --&gt; #\ &lt;any character&gt;
     | #\ &lt;character name&gt;
     | #\x&lt;hex scalar value&gt;
&lt;character name&gt; --&gt; alarm | backspace | delete 
    | escape | newline | null | return | space | tab

&lt;string&gt; --&gt; &quot; &lt;string element&gt;* &quot;
&lt;string element&gt; --&gt; &lt;any character other than &quot; or \&gt;
    | &lt;mnemonic escape&gt; | \&quot; | \\ | \|
     | \&lt;intraline whitespace&gt;*&lt;line ending&gt;
       &lt;intraline whitespace&gt;*
     | &lt;inline hex escape&gt;
&lt;bytevector&gt; --&gt; #u8(&lt;byte&gt;*)
&lt;byte&gt; --&gt; &lt;any exact integer between 0 and 255&gt;</tt>

</pre></div>







<div class="format">
<pre class="format"><tt>&lt;number&gt; --&gt; &lt;num 2&gt; | &lt;num 8&gt;
     | &lt;num 10&gt; | &lt;num 16&gt;
</tt>

</pre></div>



<p>The following rules for &lt;num R&gt;, &lt;complex R&gt;, &lt;real
R&gt;, &lt;ureal R&gt;, &lt;uinteger R&gt;, and &lt;prefix R&gt;
are implicitly replicated for R&nbsp;=&nbsp;2,&nbsp;8,&nbsp;10,<!-- /@w -->
and 16.  There are no rules for &lt;decimal 2&gt;, &lt;decimal
8&gt;, and &lt;decimal 16&gt;, which means that numbers containing
decimal points or exponents are always in decimal radix.
Although not shown below, all alphabetic characters used in the grammar
of numbers can appear in either upper or lower case.
</p>
<div class="format">
<pre class="format"><tt>&lt;num R&gt; --&gt; &lt;prefix R&gt; &lt;complex R&gt;
&lt;complex R&gt; --&gt; &lt;real R&gt; | &lt;real R&gt; @ &lt;real R&gt;
    | &lt;real R&gt; + &lt;ureal R&gt; i | &lt;real R&gt; - &lt;ureal R&gt; i
    | &lt;real R&gt; + i | &lt;real R&gt; - i | &lt;real R&gt; &lt;infnan&gt; i 
    | + &lt;ureal R&gt; i | - &lt;ureal R&gt; i
    | &lt;infnan&gt; i | + i | - i
&lt;real R&gt; --&gt; &lt;sign&gt; &lt;ureal R&gt;
    | &lt;infnan&gt;
&lt;ureal R&gt; --&gt; &lt;uinteger R&gt;
    | &lt;uinteger R&gt; / &lt;uinteger R&gt;
    | &lt;decimal R&gt;
&lt;decimal 10&gt; --&gt; &lt;uinteger 10&gt; &lt;suffix&gt;
    | . &lt;digit 10&gt;+ &lt;suffix&gt;
    | &lt;digit 10&gt;+ . &lt;digit 10&gt;* &lt;suffix&gt;
&lt;uinteger R&gt; --&gt; &lt;digit R&gt;+
&lt;prefix R&gt; --&gt; &lt;radix R&gt; &lt;exactness&gt;
    | &lt;exactness&gt; &lt;radix R&gt;
&lt;infnan&gt; --&gt; +inf.0 | -inf.0 | +nan.0 | -nan.0
</tt>

</pre></div>




<div class="format">
<pre class="format"><tt>&lt;suffix&gt; --&gt; &lt;empty&gt; 
    | &lt;exponent marker&gt; &lt;sign&gt; &lt;digit 10&gt;+
&lt;exponent marker&gt; --&gt; e
&lt;sign&gt; --&gt; &lt;empty&gt;  | + |  -
&lt;exactness&gt; --&gt; &lt;empty&gt; | #i | #e
<span id="index-_0023e-1"></span><span id="index-_0023i-1"></span>&lt;radix 2&gt; --&gt; #b
<span id="index-_0023b-1"></span>&lt;radix 8&gt; --&gt; #o
<span id="index-_0023o-1"></span>&lt;radix 10&gt; --&gt; &lt;empty&gt; | #d
&lt;radix 16&gt; --&gt; #x
<span id="index-_0023x-1"></span>&lt;digit 2&gt; --&gt; 0 | 1
&lt;digit 8&gt; --&gt; 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7
&lt;digit 10&gt; --&gt; &lt;digit&gt;
&lt;digit 16&gt; --&gt; &lt;digit 10&gt; | a | b | c | d | e | f </tt>

</pre></div>




<hr>
</div>
<div class="subsection" id="External-representation">
<div class="header">
<p>
Next: <a href="#Expression" accesskey="n" rel="next">Expressions</a>, Previous: <a href="#Lexical-structure" accesskey="p" rel="prev">Lexical structure</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="External-representations-2"></span><h4 class="subsection">7.1.2 External representations</h4>

<span id="index-external-representations-1"></span>


<p>&lt;Datum&gt; is what the <code>read</code> procedure (section see <a href="#Input">Input</a>)
<span id="index-read-3"></span>
successfully parses.  Note that any string that parses as an
&lt;expression&gt; will also parse as a &lt;datum&gt;.  
</p>

<div class="format">
<pre class="format"><tt>&lt;datum&gt; --&gt; &lt;simple datum&gt; | &lt;compound datum&gt;
     | &lt;label&gt; = &lt;datum&gt; | &lt;label&gt; #
&lt;simple datum&gt; --&gt; &lt;boolean&gt; | &lt;number&gt;
     | &lt;character&gt; | &lt;string&gt; |  &lt;symbol&gt; | &lt;bytevector&gt;
&lt;symbol&gt; --&gt; &lt;identifier&gt;
&lt;compound datum&gt; --&gt; &lt;list&gt; | &lt;vector&gt; | &lt;abbreviation&gt;
&lt;list&gt; --&gt; (&lt;datum&gt;*) | (&lt;datum&gt;+ . &lt;datum&gt;)
&lt;abbreviation&gt; --&gt; &lt;abbrev prefix&gt; &lt;datum&gt;
&lt;abbrev prefix&gt; --&gt; ' | ` | , | ,@
&lt;vector&gt; --&gt; #(&lt;datum&gt;*)
&lt;label&gt; --&gt; # &lt;uinteger 10&gt;</tt>

</pre></div>




<hr>
</div>
<div class="subsection" id="Expression">
<div class="header">
<p>
Next: <a href="#Quasiquotations" accesskey="n" rel="next">Quasiquotations</a>, Previous: <a href="#External-representation" accesskey="p" rel="prev">External representations</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Expressions-2"></span><h4 class="subsection">7.1.3 Expressions</h4>

<span id="index-expressions-1"></span>

<p>The definitions in this and the following subsections assume that all
the syntax keywords defined in this report have been properly imported
from their libraries, and that none of them have been redefined or shadowed.
</p>

<div class="format">
<pre class="format"><tt>&lt;expression&gt; --&gt; &lt;identifier&gt;
     | &lt;literal&gt;
     | &lt;procedure call&gt;
     | &lt;lambda expression&gt;
     | &lt;conditional&gt;
     | &lt;assignment&gt;
     | &lt;derived expression&gt;
     | &lt;macro use&gt;
     | &lt;macro block&gt;
     | &lt;includer&gt;

&lt;literal&gt; --&gt; &lt;quotation&gt; | &lt;self-evaluating&gt;
&lt;self-evaluating&gt; --&gt; &lt;boolean&gt; | &lt;number&gt; | &lt;vector&gt;
     | &lt;character&gt; | &lt;string&gt; | &lt;bytevector&gt;
&lt;quotation&gt; --&gt; '&lt;datum&gt; | (quote &lt;datum&gt;)
&lt;procedure call&gt; --&gt; (&lt;operator&gt; &lt;operand&gt;*)
&lt;operator&gt; --&gt; &lt;expression&gt;
&lt;operand&gt; --&gt; &lt;expression&gt;

&lt;lambda expression&gt; --&gt; (lambda &lt;formals&gt; &lt;body&gt;)
&lt;formals&gt; --&gt; (&lt;identifier&gt;*) | &lt;identifier&gt;
     | (&lt;identifier&gt;+ . &lt;identifier&gt;)
&lt;body&gt; --&gt;  &lt;definition&gt;* &lt;sequence&gt;
&lt;sequence&gt; --&gt; &lt;command&gt;* &lt;expression&gt;
&lt;command&gt; --&gt; &lt;expression&gt;

&lt;conditional&gt; --&gt; (if &lt;test&gt; &lt;consequent&gt; &lt;alternate&gt;)
&lt;test&gt; --&gt; &lt;expression&gt;
&lt;consequent&gt; --&gt; &lt;expression&gt;
&lt;alternate&gt; --&gt; &lt;expression&gt; | &lt;empty&gt;

&lt;assignment&gt; --&gt; (set! &lt;identifier&gt; &lt;expression&gt;)

&lt;derived expression&gt; --&gt;
       (cond &lt;cond clause&gt;+)
     | (cond &lt;cond clause&gt;* (else &lt;sequence&gt;))
     | (case &lt;expression&gt;
         &lt;case clause&gt;+)
     | (case &lt;expression&gt;
         &lt;case clause&gt;*
         (else &lt;sequence&gt;))
     | (case &lt;expression&gt;
         &lt;case clause&gt;*
         (else =&gt; &lt;recipient&gt;))
     | (and &lt;test&gt;*)
     | (or &lt;test&gt;*)
     | (when &lt;test&gt; &lt;sequence&gt;)
     | (unless &lt;test&gt; &lt;sequence&gt;)
     | (let (&lt;binding spec&gt;*) &lt;body&gt;)
     | (let &lt;identifier&gt; (&lt;binding spec&gt;*) &lt;body&gt;)
     | (let* (&lt;binding spec&gt;*) &lt;body&gt;)
     | (letrec (&lt;binding spec&gt;*) &lt;body&gt;)
     | (letrec* (&lt;binding spec&gt;*) &lt;body&gt;)
     | (let-values (&lt;mv binding spec&gt;*) &lt;body&gt;)
     | (let*-values (&lt;mv binding spec&gt;*) &lt;body&gt;)
     | (begin &lt;sequence&gt;)
     | (do (&lt;iteration spec&gt;*)
           (&lt;test&gt; &lt;do result&gt;)
         &lt;command&gt;*)
     | (delay &lt;expression&gt;)
     | (delay-force &lt;expression&gt;)
     | (parameterize ((&lt;expression&gt; &lt;expression&gt;)*)
          &lt;body&gt;)
     | (guard (&lt;identifier&gt; &lt;cond clause&gt;*) &lt;body&gt;)
     | &lt;quasiquotation&gt;
     | (case-lambda &lt;case-lambda clause&gt;*)

&lt;cond clause&gt; --&gt; (&lt;test&gt; &lt;sequence&gt;)
      | (&lt;test&gt;)
      | (&lt;test&gt; =&gt; &lt;recipient&gt;)
&lt;recipient&gt; --&gt; &lt;expression&gt;
&lt;case clause&gt; --&gt; ((&lt;datum&gt;*) &lt;sequence&gt;)
      | ((&lt;datum&gt;*) =&gt; &lt;recipient&gt;)
&lt;binding spec&gt; --&gt; (&lt;identifier&gt; &lt;expression&gt;)
&lt;mv binding spec&gt; --&gt; (&lt;formals&gt; &lt;expression&gt;)
&lt;iteration spec&gt; --&gt; (&lt;identifier&gt; &lt;init&gt; &lt;step&gt;)
    | (&lt;identifier&gt; &lt;init&gt;)
&lt;case-lambda clause&gt; --&gt; (&lt;formals&gt; &lt;body&gt;)
&lt;init&gt; --&gt; &lt;expression&gt;
&lt;step&gt; --&gt; &lt;expression&gt;
&lt;do result&gt; --&gt; &lt;sequence&gt; | &lt;empty&gt;

&lt;macro use&gt; --&gt; (&lt;keyword&gt; &lt;datum&gt;*)
&lt;keyword&gt; --&gt; &lt;identifier&gt;

&lt;macro block&gt; --&gt;
     (let-syntax (&lt;syntax spec&gt;*) &lt;body&gt;)
     | (letrec-syntax (&lt;syntax spec&gt;*) &lt;body&gt;)
&lt;syntax spec&gt; --&gt; (&lt;keyword&gt; &lt;transformer spec&gt;)

&lt;includer&gt; --&gt;
    | (include &lt;string&gt;+)
    | (include-ci &lt;string&gt;+)
</tt>

</pre></div>



<hr>
</div>
<div class="subsection" id="Quasiquotations">
<div class="header">
<p>
Next: <a href="#Transformers" accesskey="n" rel="next">Transformers</a>, Previous: <a href="#Expression" accesskey="p" rel="prev">Expressions</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Quasiquotations-1"></span><h4 class="subsection">7.1.4 Quasiquotations</h4>

<span id="index-quasiquotations"></span>

<p>The following grammar for quasiquote expressions is not context-free.
It is presented as a recipe for generating an infinite number of
production rules.  Imagine a copy of the following rules for D = 1, 2,3, &hellip;, where D is the nesting depth.
</p>

<div class="format">
<pre class="format"><tt>&lt;quasiquotation&gt; --&gt; &lt;quasiquotation 1&gt;
&lt;qq template 0&gt; --&gt; &lt;expression&gt;
&lt;quasiquotation D&gt; --&gt; `&lt;qq template D&gt;
       | (quasiquote &lt;qq template D&gt;)
&lt;qq template D&gt; --&gt; &lt;simple datum&gt;
       | &lt;list qq template D&gt;
       | &lt;vector qq template D&gt;
       | &lt;unquotation D&gt;
&lt;list qq template D&gt; --&gt; (&lt;qq template or splice D&gt;*)
       | (&lt;qq template or splice D&gt;+ . &lt;qq template D&gt;)
       | '&lt;qq template D&gt;
       | &lt;quasiquotation D+1&gt;
&lt;vector qq template D&gt; --&gt; #(&lt;qq template or splice D&gt;*)
&lt;unquotation D&gt; --&gt; ,&lt;qq template D-1&gt;
       | (unquote &lt;qq template D-1&gt;)
&lt;qq template or splice D&gt; --&gt; &lt;qq template D&gt;
       | &lt;splicing unquotation D&gt;
&lt;splicing unquotation D&gt; --&gt; ,@&lt;qq template D-1&gt;
       | (unquote-splicing &lt;qq template D-1&gt;) </tt>

</pre></div>



<p>In &lt;quasiquotation&gt;s, a &lt;list qq template D&gt; can sometimes
be confused with either an &lt;unquotation D&gt; or a &lt;splicing
unquotation D&gt;.  The interpretation as an
&lt;unquotation&gt; or &lt;splicing
unquotation D&gt; takes precedence.
</p>
<hr>
</div>
<div class="subsection" id="Transformers">
<div class="header">
<p>
Next: <a href="#Programs-and-definitions" accesskey="n" rel="next">Programs and definitions</a>, Previous: <a href="#Quasiquotations" accesskey="p" rel="prev">Quasiquotations</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Transformers-1"></span><h4 class="subsection">7.1.5 Transformers</h4>

<span id="index-transformers"></span>


<blockquote>
<p><em>Note:</em>
Though this grammar does not say so, a top-level <tt>syntax-rules</tt>
pattern must be a list pattern, not a vector pattern or an identifier pattern.
</p></blockquote>



<div class="format">
<pre class="format"><tt>&lt;transformer spec&gt; --&gt;
    (syntax-rules (&lt;identifier&gt;*) &lt;syntax rule&gt;*)
    | (syntax-rules &lt;identifier&gt; (&lt;identifier&gt;*)
         &lt;syntax rule&gt;*)
&lt;syntax rule&gt; --&gt; (&lt;pattern&gt; &lt;template&gt;)
&lt;pattern&gt; --&gt; &lt;pattern identifier&gt;
     | &lt;underscore&gt;
     | (&lt;pattern&gt;*)
     | (&lt;pattern&gt;+ . &lt;pattern&gt;)
     | (&lt;pattern&gt;* &lt;pattern&gt; &lt;ellipsis&gt; &lt;pattern&gt;*)
     | (&lt;pattern&gt;* &lt;pattern&gt; &lt;ellipsis&gt; &lt;pattern&gt;*
         . &lt;pattern&gt;)
     | #(&lt;pattern&gt;*)
     | #(&lt;pattern&gt;* &lt;pattern&gt; &lt;ellipsis&gt; &lt;pattern&gt;*)
     | &lt;pattern datum&gt;
&lt;pattern datum&gt; --&gt; &lt;string&gt;
     | &lt;character&gt;
     | &lt;boolean&gt;
     | &lt;number&gt;
     | &lt;bytevector&gt;
&lt;template&gt; --&gt; &lt;pattern identifier&gt;
     | (&lt;template element&gt;*)
     | (&lt;template element&gt;+ . &lt;template&gt;)
     | #(&lt;template element&gt;*)
     | &lt;template datum&gt;
&lt;template element&gt; --&gt; &lt;template&gt;
     | &lt;template&gt; &lt;ellipsis&gt;
&lt;template datum&gt; --&gt; &lt;pattern datum&gt;
&lt;pattern identifier&gt; --&gt; &lt;any identifier except &lsquo;<samp>...</samp>&rsquo;&gt;
&lt;ellipsis&gt; --&gt; &lt;an identifier defaulting to &lsquo;<samp>...</samp>&rsquo;&gt;
&lt;underscore&gt; --&gt; &lt;the identifier &lsquo;<samp> </samp>&rsquo;&gt;
</tt>

</pre></div>



<hr>
</div>
<div class="subsection" id="Programs-and-definitions">
<div class="header">
<p>
Next: <a href="#Librarie" accesskey="n" rel="next">Libraries</a>, Previous: <a href="#Transformers" accesskey="p" rel="prev">Transformers</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Programs-and-definitions-1"></span><h4 class="subsection">7.1.6 Programs and definitions</h4>

<span id="index-programs-and-definitions"></span>


<div class="format">
<pre class="format"><tt>&lt;program&gt; --&gt;
    &lt;import declaration&gt;+
    &lt;command or definition&gt;+
&lt;command or definition&gt; --&gt; &lt;command&gt;
    | &lt;definition&gt;
    | (begin &lt;command or definition&gt;+)
&lt;definition&gt; --&gt; (define &lt;identifier&gt; &lt;expression&gt;)
      | (define (&lt;identifier&gt; &lt;def formals&gt;) &lt;body&gt;)
      | &lt;syntax definition&gt;
      | (define-values &lt;formals&gt; &lt;body&gt;)
      | (define-record-type &lt;identifier&gt;
         &lt;constructor&gt; &lt;identifier&gt; &lt;field spec&gt;*)
      | (begin &lt;definition&gt;*)
&lt;def formals&gt; --&gt; &lt;identifier&gt;*
      | &lt;identifier&gt;* . &lt;identifier&gt;
&lt;constructor&gt; --&gt; (&lt;identifier&gt; &lt;field name&gt;*)
&lt;field spec&gt; --&gt; (&lt;field name&gt; &lt;accessor&gt;)
      | (&lt;field name&gt; &lt;accessor&gt; &lt;mutator&gt;)
&lt;field name&gt; --&gt; &lt;identifier&gt;
&lt;accessor&gt; --&gt; &lt;identifier&gt;
&lt;mutator&gt; --&gt; &lt;identifier&gt;
&lt;syntax definition&gt; --&gt;
     (define-syntax &lt;keyword&gt; &lt;transformer spec&gt;)
</tt>

</pre></div>



<hr>
</div>
<div class="subsection" id="Librarie">
<div class="header">
<p>
Previous: <a href="#Programs-and-definitions" accesskey="p" rel="prev">Programs and definitions</a>, Up: <a href="#Formal-syntax" accesskey="u" rel="up">Formal syntax</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Libraries-2"></span><h4 class="subsection">7.1.7 Libraries</h4>

<span id="index-libraries-2"></span>


<div class="format">
<pre class="format"><tt>&lt;library&gt; --&gt;
    (define-library &lt;library name&gt;
       &lt;library declaration&gt;*)
&lt;library name&gt; --&gt; (&lt;library name part&gt;+)
&lt;library name part&gt; --&gt; &lt;identifier&gt; | &lt;uinteger 10&gt;
&lt;library declaration&gt; --&gt; (export &lt;export spec&gt;*)
    | &lt;import declaration&gt;
    | (begin &lt;command or definition&gt;*)
    | &lt;includer&gt;
    | (include-library-declarations &lt;string&gt;+)
    | (cond-expand &lt;cond-expand clause&gt;+)
    | (cond-expand &lt;cond-expand clause&gt;+
                (else &lt;library declaration&gt;*))<!-- /@w -->
&lt;import declaration&gt; --&gt; (import &lt;import set&gt;+)
&lt;export spec&gt; --&gt; &lt;identifier&gt;
    | (rename &lt;identifier&gt; &lt;identifier&gt;)
&lt;import set&gt; --&gt; &lt;library name&gt;
    | (only &lt;import set&gt; &lt;identifier&gt;+)
    | (except &lt;import set&gt; &lt;identifier&gt;+)
    | (prefix &lt;import set&gt; &lt;identifier&gt;)
    | (rename &lt;import set&gt; (&lt;identifier&gt; &lt;identifier&gt;)+)
&lt;cond-expand clause&gt; --&gt;
    (&lt;feature requirement&gt; &lt;library declaration&gt;*)
&lt;feature requirement&gt; --&gt; &lt;identifier&gt;
    | (library &lt;library name&gt;)
    | (and &lt;feature requirement&gt;*)
    | (or &lt;feature requirement&gt;*)
    | (not &lt;feature requirement&gt;)
</tt>

</pre></div>


       
<hr>
</div>
</div>
<div class="section" id="Formal-semantics">
<div class="header">
<p>
Next: <a href="#Derived-expression-type" accesskey="n" rel="next">Derived expression types</a>, Previous: <a href="#Formal-syntax" accesskey="p" rel="prev">Formal syntax</a>, Up: <a href="#Formal-syntax-and-semantics" accesskey="u" rel="up">Formal syntax and semantics</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Formal-semantics-1"></span><h3 class="section">7.2 Formal semantics</h3>

<span id="index-formal-semantics"></span>

<p>This section provides a formal denotational semantics for the primitive
expressions of Scheme and selected built-in procedures.  The concepts
and notation used here are described in <small>[STOY77]</small>.
</p>
<blockquote>
<p><em>Note:</em> The formal semantics section was written in LaTeX which
is incompatible with TeXinfo.  See the Formal semantics section: 
<a href="http://swissnet.ai.mit.edu/~jaffer/r7rs-formal.pdf">http://swissnet.ai.mit.edu/~jaffer/r7rs-formal.pdf</a>
</p></blockquote>

        
<hr>
</div>
<div class="section" id="Derived-expression-type">
<div class="header">
<p>
Previous: <a href="#Formal-semantics" accesskey="p" rel="prev">Formal semantics</a>, Up: <a href="#Formal-syntax-and-semantics" accesskey="u" rel="up">Formal syntax and semantics</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Derived-expression-types-2"></span><h3 class="section">7.3 Derived expression types</h3>

<span id="index-derived-expression-types-1"></span>


<p>This section gives syntax definitions for the derived expression types in
terms of the primitive expression types (literal, variable, call, &lsquo;<samp>lambda</samp>&rsquo;,
&lsquo;<samp>if</samp>&rsquo;, and &lsquo;<samp>set!</samp>&rsquo;), except for &lsquo;<samp>quasiquote</samp>&rsquo;.
</p>
<p>Conditional derived syntax types:
</p>

<div class="example">
<pre class="example">

(define-syntax cond
  (syntax-rules (else =&gt;)
    ((cond (else result1 result2 ...))
     (begin result1 result2 ...))
    ((cond (test =&gt; result))
     (let ((temp test))
       (if temp (result temp))))
    ((cond (test =&gt; result) clause1 clause2 ...)
     (let ((temp test))
       (if temp
           (result temp)
           (cond clause1 clause2 ...))))
    ((cond (test)) test)
    ((cond (test) clause1 clause2 ...)
     (let ((temp test))
       (if temp
           temp
           (cond clause1 clause2 ...))))
    ((cond (test result1 result2 ...))
     (if test (begin result1 result2 ...)))
    ((cond (test result1 result2 ...)
           clause1 clause2 ...)
     (if test
         (begin result1 result2 ...)
         (cond clause1 clause2 ...)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax case
  (syntax-rules (else =&gt;)
    ((case (key ...)
       clauses ...)
     (let ((atom-key (key ...)))
       (case atom-key clauses ...)))
    ((case key
       (else =&gt; result))
     (result key))
    ((case key
       (else result1 result2 ...))
     (begin result1 result2 ...))
    ((case key
       ((atoms ...) =&gt; result))
     (if (memv key '(atoms ...))
         (result key)))
    ((case key
       ((atoms ...) result1 result2 ...))
     (if (memv key '(atoms ...))
         (begin result1 result2 ...)))
    ((case key
       ((atoms ...) =&gt; result)
       clause clauses ...)
     (if (memv key '(atoms ...))
         (result key)
         (case key clause clauses ...)))
    ((case key
       ((atoms ...) result1 result2 ...)
       clause clauses ...)
     (if (memv key '(atoms ...))
         (begin result1 result2 ...)
         (case key clause clauses ...)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax and
  (syntax-rules ()
    ((and) #t)
    ((and test) test)
    ((and test1 test2 ...)
     (if test1 (and test2 ...) #f))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax or
  (syntax-rules ()
    ((or) #f)
    ((or test) test)
    ((or test1 test2 ...)
     (let ((x test1))
       (if x x (or test2 ...))))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax when
  (syntax-rules ()
    ((when test result1 result2 ...)
     (if test
         (begin result1 result2 ...)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax unless
  (syntax-rules ()
    ((unless test result1 result2 ...)
     (if (not test)
         (begin result1 result2 ...)))))

</pre></div>


<p>Binding constructs:
</p>

<div class="example">
<pre class="example">

(define-syntax let
  (syntax-rules ()
    ((let ((name val) ...) body1 body2 ...)
     ((lambda (name ...) body1 body2 ...)
      val ...))
    ((let tag ((name val) ...) body1 body2 ...)
     ((letrec ((tag (lambda (name ...)
                      body1 body2 ...)))
        tag)
      val ...))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax let*
  (syntax-rules ()
    ((let* () body1 body2 ...)
     (let () body1 body2 ...))
    ((let* ((name1 val1) (name2 val2) ...)
       body1 body2 ...)
     (let ((name1 val1))
       (let* ((name2 val2) ...)
         body1 body2 ...)))))

</pre></div>


<p>The following &lsquo;<samp>letrec</samp>&rsquo; macro uses the symbol &lsquo;<samp>&lt;undefined&gt;</samp>&rsquo;
in place of an expression which returns something that when stored in
a location makes it an error to try to obtain the value stored in the
location.  (No such expression is defined in Scheme.)
A trick is used to generate the temporary names needed to avoid
specifying the order in which the values are evaluated.
This could also be accomplished by using an auxiliary macro.
</p>

<div class="example">
<pre class="example">

(define-syntax letrec
  (syntax-rules ()
    ((letrec ((var1 init1) ...) body ...)
     (letrec &quot;generate temp names&quot;
       (var1 ...)
       ()
       ((var1 init1) ...)
       body ...))
    ((letrec &quot;generate temp names&quot;
       ()
       (temp1 ...)
       ((var1 init1) ...)
       body ...)
     (let ((var1 &lt;undefined&gt;) ...)
       (let ((temp1 init1) ...)
         (set! var1 temp1)
         ...
         body ...)))
    ((letrec &quot;generate temp names&quot;
       (x y ...)
       (temp ...)
       ((var1 init1) ...)
       body ...)
     (letrec &quot;generate temp names&quot;
       (y ...)
       (newtemp temp ...)
       ((var1 init1) ...)
       body ...))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax letrec*
  (syntax-rules ()
    ((letrec* ((var1 init1) ...) body1 body2 ...)
     (let ((var1 &lt;undefined&gt;) ...)
       (set! var1 init1)
       ...
       (let () body1 body2 ...)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax let-values
  (syntax-rules ()
    ((let-values (binding ...) body0 body1 ...)
     (let-values &quot;bind&quot;
         (binding ...) () (begin body0 body1 ...)))
    
    ((let-values &quot;bind&quot; () tmps body)
     (let tmps body))
    
    ((let-values &quot;bind&quot; ((b0 e0)
         binding ...) tmps body)
     (let-values &quot;mktmp&quot; b0 e0 ()
         (binding ...) tmps body))
    
    ((let-values &quot;mktmp&quot; () e0 args
         bindings tmps body)
     (call-with-values 
       (lambda () e0)
       (lambda args
         (let-values &quot;bind&quot;
             bindings tmps body))))
    
    ((let-values &quot;mktmp&quot; (a . b) e0 (arg ...)
         bindings (tmp ...) body)
     (let-values &quot;mktmp&quot; b e0 (arg ... x)
         bindings (tmp ... (a x)) body))
    
    ((let-values &quot;mktmp&quot; a e0 (arg ...)
        bindings (tmp ...) body)
     (call-with-values
       (lambda () e0)
       (lambda (arg ... . x)
         (let-values &quot;bind&quot;
             bindings (tmp ... (a x)) body))))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax let*-values
  (syntax-rules ()
    ((let*-values () body0 body1 ...)
     (let () body0 body1 ...))

    ((let*-values (binding0 binding1 ...)
         body0 body1 ...)
     (let-values (binding0)
       (let*-values (binding1 ...)
         body0 body1 ...)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax define-values
  (syntax-rules ()
    ((define-values () expr)
     (define dummy
       (call-with-values (lambda () expr)
                         (lambda args #f))))
    ((define-values (var) expr)
     (define var expr))
    ((define-values (var0 var1 ... varn) expr)
     (begin
       (define var0
         (call-with-values (lambda () expr)
                           list))
       (define var1
         (let ((v (cadr var0)))
           (set-cdr! var0 (cddr var0))
           v)) ...
       (define varn
         (let ((v (cadr var0)))
           (set! var0 (car var0))
           v))))
    ((define-values (var0 var1 ... . varn) expr)
     (begin
       (define var0
         (call-with-values (lambda () expr)
                           list))
       (define var1
         (let ((v (cadr var0)))
           (set-cdr! var0 (cddr var0))
           v)) ...
       (define varn
         (let ((v (cdr var0)))
           (set! var0 (car var0))
           v))))
    ((define-values var expr)
     (define var
       (call-with-values (lambda () expr)
                         list)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax begin
  (syntax-rules ()
    ((begin exp ...)
     ((lambda () exp ...)))))

</pre></div>


<p>The following alternative expansion for &lsquo;<samp>begin</samp>&rsquo; does not make use of
the ability to write more than one expression in the body of a lambda
expression.  In any case, note that these rules apply only if the body
of the &lsquo;<samp>begin</samp>&rsquo; contains no definitions.
</p>

<div class="example">
<pre class="example">

(define-syntax begin
  (syntax-rules ()
    ((begin exp)
     exp)
    ((begin exp1 exp2 ...)
     (call-with-values
         (lambda () exp1)
       (lambda args
         (begin exp2 ...))))))

</pre></div>


<p>The following syntax definition
of &lsquo;<samp>do</samp>&rsquo; uses a trick to expand the variable clauses.
As with &lsquo;<samp>letrec</samp>&rsquo; above, an auxiliary macro would also work.
The expression &lsquo;<samp>(if #f #f)</samp>&rsquo; is used to obtain an unspecific
value.
</p>

<div class="example">
<pre class="example">

(define-syntax do
  (syntax-rules ()
    ((do ((var init step ...) ...)
         (test expr ...)
         command ...)
     (letrec
       ((loop
         (lambda (var ...)
           (if test
               (begin
                 (if #f #f)
                 expr ...)
               (begin
                 command
                 ...
                 (loop (do &quot;step&quot; var step ...)
                       ...))))))
       (loop init ...)))
    ((do &quot;step&quot; x)
     x)
    ((do &quot;step&quot; x y)
     y)))

</pre></div>


<p>Here is a possible implementation of &lsquo;<samp>delay</samp>&rsquo;, &lsquo;<samp>force</samp>&rsquo; and &lsquo;<samp>delay-force</samp>&rsquo;.  We define the expression
</p>

<div class="example">
<pre class="example">

(delay-force <span class="roman">&lt;expression&gt;</span>)

</pre></div>


<p>to have the same meaning as the procedure call
</p>

<div class="example">
<pre class="example">

(make-promise #f (lambda () <span class="roman">&lt;expression&gt;</span>))

</pre></div>


<p>as follows
</p>

<div class="example">
<pre class="example">

(define-syntax delay-force
  (syntax-rules ()
    ((delay-force expression) 
     (make-promise #f (lambda () expression)))))

</pre></div>


<p>and we define the expression
</p>

<div class="example">
<pre class="example">

(delay <span class="roman">&lt;expression&gt;</span>)

</pre></div>


<p>to have the same meaning as:
</p>

<div class="example">
<pre class="example">

(delay-force (make-promise #t <span class="roman">&lt;expression&gt;</span>))

</pre></div>


<p>as follows
</p>

<div class="example">
<pre class="example">

(define-syntax delay
  (syntax-rules ()
    ((delay expression)
     (delay-force (make-promise #t expression)))))

</pre></div>


<p>where &lsquo;<samp>make-promise</samp>&rsquo; is defined as follows:
</p>

<div class="example">
<pre class="example">

(define make-promise
  (lambda (done? proc)
    (list (cons done? proc))))

</pre></div>


<p>Finally, we define &lsquo;<samp>force</samp>&rsquo; to call the procedure expressions in
promises iteratively using a trampoline technique following
[srfi45] until a non-lazy result (i.e. a value created by &lsquo;<samp>delay</samp>&rsquo; instead of &lsquo;<samp>delay-force</samp>&rsquo;) is returned, as follows:
</p>

<div class="example">
<pre class="example">

(define (force promise)
  (if (promise-done? promise)
      (promise-value promise)
      (let ((promise* ((promise-value promise))))
        (unless (promise-done? promise)
          (promise-update! promise* promise))
        (force promise))))

</pre></div>


<p>with the following promise accessors:
</p>

<div class="example">
<pre class="example">

(define promise-done?
  (lambda (x) (car (car x))))
(define promise-value
  (lambda (x) (cdr (car x))))
(define promise-update!
  (lambda (new old)
    (set-car! (car old) (promise-done? new))
    (set-cdr! (car old) (promise-value new))
    (set-car! new (car old))))

</pre></div>


<p>The following implementation of &lsquo;<samp>make-parameter</samp>&rsquo; and &lsquo;<samp>parameterize</samp>&rsquo; is suitable for an implementation with no threads.
Parameter objects are implemented here as procedures, using two
arbitrary unique objects <tt>&lt;param-set!&gt;</tt> and
<tt>&lt;param-convert&gt;</tt>:
</p>

<div class="example">
<pre class="example">

(define (make-parameter init . o)
  (let* ((converter
          (if (pair? o) (car o) (lambda (x) x)))
         (value (converter init)))
    (lambda args
      (cond
       ((null? args)
        value)
       ((eq? (car args) &lt;param-set!&gt;)
        (set! value (cadr args)))
       ((eq? (car args) &lt;param-convert&gt;)
        converter)
       (else
        (error &quot;bad parameter syntax&quot;))))))

</pre></div>


<p>Then &lsquo;<samp>parameterize</samp>&rsquo; uses &lsquo;<samp>dynamic-wind</samp>&rsquo; to dynamically rebind
the associated value:
</p>

<div class="example">
<pre class="example">

(define-syntax parameterize
  (syntax-rules ()
    ((parameterize (&quot;step&quot;)
                   ((param value p old new) ...)
                   ()
                   body)
     (let ((p param) ...)
       (let ((old (p)) ...
             (new ((p &lt;param-convert&gt;) value)) ...)
         (dynamic-wind
          (lambda () (p &lt;param-set!&gt; new) ...)
          (lambda () . body)
          (lambda () (p &lt;param-set!&gt; old) ...)))))
    ((parameterize (&quot;step&quot;)
                   args
                   ((param value) . rest)
                   body)
     (parameterize (&quot;step&quot;)
                   ((param value p old new) . args)
                   rest
                   body))
    ((parameterize ((param value) ...) . body)
     (parameterize (&quot;step&quot;)
                   ()
                   ((param value) ...)
                   body))))

</pre></div>


<p>The following implementation of &lsquo;<samp>guard</samp>&rsquo; depends on an auxiliary
macro, here called &lsquo;<samp>guard-aux</samp>&rsquo;.
</p>

<div class="example">
<pre class="example">

(define-syntax guard
  (syntax-rules ()
    ((guard (var clause ...) e1 e2 ...)
     ((call/cc
       (lambda (guard-k)
         (with-exception-handler
          (lambda (condition)
            ((call/cc
               (lambda (handler-k)
                 (guard-k
                  (lambda ()
                    (let ((var condition))
                      (guard-aux
                        (handler-k
                          (lambda ()
                            (raise-continuable condition)))
                        clause ...))))))))
          (lambda ()
            (call-with-values
             (lambda () e1 e2 ...)
             (lambda args
               (guard-k
                 (lambda ()
                   (apply values args)))))))))))))

(define-syntax guard-aux
  (syntax-rules (else =&gt;)
    ((guard-aux reraise (else result1 result2 ...))
     (begin result1 result2 ...))
    ((guard-aux reraise (test =&gt; result))
     (let ((temp test))
       (if temp 
           (result temp)
           reraise)))
    ((guard-aux reraise (test =&gt; result)
                clause1 clause2 ...)
     (let ((temp test))
       (if temp
           (result temp)
           (guard-aux reraise clause1 clause2 ...))))
    ((guard-aux reraise (test))
     (or test reraise))
    ((guard-aux reraise (test) clause1 clause2 ...)
     (let ((temp test))
       (if temp
           temp
           (guard-aux reraise clause1 clause2 ...))))
    ((guard-aux reraise (test result1 result2 ...))
     (if test
         (begin result1 result2 ...)
         reraise))
    ((guard-aux reraise
                (test result1 result2 ...)
                clause1 clause2 ...)
     (if test
         (begin result1 result2 ...)
         (guard-aux reraise clause1 clause2 ...)))))

</pre></div>



<div class="example">
<pre class="example">

(define-syntax case-lambda
  (syntax-rules ()
    ((case-lambda (params body0 ...) ...)
     (lambda args
       (let ((len (length args)))
         (letrec-syntax
             ((cl (syntax-rules ::: ()
                    ((cl)
                     (error &quot;no matching clause&quot;))
                    ((cl ((p :::) . body) . rest)
                     (if (= len (length '(p :::)))
                         (apply (lambda (p :::)
                                  . body)
                                args)
                         (cl . rest)))
                    ((cl ((p ::: . tail) . body)
                         . rest)
                     (if (&gt;= len (length '(p :::)))
                         (apply
                          (lambda (p ::: . tail)
                            . body)
                          args)
                         (cl . rest))))))
           (cl (params body0 ...) ...)))))))


</pre></div>


<p>This definition of &lsquo;<samp>cond-expand</samp>&rsquo; does not interact with the 
&lsquo;<samp>features</samp>&rsquo; procedure.  It requires that each feature identifier provided
by the implementation be explicitly mentioned.
</p>

<div class="example">
<pre class="example">

(define-syntax cond-expand
  ;; Extend this to mention all feature ids and libraries
  (syntax-rules (and or not else r7rs library scheme base)
    ((cond-expand)
     (syntax-error &quot;Unfulfilled cond-expand&quot;))
    ((cond-expand (else body ...))
     (begin body ...))
    ((cond-expand ((and) body ...) more-clauses ...)
     (begin body ...))
    ((cond-expand ((and req1 req2 ...) body ...)
                  more-clauses ...)
     (cond-expand
       (req1
         (cond-expand
           ((and req2 ...) body ...)
           more-clauses ...))
       more-clauses ...))
    ((cond-expand ((or) body ...) more-clauses ...)
     (cond-expand more-clauses ...))
    ((cond-expand ((or req1 req2 ...) body ...)
                  more-clauses ...)
     (cond-expand
       (req1
        (begin body ...))
       (else
        (cond-expand
           ((or req2 ...) body ...)
           more-clauses ...))))
    ((cond-expand ((not req) body ...)
                  more-clauses ...)
     (cond-expand
       (req
         (cond-expand more-clauses ...))
       (else body ...)))
    ((cond-expand (r7rs body ...)
                  more-clauses ...)
       (begin body ...))
    ;; Add clauses here for each
    ;; supported feature identifier.
    ;; Samples:
    ;; ((cond-expand (exact-closed body ...)
    ;;               more-clauses ...)
    ;;   (begin body ...))
    ;; ((cond-expand (ieee-float body ...)
    ;;               more-clauses ...)
    ;;   (begin body ...))
    ((cond-expand ((library (scheme base))
                   body ...)
                  more-clauses ...)
      (begin body ...))
    ;; Add clauses here for each library
    ((cond-expand (feature-id body ...)
                  more-clauses ...)
       (cond-expand more-clauses ...))
    ((cond-expand ((library (name ...))
                   body ...)
                  more-clauses ...)
       (cond-expand more-clauses ...))))


</pre></div>

         

</div>
</div>
<div class="appendix">
<hr>
</div>
<div class="chapter" id="Standard-Libraries">
<div class="header">
<p>
Next: <a href="#Standard-Feature-Identifiers" accesskey="n" rel="next">Standard Feature Identifiers</a>, Previous: <a href="#Formal-syntax-and-semantics" accesskey="p" rel="prev">Formal syntax and semantics</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Standard-Libraries-1"></span><h2 class="chapter">B Standard Libraries</h2>

<span id="index-standard-libraries"></span>



<p>This section lists the exports provided by the standard libraries.  The
libraries are factored so as to separate features which might not be
supported by all implementations, or which might be expensive to load.
</p>
<p>The &lsquo;<samp>scheme</samp>&rsquo; library prefix is used for all standard libraries, and
is reserved for use by future standards.
</p>
<p><b>Base Library</b>
</p>
<p>The <tt>(scheme base)</tt> library exports many of the procedures and
syntax bindings that are traditionally associated with Scheme.
The division between the base library and the other standard libraries is
based on use, not on construction. In particular, some facilities that are
typically implemented as primitives by a compiler or the run-time system
rather than in terms of other standard procedures or syntax are
not part of the base library, but are defined in separate libraries.
By the same token, some exports of the base library are implementable
in terms of other exports.  They are redundant in the strict sense of
the word, but they capture common patterns of usage, and are therefore
provided as convenient abbreviations.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>*</samp>&rsquo;                       &lsquo;<samp>+</samp>&rsquo;
&lsquo;<samp>-</samp>&rsquo;                       &lsquo;<samp>...</samp>&rsquo;
&lsquo;<samp>/</samp>&rsquo;                       &lsquo;<samp>&lt;</samp>&rsquo;
&lsquo;<samp>&lt;=</samp>&rsquo;                      &lsquo;<samp>=</samp>&rsquo;
&lsquo;<samp>=&gt;</samp>&rsquo;                      &lsquo;<samp>&gt;</samp>&rsquo;
&lsquo;<samp>&gt;=</samp>&rsquo;                      &lsquo;<samp> </samp>&rsquo;
&lsquo;<samp>abs</samp>&rsquo;                     &lsquo;<samp>and</samp>&rsquo;
&lsquo;<samp>append</samp>&rsquo;                  &lsquo;<samp>apply</samp>&rsquo;
&lsquo;<samp>assoc</samp>&rsquo;                   &lsquo;<samp>assq</samp>&rsquo;
&lsquo;<samp>assv</samp>&rsquo;                    &lsquo;<samp>begin</samp>&rsquo;
&lsquo;<samp>binary-port? </samp>&rsquo;           &lsquo;<samp>boolean=?</samp>&rsquo;
&lsquo;<samp>boolean? </samp>&rsquo;               &lsquo;<samp>bytevector</samp>&rsquo;
&lsquo;<samp>bytevector-append</samp>&rsquo;       &lsquo;<samp>bytevector-copy</samp>&rsquo;
&lsquo;<samp>bytevector-copy!</samp>&rsquo;        &lsquo;<samp>bytevector-length</samp>&rsquo;
&lsquo;<samp>bytevector-u8-ref</samp>&rsquo;       &lsquo;<samp>bytevector-u8-set!</samp>&rsquo;
&lsquo;<samp>bytevector? </samp>&rsquo;            &lsquo;<samp>caar</samp>&rsquo;
&lsquo;<samp>cadr</samp>&rsquo;
&lsquo;<samp>call-with-current-continuation</samp>&rsquo;
&lsquo;<samp>call-with-port</samp>&rsquo;          &lsquo;<samp>call-with-values</samp>&rsquo;
&lsquo;<samp>call/cc</samp>&rsquo;                 &lsquo;<samp>car</samp>&rsquo;
&lsquo;<samp>case</samp>&rsquo;                    &lsquo;<samp>cdar</samp>&rsquo;
&lsquo;<samp>cddr</samp>&rsquo;                    &lsquo;<samp>cdr</samp>&rsquo;
&lsquo;<samp>ceiling</samp>&rsquo;                 &lsquo;<samp>char-&gt;integer</samp>&rsquo;
&lsquo;<samp>char-ready? </samp>&rsquo;            &lsquo;<samp>char&lt;=?</samp>&rsquo;
&lsquo;<samp>char&lt;? </samp>&rsquo;                 &lsquo;<samp>char=?</samp>&rsquo;
&lsquo;<samp>char&gt;=? </samp>&rsquo;                &lsquo;<samp>char&gt;?</samp>&rsquo;
&lsquo;<samp>char? </samp>&rsquo;                  &lsquo;<samp>close-input-port</samp>&rsquo;
&lsquo;<samp>close-output-port</samp>&rsquo;       &lsquo;<samp>close-port</samp>&rsquo;
&lsquo;<samp>complex? </samp>&rsquo;               &lsquo;<samp>cond</samp>&rsquo;
&lsquo;<samp>cond-expand</samp>&rsquo;             &lsquo;<samp>cons</samp>&rsquo;
&lsquo;<samp>current-error-port</samp>&rsquo;      &lsquo;<samp>current-input-port</samp>&rsquo;
&lsquo;<samp>current-output-port</samp>&rsquo;     &lsquo;<samp>define</samp>&rsquo;
&lsquo;<samp>define-record-type</samp>&rsquo;      &lsquo;<samp>define-syntax</samp>&rsquo;
&lsquo;<samp>define-values</samp>&rsquo;           &lsquo;<samp>denominator</samp>&rsquo;
&lsquo;<samp>do</samp>&rsquo;                      &lsquo;<samp>dynamic-wind</samp>&rsquo;
&lsquo;<samp>else</samp>&rsquo;                    &lsquo;<samp>eof-object</samp>&rsquo;
&lsquo;<samp>eof-object? </samp>&rsquo;            &lsquo;<samp>eq?</samp>&rsquo;
&lsquo;<samp>equal? </samp>&rsquo;                 &lsquo;<samp>eqv?</samp>&rsquo;
&lsquo;<samp>error</samp>&rsquo;                   &lsquo;<samp>error-object-irritants</samp>&rsquo;
&lsquo;<samp>error-object-message</samp>&rsquo;    &lsquo;<samp>error-object?</samp>&rsquo;
&lsquo;<samp>even? </samp>&rsquo;                  &lsquo;<samp>exact</samp>&rsquo;
&lsquo;<samp>exact-integer-sqrt</samp>&rsquo;      &lsquo;<samp>exact-integer?</samp>&rsquo;
&lsquo;<samp>exact? </samp>&rsquo;                 &lsquo;<samp>expt</samp>&rsquo;
&lsquo;<samp>features</samp>&rsquo;                &lsquo;<samp>file-error?</samp>&rsquo;
&lsquo;<samp>floor</samp>&rsquo;                   &lsquo;<samp>floor-quotient</samp>&rsquo;
&lsquo;<samp>floor-remainder</samp>&rsquo;         &lsquo;<samp>floor/</samp>&rsquo;
&lsquo;<samp>flush-output-port</samp>&rsquo;       &lsquo;<samp>for-each</samp>&rsquo;
&lsquo;<samp>gcd</samp>&rsquo;                     &lsquo;<samp>get-output-bytevector</samp>&rsquo;
&lsquo;<samp>get-output-string</samp>&rsquo;       &lsquo;<samp>guard</samp>&rsquo;
&lsquo;<samp>if</samp>&rsquo;                      &lsquo;<samp>include</samp>&rsquo;
&lsquo;<samp>include-ci</samp>&rsquo;              &lsquo;<samp>inexact</samp>&rsquo;
&lsquo;<samp>inexact? </samp>&rsquo;               &lsquo;<samp>input-port-open?</samp>&rsquo;
&lsquo;<samp>input-port? </samp>&rsquo;            &lsquo;<samp>integer-&gt;char</samp>&rsquo;
&lsquo;<samp>integer? </samp>&rsquo;               &lsquo;<samp>lambda</samp>&rsquo;
&lsquo;<samp>lcm</samp>&rsquo;                     &lsquo;<samp>length</samp>&rsquo;
&lsquo;<samp>let</samp>&rsquo;                     &lsquo;<samp>let*</samp>&rsquo;
&lsquo;<samp>let*-values</samp>&rsquo;             &lsquo;<samp>let-syntax</samp>&rsquo;
&lsquo;<samp>let-values</samp>&rsquo;              &lsquo;<samp>letrec</samp>&rsquo;
&lsquo;<samp>letrec*</samp>&rsquo;                 &lsquo;<samp>letrec-syntax</samp>&rsquo;
&lsquo;<samp>list</samp>&rsquo;                    &lsquo;<samp>list-&gt;string</samp>&rsquo;
&lsquo;<samp>list-&gt;vector</samp>&rsquo;            &lsquo;<samp>list-copy</samp>&rsquo;
&lsquo;<samp>list-ref</samp>&rsquo;                &lsquo;<samp>list-set!</samp>&rsquo;
&lsquo;<samp>list-tail</samp>&rsquo;               &lsquo;<samp>list?</samp>&rsquo;
&lsquo;<samp>make-bytevector</samp>&rsquo;         &lsquo;<samp>make-list</samp>&rsquo;
&lsquo;<samp>make-parameter</samp>&rsquo;          &lsquo;<samp>make-string</samp>&rsquo;
&lsquo;<samp>make-vector</samp>&rsquo;             &lsquo;<samp>map</samp>&rsquo;
&lsquo;<samp>max</samp>&rsquo;                     &lsquo;<samp>member</samp>&rsquo;
&lsquo;<samp>memq</samp>&rsquo;                    &lsquo;<samp>memv</samp>&rsquo;
&lsquo;<samp>min</samp>&rsquo;                     &lsquo;<samp>modulo</samp>&rsquo;
&lsquo;<samp>negative? </samp>&rsquo;              &lsquo;<samp>newline</samp>&rsquo;
&lsquo;<samp>not</samp>&rsquo;                     &lsquo;<samp>null?</samp>&rsquo;
&lsquo;<samp>number-&gt;string</samp>&rsquo;          &lsquo;<samp>number?</samp>&rsquo;
&lsquo;<samp>numerator</samp>&rsquo;               &lsquo;<samp>odd?</samp>&rsquo;
&lsquo;<samp>open-input-bytevector</samp>&rsquo;   &lsquo;<samp>open-input-string</samp>&rsquo;
&lsquo;<samp>open-output-bytevector</samp>&rsquo;  &lsquo;<samp>open-output-string</samp>&rsquo;
&lsquo;<samp>or</samp>&rsquo;                      &lsquo;<samp>output-port-open?</samp>&rsquo;
&lsquo;<samp>output-port? </samp>&rsquo;           &lsquo;<samp>pair?</samp>&rsquo;
&lsquo;<samp>parameterize</samp>&rsquo;            &lsquo;<samp>peek-char</samp>&rsquo;
&lsquo;<samp>peek-u8</samp>&rsquo;                 &lsquo;<samp>port?</samp>&rsquo;
&lsquo;<samp>positive? </samp>&rsquo;              &lsquo;<samp>procedure?</samp>&rsquo;
&lsquo;<samp>quasiquote</samp>&rsquo;              &lsquo;<samp>quote</samp>&rsquo;
&lsquo;<samp>quotient</samp>&rsquo;                &lsquo;<samp>raise</samp>&rsquo;
&lsquo;<samp>raise-continuable</samp>&rsquo;       &lsquo;<samp>rational?</samp>&rsquo;
&lsquo;<samp>rationalize</samp>&rsquo;             &lsquo;<samp>read-bytevector</samp>&rsquo;
&lsquo;<samp>read-bytevector!</samp>&rsquo;        &lsquo;<samp>read-char</samp>&rsquo;
&lsquo;<samp>read-error? </samp>&rsquo;            &lsquo;<samp>read-line</samp>&rsquo;
&lsquo;<samp>read-string</samp>&rsquo;             &lsquo;<samp>read-u8</samp>&rsquo;
&lsquo;<samp>real? </samp>&rsquo;                  &lsquo;<samp>remainder</samp>&rsquo;
&lsquo;<samp>reverse</samp>&rsquo;                 &lsquo;<samp>round</samp>&rsquo;
&lsquo;<samp>set!</samp>&rsquo;                    &lsquo;<samp>set-car!</samp>&rsquo;
&lsquo;<samp>set-cdr!</samp>&rsquo;                &lsquo;<samp>square</samp>&rsquo;
&lsquo;<samp>string</samp>&rsquo;                  &lsquo;<samp>string-&gt;list</samp>&rsquo;
&lsquo;<samp>string-&gt;number</samp>&rsquo;          &lsquo;<samp>string-&gt;symbol</samp>&rsquo;
&lsquo;<samp>string-&gt;utf8</samp>&rsquo;            &lsquo;<samp>string-&gt;vector</samp>&rsquo;
&lsquo;<samp>string-append</samp>&rsquo;           &lsquo;<samp>string-copy</samp>&rsquo;
&lsquo;<samp>string-copy!</samp>&rsquo;            &lsquo;<samp>string-fill!</samp>&rsquo;
&lsquo;<samp>string-for-each</samp>&rsquo;         &lsquo;<samp>string-length</samp>&rsquo;
&lsquo;<samp>string-map</samp>&rsquo;              &lsquo;<samp>string-ref</samp>&rsquo;
&lsquo;<samp>string-set!</samp>&rsquo;             &lsquo;<samp>string&lt;=?</samp>&rsquo;
&lsquo;<samp>string&lt;? </samp>&rsquo;               &lsquo;<samp>string=?</samp>&rsquo;
&lsquo;<samp>string&gt;=? </samp>&rsquo;              &lsquo;<samp>string&gt;?</samp>&rsquo;
&lsquo;<samp>string? </samp>&rsquo;                &lsquo;<samp>substring</samp>&rsquo;
&lsquo;<samp>symbol-&gt;string</samp>&rsquo;          &lsquo;<samp>symbol=?</samp>&rsquo;
&lsquo;<samp>symbol? </samp>&rsquo;                &lsquo;<samp>syntax-error</samp>&rsquo;
&lsquo;<samp>syntax-rules</samp>&rsquo;            &lsquo;<samp>textual-port?</samp>&rsquo;
&lsquo;<samp>truncate</samp>&rsquo;                &lsquo;<samp>truncate-quotient</samp>&rsquo;
&lsquo;<samp>truncate-remainder</samp>&rsquo;      &lsquo;<samp>truncate/</samp>&rsquo;
&lsquo;<samp>u8-ready? </samp>&rsquo;              &lsquo;<samp>unless</samp>&rsquo;
&lsquo;<samp>unquote</samp>&rsquo;                 &lsquo;<samp>unquote-splicing</samp>&rsquo;
&lsquo;<samp>utf8-&gt;string</samp>&rsquo;            &lsquo;<samp>values</samp>&rsquo;
&lsquo;<samp>vector</samp>&rsquo;                  &lsquo;<samp>vector-&gt;list</samp>&rsquo;
&lsquo;<samp>vector-&gt;string</samp>&rsquo;          &lsquo;<samp>vector-append</samp>&rsquo;
&lsquo;<samp>vector-copy</samp>&rsquo;             &lsquo;<samp>vector-copy!</samp>&rsquo;
&lsquo;<samp>vector-fill!</samp>&rsquo;            &lsquo;<samp>vector-for-each</samp>&rsquo;
&lsquo;<samp>vector-length</samp>&rsquo;           &lsquo;<samp>vector-map</samp>&rsquo;
&lsquo;<samp>vector-ref</samp>&rsquo;              &lsquo;<samp>vector-set!</samp>&rsquo;
&lsquo;<samp>vector? </samp>&rsquo;                &lsquo;<samp>when</samp>&rsquo;
&lsquo;<samp>with-exception-handler</samp>&rsquo;  &lsquo;<samp>write-bytevector</samp>&rsquo;
&lsquo;<samp>write-char</samp>&rsquo;              &lsquo;<samp>write-string</samp>&rsquo;
&lsquo;<samp>write-u8</samp>&rsquo;                &lsquo;<samp>zero?</samp>&rsquo;

</pre></div>


<p><b>Case-Lambda Library</b>
</p>
<p>The <tt>(scheme case-lambda)</tt> library exports the &lsquo;<samp>case-lambda</samp>&rsquo;
syntax.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>case-lambda</samp>&rsquo;

</pre></div>


<p><b>Char Library</b>
</p>
<p>The <tt>(scheme char)</tt> library provides the procedures for dealing with
characters that involve potentially large tables when supporting all of Unicode.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>char-alphabetic? </samp>&rsquo;       &lsquo;<samp>char-ci&lt;=?</samp>&rsquo;
&lsquo;<samp>char-ci&lt;? </samp>&rsquo;              &lsquo;<samp>char-ci=?</samp>&rsquo;
&lsquo;<samp>char-ci&gt;=? </samp>&rsquo;             &lsquo;<samp>char-ci&gt;?</samp>&rsquo;
&lsquo;<samp>char-downcase</samp>&rsquo;           &lsquo;<samp>char-foldcase</samp>&rsquo;
&lsquo;<samp>char-lower-case? </samp>&rsquo;       &lsquo;<samp>char-numeric?</samp>&rsquo;
&lsquo;<samp>char-upcase</samp>&rsquo;             &lsquo;<samp>char-upper-case?</samp>&rsquo;
&lsquo;<samp>char-whitespace? </samp>&rsquo;       &lsquo;<samp>digit-value</samp>&rsquo;
&lsquo;<samp>string-ci&lt;=? </samp>&rsquo;           &lsquo;<samp>string-ci&lt;?</samp>&rsquo;
&lsquo;<samp>string-ci=? </samp>&rsquo;            &lsquo;<samp>string-ci&gt;=?</samp>&rsquo;
&lsquo;<samp>string-ci&gt;? </samp>&rsquo;            &lsquo;<samp>string-downcase</samp>&rsquo;
&lsquo;<samp>string-foldcase</samp>&rsquo;         &lsquo;<samp>string-upcase</samp>&rsquo;

</pre></div>


<p><b>Complex Library</b>
</p>
<p>The <tt>(scheme complex)</tt> library exports procedures which are
typically only useful with non-real numbers.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>angle</samp>&rsquo;                   &lsquo;<samp>imag-part</samp>&rsquo;
&lsquo;<samp>magnitude</samp>&rsquo;               &lsquo;<samp>make-polar</samp>&rsquo;
&lsquo;<samp>make-rectangular</samp>&rsquo;        &lsquo;<samp>real-part</samp>&rsquo;

</pre></div>


<p><b>CxR Library</b>
</p>
<p>The <tt>(scheme cxr)</tt> library exports twenty-four procedures which
are the compositions of from three to four &lsquo;<samp>car</samp>&rsquo; and &lsquo;<samp>cdr</samp>&rsquo;
operations.  For example &lsquo;<samp>caddar</samp>&rsquo; could be defined by
</p>

<div class="example">
<pre class="example">

(define caddar
  (lambda (x) (car (cdr (cdr (car x))))))<span class="roman">.</span>

</pre></div>


<p>The procedures &lsquo;<samp>car</samp>&rsquo; and &lsquo;<samp>cdr</samp>&rsquo; themselves and the four
two-level compositions are included in the base library.  See
section <a href="#Pairs-and-lists">Pairs and lists</a>.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>caaaar</samp>&rsquo;                  &lsquo;<samp>caaadr</samp>&rsquo;
&lsquo;<samp>caaar</samp>&rsquo;                   &lsquo;<samp>caadar</samp>&rsquo;
&lsquo;<samp>caaddr</samp>&rsquo;                  &lsquo;<samp>caadr</samp>&rsquo;
&lsquo;<samp>cadaar</samp>&rsquo;                  &lsquo;<samp>cadadr</samp>&rsquo;
&lsquo;<samp>cadar</samp>&rsquo;                   &lsquo;<samp>caddar</samp>&rsquo;
&lsquo;<samp>cadddr</samp>&rsquo;                  &lsquo;<samp>caddr</samp>&rsquo;
&lsquo;<samp>cdaaar</samp>&rsquo;                  &lsquo;<samp>cdaadr</samp>&rsquo;
&lsquo;<samp>cdaar</samp>&rsquo;                   &lsquo;<samp>cdadar</samp>&rsquo;
&lsquo;<samp>cdaddr</samp>&rsquo;                  &lsquo;<samp>cdadr</samp>&rsquo;
&lsquo;<samp>cddaar</samp>&rsquo;                  &lsquo;<samp>cddadr</samp>&rsquo;
&lsquo;<samp>cddar</samp>&rsquo;                   &lsquo;<samp>cdddar</samp>&rsquo;
&lsquo;<samp>cddddr</samp>&rsquo;                  &lsquo;<samp>cdddr</samp>&rsquo;

</pre></div>


<p><b>Eval Library</b>
</p>
<p>The <tt>(scheme eval)</tt> library exports procedures for evaluating Scheme
data as programs.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>environment</samp>&rsquo;             &lsquo;<samp>eval</samp>&rsquo;

</pre></div>


<p><b>File Library</b>
</p>
<p>The <tt>(scheme file)</tt> library provides procedures for accessing
files.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>call-with-input-file</samp>&rsquo;    &lsquo;<samp>call-with-output-file</samp>&rsquo;
&lsquo;<samp>delete-file</samp>&rsquo;             &lsquo;<samp>file-exists?</samp>&rsquo;
&lsquo;<samp>open-binary-input-file</samp>&rsquo;  &lsquo;<samp>open-binary-output-file</samp>&rsquo;
&lsquo;<samp>open-input-file</samp>&rsquo;         &lsquo;<samp>open-output-file</samp>&rsquo;
&lsquo;<samp>with-input-from-file</samp>&rsquo;    &lsquo;<samp>with-output-to-file</samp>&rsquo;

</pre></div>


<p><b>Inexact Library</b>
</p>
<p>The <tt>(scheme inexact)</tt> library exports procedures which are
typically only useful with inexact values.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>acos</samp>&rsquo;                    &lsquo;<samp>asin</samp>&rsquo;
&lsquo;<samp>atan</samp>&rsquo;                    &lsquo;<samp>cos</samp>&rsquo;
&lsquo;<samp>exp</samp>&rsquo;                     &lsquo;<samp>finite?</samp>&rsquo;
&lsquo;<samp>infinite? </samp>&rsquo;              &lsquo;<samp>log</samp>&rsquo;
&lsquo;<samp>nan? </samp>&rsquo;                   &lsquo;<samp>sin</samp>&rsquo;
&lsquo;<samp>sqrt</samp>&rsquo;                    &lsquo;<samp>tan</samp>&rsquo;

</pre></div>


<p><b>Lazy Library</b>
</p>
<p>The <tt>(scheme lazy)</tt> library exports procedures and syntax keywords for lazy evaluation.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>delay</samp>&rsquo;                   &lsquo;<samp>delay-force</samp>&rsquo;
&lsquo;<samp>force</samp>&rsquo;                   &lsquo;<samp>make-promise</samp>&rsquo;
&lsquo;<samp>promise?</samp>&rsquo;

</pre></div>


<p><b>Load Library</b>
</p>
<p>The <tt>(scheme load)</tt> library exports procedures for loading
Scheme expressions from files.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>load</samp>&rsquo;

</pre></div>


<p><b>Process-Context Library</b>
</p>
<p>The <tt>(scheme process-context)</tt> library exports procedures for
accessing with the program&rsquo;s calling context.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>command-line</samp>&rsquo;            &lsquo;<samp>emergency-exit</samp>&rsquo;
&lsquo;<samp>exit</samp>&rsquo;
&lsquo;<samp>get-environment-variable</samp>&rsquo;
&lsquo;<samp>get-environment-variables</samp>&rsquo;

</pre></div>


<p><b>Read Library</b>
</p>
<p>The <tt>(scheme read)</tt> library provides procedures for reading
Scheme objects.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>read</samp>&rsquo;

</pre></div>


<p><b>Repl Library</b>
</p>
<p>The <tt>(scheme repl)</tt> library exports the &lsquo;<samp>interaction-environment</samp>&rsquo; procedure.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>interaction-environment</samp>&rsquo;

</pre></div>


<p><b>Time Library</b>
</p>
<p>The <tt>(scheme time)</tt> library provides access to time-related values.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>current-jiffy</samp>&rsquo;           &lsquo;<samp>current-second</samp>&rsquo;
&lsquo;<samp>jiffies-per-second</samp>&rsquo;

</pre></div>


<p><b>Write Library</b>
</p>
<p>The <tt>(scheme write)</tt> library provides procedures for writing
Scheme objects.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>display</samp>&rsquo;                 &lsquo;<samp>write</samp>&rsquo;
&lsquo;<samp>write-shared</samp>&rsquo;            &lsquo;<samp>write-simple</samp>&rsquo;

</pre></div>


<p><b>R5RS Library</b>
</p>
<p>The <tt>(scheme r5rs)</tt> library provides the identifiers defined by
R<sup>5</sup>RS, except that
&lsquo;<samp>transcript-on</samp>&rsquo; and &lsquo;<samp>transcript-off</samp>&rsquo; are not present.
Note that
the &lsquo;<samp>exact</samp>&rsquo; and &lsquo;<samp>inexact</samp>&rsquo; procedures appear under their R<sup>5</sup>RS names
&lsquo;<samp>inexact-&gt;exact</samp>&rsquo; and &lsquo;<samp>exact-&gt;inexact</samp>&rsquo; respectively.
However, if an implementation does not provide a particular library such as the
complex library, the corresponding identifiers will not appear in this
library either.
</p>

<div class="example">
<pre class="example">

&lsquo;<samp>*</samp>&rsquo;                       &lsquo;<samp>+</samp>&rsquo;
&lsquo;<samp>-</samp>&rsquo;                       &lsquo;<samp>...</samp>&rsquo;
&lsquo;<samp>/</samp>&rsquo;                       &lsquo;<samp>&lt;</samp>&rsquo;
&lsquo;<samp>&lt;=</samp>&rsquo;                      &lsquo;<samp>=</samp>&rsquo;
&lsquo;<samp>=&gt;</samp>&rsquo;                      &lsquo;<samp>&gt;</samp>&rsquo;
&lsquo;<samp>&gt;=</samp>&rsquo;                      &lsquo;<samp> </samp>&rsquo;
&lsquo;<samp>abs</samp>&rsquo;                     &lsquo;<samp>acos</samp>&rsquo;
&lsquo;<samp>and</samp>&rsquo;                     &lsquo;<samp>angle</samp>&rsquo;
&lsquo;<samp>append</samp>&rsquo;                  &lsquo;<samp>apply</samp>&rsquo;
&lsquo;<samp>asin</samp>&rsquo;                    &lsquo;<samp>assoc</samp>&rsquo;
&lsquo;<samp>assq</samp>&rsquo;                    &lsquo;<samp>assv</samp>&rsquo;
&lsquo;<samp>atan</samp>&rsquo;                    &lsquo;<samp>begin</samp>&rsquo;
&lsquo;<samp>boolean? </samp>&rsquo;               &lsquo;<samp>caaaar</samp>&rsquo;
&lsquo;<samp>caaadr</samp>&rsquo;                  &lsquo;<samp>caaar</samp>&rsquo;
&lsquo;<samp>caadar</samp>&rsquo;                  &lsquo;<samp>caaddr</samp>&rsquo;
&lsquo;<samp>caadr</samp>&rsquo;                   &lsquo;<samp>caar</samp>&rsquo;
&lsquo;<samp>cadaar</samp>&rsquo;                  &lsquo;<samp>cadadr</samp>&rsquo;
&lsquo;<samp>cadar</samp>&rsquo;                   &lsquo;<samp>caddar</samp>&rsquo;
&lsquo;<samp>cadddr</samp>&rsquo;                  &lsquo;<samp>caddr</samp>&rsquo;
&lsquo;<samp>cadr</samp>&rsquo;
&lsquo;<samp>call-with-current-continuation</samp>&rsquo;
&lsquo;<samp>call-with-input-file</samp>&rsquo;    &lsquo;<samp>call-with-output-file</samp>&rsquo;
&lsquo;<samp>call-with-values</samp>&rsquo;        &lsquo;<samp>car</samp>&rsquo;
&lsquo;<samp>case</samp>&rsquo;                    &lsquo;<samp>cdaaar</samp>&rsquo;
&lsquo;<samp>cdaadr</samp>&rsquo;                  &lsquo;<samp>cdaar</samp>&rsquo;
&lsquo;<samp>cdadar</samp>&rsquo;                  &lsquo;<samp>cdaddr</samp>&rsquo;
&lsquo;<samp>cdadr</samp>&rsquo;                   &lsquo;<samp>cdar</samp>&rsquo;
&lsquo;<samp>cddaar</samp>&rsquo;                  &lsquo;<samp>cddadr</samp>&rsquo;
&lsquo;<samp>cddar</samp>&rsquo;                   &lsquo;<samp>cdddar</samp>&rsquo;
&lsquo;<samp>cddddr</samp>&rsquo;                  &lsquo;<samp>cdddr</samp>&rsquo;
&lsquo;<samp>cddr</samp>&rsquo;                    &lsquo;<samp>cdr</samp>&rsquo;
&lsquo;<samp>ceiling</samp>&rsquo;                 &lsquo;<samp>char-&gt;integer</samp>&rsquo;
&lsquo;<samp>char-alphabetic? </samp>&rsquo;       &lsquo;<samp>char-ci&lt;=?</samp>&rsquo;
&lsquo;<samp>char-ci&lt;? </samp>&rsquo;              &lsquo;<samp>char-ci=?</samp>&rsquo;
&lsquo;<samp>char-ci&gt;=? </samp>&rsquo;             &lsquo;<samp>char-ci&gt;?</samp>&rsquo;
&lsquo;<samp>char-downcase</samp>&rsquo;           &lsquo;<samp>char-lower-case?</samp>&rsquo;
&lsquo;<samp>char-numeric? </samp>&rsquo;          &lsquo;<samp>char-ready?</samp>&rsquo;
&lsquo;<samp>char-upcase</samp>&rsquo;             &lsquo;<samp>char-upper-case?</samp>&rsquo;
&lsquo;<samp>char-whitespace? </samp>&rsquo;       &lsquo;<samp>char&lt;=?</samp>&rsquo;
&lsquo;<samp>char&lt;? </samp>&rsquo;                 &lsquo;<samp>char=?</samp>&rsquo;
&lsquo;<samp>char&gt;=? </samp>&rsquo;                &lsquo;<samp>char&gt;?</samp>&rsquo;
&lsquo;<samp>char? </samp>&rsquo;                  &lsquo;<samp>close-input-port</samp>&rsquo;
&lsquo;<samp>close-output-port</samp>&rsquo;       &lsquo;<samp>complex?</samp>&rsquo;
&lsquo;<samp>cond</samp>&rsquo;                    &lsquo;<samp>cons</samp>&rsquo;
&lsquo;<samp>cos</samp>&rsquo;                     &lsquo;<samp>current-input-port</samp>&rsquo;
&lsquo;<samp>current-output-port</samp>&rsquo;     &lsquo;<samp>define</samp>&rsquo;
&lsquo;<samp>define-syntax</samp>&rsquo;           &lsquo;<samp>delay</samp>&rsquo;
&lsquo;<samp>denominator</samp>&rsquo;             &lsquo;<samp>display</samp>&rsquo;
&lsquo;<samp>do</samp>&rsquo;                      &lsquo;<samp>dynamic-wind</samp>&rsquo;
&lsquo;<samp>else</samp>&rsquo;                    &lsquo;<samp>eof-object?</samp>&rsquo;
&lsquo;<samp>eq? </samp>&rsquo;                    &lsquo;<samp>equal?</samp>&rsquo;
&lsquo;<samp>eqv? </samp>&rsquo;                   &lsquo;<samp>eval</samp>&rsquo;
&lsquo;<samp>even? </samp>&rsquo;                  &lsquo;<samp>exact-&gt;inexact</samp>&rsquo;
&lsquo;<samp>exact? </samp>&rsquo;                 &lsquo;<samp>exp</samp>&rsquo;
&lsquo;<samp>expt</samp>&rsquo;                    &lsquo;<samp>floor</samp>&rsquo;
&lsquo;<samp>for-each</samp>&rsquo;                &lsquo;<samp>force</samp>&rsquo;
&lsquo;<samp>gcd</samp>&rsquo;                     &lsquo;<samp>if</samp>&rsquo;
&lsquo;<samp>imag-part</samp>&rsquo;               &lsquo;<samp>inexact-&gt;exact</samp>&rsquo;
&lsquo;<samp>inexact? </samp>&rsquo;               &lsquo;<samp>input-port?</samp>&rsquo;
&lsquo;<samp>integer-&gt;char</samp>&rsquo;           &lsquo;<samp>integer?</samp>&rsquo;
&lsquo;<samp>interaction-environment</samp>&rsquo; &lsquo;<samp>lambda</samp>&rsquo;
&lsquo;<samp>lcm</samp>&rsquo;                     &lsquo;<samp>length</samp>&rsquo;
&lsquo;<samp>let</samp>&rsquo;                     &lsquo;<samp>let*</samp>&rsquo;
&lsquo;<samp>let-syntax</samp>&rsquo;              &lsquo;<samp>letrec</samp>&rsquo;
&lsquo;<samp>letrec-syntax</samp>&rsquo;           &lsquo;<samp>list</samp>&rsquo;
&lsquo;<samp>list-&gt;string</samp>&rsquo;            &lsquo;<samp>list-&gt;vector</samp>&rsquo;
&lsquo;<samp>list-ref</samp>&rsquo;                &lsquo;<samp>list-tail</samp>&rsquo;
&lsquo;<samp>list? </samp>&rsquo;                  &lsquo;<samp>load</samp>&rsquo;
&lsquo;<samp>log</samp>&rsquo;                     &lsquo;<samp>magnitude</samp>&rsquo;
&lsquo;<samp>make-polar</samp>&rsquo;              &lsquo;<samp>make-rectangular</samp>&rsquo;
&lsquo;<samp>make-string</samp>&rsquo;             &lsquo;<samp>make-vector</samp>&rsquo;
&lsquo;<samp>map</samp>&rsquo;                     &lsquo;<samp>max</samp>&rsquo;
&lsquo;<samp>member</samp>&rsquo;                  &lsquo;<samp>memq</samp>&rsquo;
&lsquo;<samp>memv</samp>&rsquo;                    &lsquo;<samp>min</samp>&rsquo;
&lsquo;<samp>modulo</samp>&rsquo;                  &lsquo;<samp>negative?</samp>&rsquo;
&lsquo;<samp>newline</samp>&rsquo;                 &lsquo;<samp>not</samp>&rsquo;
&lsquo;<samp>null-environment</samp>&rsquo;        &lsquo;<samp>null?</samp>&rsquo;
&lsquo;<samp>number-&gt;string</samp>&rsquo;          &lsquo;<samp>number?</samp>&rsquo;
&lsquo;<samp>numerator</samp>&rsquo;               &lsquo;<samp>odd?</samp>&rsquo;
&lsquo;<samp>open-input-file</samp>&rsquo;         &lsquo;<samp>open-output-file</samp>&rsquo;
&lsquo;<samp>or</samp>&rsquo;                      &lsquo;<samp>output-port?</samp>&rsquo;
&lsquo;<samp>pair? </samp>&rsquo;                  &lsquo;<samp>peek-char</samp>&rsquo;
&lsquo;<samp>positive? </samp>&rsquo;              &lsquo;<samp>procedure?</samp>&rsquo;
&lsquo;<samp>quasiquote</samp>&rsquo;              &lsquo;<samp>quote</samp>&rsquo;
&lsquo;<samp>quotient</samp>&rsquo;                &lsquo;<samp>rational?</samp>&rsquo;
&lsquo;<samp>rationalize</samp>&rsquo;             &lsquo;<samp>read</samp>&rsquo;
&lsquo;<samp>read-char</samp>&rsquo;               &lsquo;<samp>real-part</samp>&rsquo;
&lsquo;<samp>real? </samp>&rsquo;                  &lsquo;<samp>remainder</samp>&rsquo;
&lsquo;<samp>reverse</samp>&rsquo;                 &lsquo;<samp>round</samp>&rsquo;
&lsquo;<samp>scheme-report-environment</samp>&rsquo;
&lsquo;<samp>set!</samp>&rsquo;                    &lsquo;<samp>set-car!</samp>&rsquo;
&lsquo;<samp>set-cdr!</samp>&rsquo;                &lsquo;<samp>sin</samp>&rsquo;
&lsquo;<samp>sqrt</samp>&rsquo;                    &lsquo;<samp>string</samp>&rsquo;
&lsquo;<samp>string-&gt;list</samp>&rsquo;            &lsquo;<samp>string-&gt;number</samp>&rsquo;
&lsquo;<samp>string-&gt;symbol</samp>&rsquo;          &lsquo;<samp>string-append</samp>&rsquo;
&lsquo;<samp>string-ci&lt;=? </samp>&rsquo;           &lsquo;<samp>string-ci&lt;?</samp>&rsquo;
&lsquo;<samp>string-ci=? </samp>&rsquo;            &lsquo;<samp>string-ci&gt;=?</samp>&rsquo;
&lsquo;<samp>string-ci&gt;? </samp>&rsquo;            &lsquo;<samp>string-copy</samp>&rsquo;
&lsquo;<samp>string-fill!</samp>&rsquo;            &lsquo;<samp>string-length</samp>&rsquo;
&lsquo;<samp>string-ref</samp>&rsquo;              &lsquo;<samp>string-set!</samp>&rsquo;
&lsquo;<samp>string&lt;=? </samp>&rsquo;              &lsquo;<samp>string&lt;?</samp>&rsquo;
&lsquo;<samp>string=? </samp>&rsquo;               &lsquo;<samp>string&gt;=?</samp>&rsquo;
&lsquo;<samp>string&gt;? </samp>&rsquo;               &lsquo;<samp>string?</samp>&rsquo;
&lsquo;<samp>substring</samp>&rsquo;               &lsquo;<samp>symbol-&gt;string</samp>&rsquo;
&lsquo;<samp>symbol? </samp>&rsquo;                &lsquo;<samp>syntax-rules</samp>&rsquo;
&lsquo;<samp>tan</samp>&rsquo;                     &lsquo;<samp>truncate</samp>&rsquo;
&lsquo;<samp>values</samp>&rsquo;                  &lsquo;<samp>vector</samp>&rsquo;
&lsquo;<samp>vector-&gt;list</samp>&rsquo;            &lsquo;<samp>vector-fill!</samp>&rsquo;
&lsquo;<samp>vector-length</samp>&rsquo;           &lsquo;<samp>vector-ref</samp>&rsquo;
&lsquo;<samp>vector-set!</samp>&rsquo;             &lsquo;<samp>vector?</samp>&rsquo;
&lsquo;<samp>with-input-from-file</samp>&rsquo;    &lsquo;<samp>with-output-to-file</samp>&rsquo;
&lsquo;<samp>write</samp>&rsquo;                   &lsquo;<samp>write-char</samp>&rsquo;
&lsquo;<samp>zero?</samp>&rsquo;

</pre></div>

        

<hr>
</div>
<div class="chapter" id="Standard-Feature-Identifiers">
<div class="header">
<p>
Next: <a href="#Language-changes" accesskey="n" rel="next">Language changes</a>, Previous: <a href="#Standard-Libraries" accesskey="p" rel="prev">Standard Libraries</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Standard-Feature-Identifiers-1"></span><h2 class="chapter">C Standard Feature Identifiers</h2>

<span id="index-standard-feature-identifiers"></span>


<p>An implementation may provide any or all of the feature identifiers
listed below for use by &lsquo;<samp>cond-expand</samp>&rsquo; and &lsquo;<samp>features</samp>&rsquo;,
but must not provide a feature identifier if it does not
provide the corresponding feature.  
</p>



<dl compact="compact">
<dt><span><tt>r7rs</tt></span></dt>
<dd><p>All R<sup>7</sup>RS Scheme implementations have this feature.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>exact-closed</tt></span></dt>
<dd><p>The algebraic operations 
  &lsquo;<samp>+</samp>&rsquo;, &lsquo;<samp>-</samp>&rsquo;, &lsquo;<samp>*</samp>&rsquo;, and &lsquo;<samp>expt</samp>&rsquo; where the second argument
  is a non-negative integer produce
  exact values given exact inputs.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>exact-complex</tt></span></dt>
<dd><p>Exact complex numbers are provided.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>ieee-float</tt></span></dt>
<dd><p>Inexact numbers are IEEE 754 binary floating point
  values.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>full-unicode</tt></span></dt>
<dd><p>All Unicode characters present in Unicode version 6.0 are supported as Scheme characters.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>ratios</tt></span></dt>
<dd><p>&lsquo;<samp>/</samp>&rsquo; with exact arguments produces an exact result
  when the divisor is nonzero.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>posix</tt></span></dt>
<dd><p>This implementation is running on a POSIX
  system.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>windows</tt></span></dt>
<dd><p>This implementation is running on Windows.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>unix, darwin, gnu-linux, bsd, freebsd, solaris, ...</tt></span></dt>
<dd><p>Operating
  system flags (perhaps more than one).
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>i386, x86-64, ppc, sparc, jvm, clr, llvm, ...</tt></span></dt>
<dd><p>CPU architecture flags.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>ilp32, lp64, ilp64, ...</tt></span></dt>
<dd><p>C memory model flags.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt>big-endian, little-endian</tt></span></dt>
<dd><p>Byte order flags.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt><span class="roman">&lt;name&gt;</span></tt></span></dt>
<dd><p>The name of this implementation.
</p></dd>
</dl>


<dl compact="compact">
<dt><span><tt><span class="roman">&lt;name-version&gt;</span></tt></span></dt>
<dd><p>The name and version of this
  implementation.
</p></dd>
</dl>

  

<hr>
</div>
<div class="unnumbered" id="Language-changes">
<div class="header">
<p>
Next: <a href="#Additional-material" accesskey="n" rel="next">Additional material</a>, Previous: <a href="#Standard-Feature-Identifiers" accesskey="p" rel="prev">Standard Feature Identifiers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Language-changes-1"></span><h2 class="unnumbered">Language changes</h2>


<span id="index-language-changes"></span>


<ul class="section-toc">
<li><a href="#Incompatibilities-with-R5RS" accesskey="1">Incompatibilities with R<sup>5</sup>RS</a></li>
<li><a href="#Other-language-changes-since-R5RS" accesskey="2">Other language changes since R<sup>5</sup>RS</a></li>
<li><a href="#Incompatibilities-with-R6RS" accesskey="3">Incompatibilities with R<sup>6</sup>RS</a></li>
</ul>
<hr>
<div class="unnumberedsec" id="Incompatibilities-with-R5RS">
<div class="header">
<p>
Next: <a href="#Other-language-changes-since-R5RS" accesskey="n" rel="next">Other language changes since R<sup>5</sup>RS</a>, Previous: <a href="#Language-changes" accesskey="p" rel="prev">Language changes</a>, Up: <a href="#Language-changes" accesskey="u" rel="up">Language changes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Incompatibilities-with-R5RS-1"></span><h3 class="unnumberedsec">Incompatibilities with R<sup>5</sup>RS</h3>

<span id="index-incompatibilities-with-r5rs"></span>


<p>This section enumerates the incompatibilities between this report and
the &ldquo;Revised^5 report&rdquo; [R5RS].
</p>
<p><em>This list is not authoritative, but is believed to be correct and complete.</em>
</p>



<ul>
<li> Case sensitivity is now the default in symbols and character names.
This means that code written under the assumption that symbols could be
written &lsquo;<samp>FOO</samp>&rsquo; or &lsquo;<samp>Foo</samp>&rsquo; in some contexts and &lsquo;<samp>foo</samp>&rsquo; in other contexts
can either be changed, be marked with the new &lsquo;<samp>#!fold-case</samp>&rsquo; directive,
or be included in a library using the &lsquo;<samp>include-ci</samp>&rsquo; library declaration.
All standard identifiers are entirely in lower case.

</li><li> The &lsquo;<samp>syntax-rules</samp>&rsquo; construct now recognizes <em> </em> (underscore) 
as a wildcard, which means it cannot be used as a syntax variable.
It can still be used as a literal.

</li><li> The R<sup>5</sup>RS procedures &lsquo;<samp>exact-&gt;inexact</samp>&rsquo; and &lsquo;<samp>inexact-&gt;exact</samp>&rsquo;
have been renamed to their R<sup>6</sup>RS names, &lsquo;<samp>inexact</samp>&rsquo; and &lsquo;<samp>exact</samp>&rsquo;,
respectively, as these names are shorter and more correct.
The former names are still available in the R<sup>5</sup>RS library.

</li><li> The guarantee that string comparison (with &lsquo;<samp>string&lt;?</samp>&rsquo; and the
related predicates) is a lexicographical extension of character comparison
(with &lsquo;<samp>char&lt;?</samp>&rsquo; and the related predicates) has been removed.  

</li><li> Support for the # character in numeric literals is no longer required.

</li><li> Support for the letters &lsquo;<samp>s</samp>&rsquo;, &lsquo;<samp>f</samp>&rsquo;, &lsquo;<samp>d</samp>&rsquo;, and &lsquo;<samp>l</samp>&rsquo;
as exponent markers is no longer required.

</li><li> Implementations of &lsquo;<samp>string-&gt;number</samp>&rsquo; are no longer permitted
to return <tt>#f</tt> when the argument contains an explicit radix prefix,
and must be compatible with &lsquo;<samp>read</samp>&rsquo; and the syntax of numbers in programs.

</li><li> The procedures &lsquo;<samp>transcript-on</samp>&rsquo; and &lsquo;<samp>transcript-off</samp>&rsquo; have been removed.


</li></ul>


<hr>
</div>
<div class="unnumberedsec" id="Other-language-changes-since-R5RS">
<div class="header">
<p>
Next: <a href="#Incompatibilities-with-R6RS" accesskey="n" rel="next">Incompatibilities with R<sup>6</sup>RS</a>, Previous: <a href="#Incompatibilities-with-R5RS" accesskey="p" rel="prev">Incompatibilities with R<sup>5</sup>RS</a>, Up: <a href="#Language-changes" accesskey="u" rel="up">Language changes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Other-language-changes-since-R5RS-1"></span><h3 class="unnumberedsec">Other language changes since R<sup>5</sup>RS</h3>

<span id="index-other-language-changes-since-r5rs"></span>

<p>This section enumerates the additional differences between this report and
the &ldquo;Revised^5 report&rdquo; [R5RS].
</p>
<p><em>This list is not authoritative, but is believed to be correct and complete.</em>
</p>


<ul>
<li> Various minor ambiguities and unclarities in R<sup>5</sup>RS have been cleaned up.

</li><li> Libraries have been added as a new program structure to improve
encapsulation and sharing of code.  Some existing and new identifiers
have been factored out into separate libraries.
Libraries can be imported into other libraries or main programs, with
controlled exposure and renaming of identifiers.
The contents of a library can be made conditional on the features of
the implementation on which it is to be used.
There is an R<sup>5</sup>RS compatibility library.

</li><li> The expressions types &lsquo;<samp>include</samp>&rsquo;, &lsquo;<samp>include-ci</samp>&rsquo;, and &lsquo;<samp>cond-expand</samp>&rsquo;
have been added to the base library; they have the same semantics as the
corresponding library declarations.

</li><li> Exceptions can now be signaled explicitly with &lsquo;<samp>raise</samp>&rsquo;,
&lsquo;<samp>raise-continuable</samp>&rsquo; or &lsquo;<samp>error</samp>&rsquo;, and can be handled with &lsquo;<samp>with-exception-handler</samp>&rsquo; and the &lsquo;<samp>guard</samp>&rsquo; syntax.
Any object can specify an error condition; the implementation-defined
conditions signaled by &lsquo;<samp>error</samp>&rsquo; have a predicate to detect them and accessor functions to
retrieve the arguments passed to &lsquo;<samp>error</samp>&rsquo;.
Conditions signaled by &lsquo;<samp>read</samp>&rsquo; and by file-related procedures
also have predicates to detect them.

</li><li> New disjoint types supporting access to multiple fields can be
generated with the &lsquo;<samp>define-record-type</samp>&rsquo; of SRFI 9 [srfi9]

</li><li> Parameter objects can be created with &lsquo;<samp>make-parameter</samp>&rsquo;, and
dynamically rebound with &lsquo;<samp>parameterize</samp>&rsquo;.
The procedures &lsquo;<samp>current-input-port</samp>&rsquo; and &lsquo;<samp>current-output-port</samp>&rsquo; are now
parameter objects, as is the newly introduced &lsquo;<samp>current-error-port</samp>&rsquo;.

</li><li> Support for promises has been enhanced based on SRFI 45 [srfi45].

</li><li> <em>Bytevectors</em>, vectors of exact integers in the range
from 0 to 255 inclusive, have been added as a new disjoint type.
A subset of the vector procedures is provided.  Bytevectors
can be converted to and from strings in accordance with the UTF-8 character encoding.
Bytevectors have a datum representation and evaluate to themselves.

</li><li> Vector constants evaluate to themselves.

</li><li> The procedure &lsquo;<samp>read-line</samp>&rsquo; is provided to make line-oriented textual input
simpler.

</li><li> The procedure &lsquo;<samp>flush-output-port</samp>&rsquo; is provided to allow minimal
control of output port buffering.

</li><li> <em>Ports</em> can now be designated as <em>textual</em> or <em>binary</em> ports, with new procedures for reading and writing binary
data.
The new predicates &lsquo;<samp>input-port-open?</samp>&rsquo; and &lsquo;<samp>output-port-open?</samp>&rsquo; return whether a port is open or closed.
The new procedure &lsquo;<samp>close-port</samp>&rsquo; now closes a port; if the port
has both input and output sides, both are closed.

</li><li> <em>String ports</em> have been added as a way to read and write
characters to and from strings, and <em>bytevector ports</em> to read
and write bytes to and from bytevectors.

</li><li> There are now I/O procedures specific to strings and bytevectors.

</li><li> The &lsquo;<samp>write</samp>&rsquo; procedure now generates datum labels when applied to
circular objects.  The new procedure &lsquo;<samp>write-simple</samp>&rsquo; never generates
labels; &lsquo;<samp>write-shared</samp>&rsquo; generates labels for all shared and circular
structure.
The &lsquo;<samp>display</samp>&rsquo; procedure must not loop on circular objects.

</li><li> The R<sup>6</sup>RS procedure &lsquo;<samp>eof-object</samp>&rsquo; has been added.
Eof-objects are now required to be a disjoint type.

</li><li> Syntax definitions are now allowed wherever variable definitions are.

</li><li> The &lsquo;<samp>syntax-rules</samp>&rsquo; construct now allows
the ellipsis symbol to be specified explicitly instead of the default
&lsquo;<samp>...</samp>&rsquo;, allows template escapes with an ellipsis-prefixed list, and
allows tail patterns to follow an ellipsis pattern.

</li><li> The &lsquo;<samp>syntax-error</samp>&rsquo; syntax has been added as a way to signal immediate
and more informative errors when a macro is expanded.

</li><li> The &lsquo;<samp>letrec*</samp>&rsquo; binding construct has been added, and internal &lsquo;<samp>define</samp>&rsquo; 
is specified in terms of it.

</li><li> Support for capturing multiple values has been enhanced with &lsquo;<samp>define-values</samp>&rsquo;, &lsquo;<samp>let-values</samp>&rsquo;, and &lsquo;<samp>let*-values</samp>&rsquo;.
Standard expression types which contain a sequence of expressions now
permit passing zero or more than one value to the continuations of all
non-final expressions of the sequence.

</li><li> The &lsquo;<samp>case</samp>&rsquo; conditional now supports <tt>=&gt;</tt> syntax
analogous to &lsquo;<samp>cond</samp>&rsquo; not only in regular clauses but in the &lsquo;<samp>else</samp>&rsquo; clause as well.

</li><li> To support dispatching on the number of arguments passed to a
procedure, &lsquo;<samp>case-lambda</samp>&rsquo; has been added in its own library.

</li><li> The convenience conditionals &lsquo;<samp>when</samp>&rsquo; and &lsquo;<samp>unless</samp>&rsquo; have been added.

</li><li> The behavior of &lsquo;<samp>eqv?</samp>&rsquo; on inexact numbers now conforms to the
R<sup>6</sup>RS definition.

</li><li> When applied to procedures, &lsquo;<samp>eq?</samp>&rsquo; and &lsquo;<samp>eqv?</samp>&rsquo; are permitted to
return different answers.

</li><li> The R<sup>6</sup>RS procedures &lsquo;<samp>boolean=?</samp>&rsquo; and &lsquo;<samp>symbol=?</samp>&rsquo; have been added.

</li><li> Positive infinity, negative infinity, NaN, and negative inexact zero have been added
to the numeric tower as inexact values with the written
representations <tt>+inf.0</tt>, <tt>-inf.0</tt>, <tt>+nan.0</tt>, and &lsquo;<samp>-0.0</samp>&rsquo;
respectively.  Support for them is not required.
The representation <tt>-nan.0</tt> is synonymous with <tt>+nan.0</tt>.

</li><li> The &lsquo;<samp>log</samp>&rsquo; procedure now accepts a second argument specifying
the logarithm base.

</li><li> The procedures &lsquo;<samp>map</samp>&rsquo; and &lsquo;<samp>for-each</samp>&rsquo; are now required to terminate on
the shortest argument list.

</li><li> The procedures &lsquo;<samp>member</samp>&rsquo; and &lsquo;<samp>assoc</samp>&rsquo; now take an optional third argument
specifying the equality predicate to be used.

</li><li> The numeric procedures &lsquo;<samp>finite?</samp>&rsquo;, &lsquo;<samp>infinite?</samp>&rsquo;, &lsquo;<samp>nan?</samp>&rsquo;,
&lsquo;<samp>exact-integer?</samp>&rsquo;, &lsquo;<samp>square</samp>&rsquo;, and &lsquo;<samp>exact-integer-sqrt</samp>&rsquo;
have been added.

</li><li> The &lsquo;<samp>-</samp>&rsquo; and &lsquo;<samp>/</samp>&rsquo; procedures
and the character and string comparison
predicates are now required to support more than two arguments.

</li><li> The forms <tt>#true</tt> and <tt>#false</tt> are now supported
as well as <tt>#t</tt> and <tt>#f</tt>.

</li><li> The procedures &lsquo;<samp>make-list</samp>&rsquo;, &lsquo;<samp>list-copy</samp>&rsquo;, &lsquo;<samp>list-set!</samp>&rsquo;,
&lsquo;<samp>string-map</samp>&rsquo;, &lsquo;<samp>string-for-each</samp>&rsquo;, &lsquo;<samp>string-&gt;vector</samp>&rsquo;, 
&lsquo;<samp>vector-append</samp>&rsquo;,
&lsquo;<samp>vector-copy</samp>&rsquo;, &lsquo;<samp>vector-map</samp>&rsquo;, &lsquo;<samp>vector-for-each</samp>&rsquo;, 
&lsquo;<samp>vector-&gt;string</samp>&rsquo;, &lsquo;<samp>vector-copy!</samp>&rsquo;, and &lsquo;<samp>string-copy!</samp>&rsquo;
have been added to round out the sequence operations.

</li><li> Some string and vector procedures support processing of part of a string or vector using
optional <var>start</var> and <var>end</var> arguments.

</li><li> Some list procedures are now defined on circular lists.

</li><li> Implementations may provide any subset of the full Unicode
repertoire that includes ASCII, but implementations must support any
such subset in a way consistent with Unicode.
Various character and string procedures have been extended accordingly,
and case conversion procedures added for strings.
String comparison is no longer
required to be consistent with character comparison, which is based
solely on Unicode scalar values.
The new &lsquo;<samp>digit-value</samp>&rsquo; procedure has been added to obtain the numerical
value of a numeric character.

</li><li> There are now two additional comment syntaxes: <tt>#;</tt> to
skip the next datum, and <tt>#| ... |#</tt>
for nestable block comments.

</li><li> Data prefixed with datum labels <tt>#&lt;n&gt;=</tt> can be referenced
with <tt>#&lt;n&gt;#</tt>, allowing for reading and writing of data with
shared structure.

</li><li> Strings and symbols now allow mnemonic and numeric escape
sequences, and the list of named characters has been extended.

</li><li> The procedures &lsquo;<samp>file-exists?</samp>&rsquo; and &lsquo;<samp>delete-file</samp>&rsquo; are available in the
<tt>(scheme file)</tt> library.

</li><li> An interface to the system environment, command line, and process exit status is
available in the <tt>(scheme process-context)</tt> library.

</li><li> Procedures for accessing time-related values are available in the
<tt>(scheme time)</tt> library.

</li><li> A less irregular set of integer division operators is provided
with new and clearer names.

</li><li> The &lsquo;<samp>load</samp>&rsquo; procedure now accepts a second argument specifying the environment to
load into.

</li><li> The &lsquo;<samp>call-with-current-continuation</samp>&rsquo; procedure now has the synonym
&lsquo;<samp>call/cc</samp>&rsquo;.

</li><li> The semantics of read-eval-print loops are now partly prescribed,
requiring the redefinition of procedures, but not syntax keywords, to have retroactive effect.

</li><li> The formal semantics now handles &lsquo;<samp>dynamic-wind</samp>&rsquo;.

</li></ul>


<hr>
</div>
<div class="unnumberedsec" id="Incompatibilities-with-R6RS">
<div class="header">
<p>
Previous: <a href="#Other-language-changes-since-R5RS" accesskey="p" rel="prev">Other language changes since R<sup>5</sup>RS</a>, Up: <a href="#Language-changes" accesskey="u" rel="up">Language changes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Incompatibilities-with-R6RS-1"></span><h3 class="unnumberedsec">Incompatibilities with R<sup>6</sup>RS</h3>

<span id="index-incompatibilities-with-r6rs"></span>
<p>This section enumerates the incompatibilities between R<sup>7</sup>RS and
the &ldquo;Revised^6 report&rdquo; [R6RS] and its accompanying Standard Libraries document.
</p>
<p><em>This list is not authoritative, and is possibly incomplete.</em>
</p>


<ul>
<li> R<sup>7</sup>RS libraries begin with the keyword &lsquo;<samp>define-library</samp>&rsquo;
rather than &lsquo;<samp>library</samp>&rsquo; in order to make them syntactically
distinguishable from R<sup>6</sup>RS libraries.
In R<sup>7</sup>RS terms, the body of an R<sup>6</sup>RS library consists
of a single export declaration followed by a single import declaration,
followed by commands and definitions.  In R<sup>7</sup>RS, commands and
definitions are not permitted directly within the body: they have to be wrapped in a &lsquo;<samp>begin</samp>&rsquo;
library declaration.

</li><li> There is no direct R<sup>6</sup>RS equivalent of the &lsquo;<samp>include</samp>&rsquo;, &lsquo;<samp>include-ci</samp>&rsquo;,
&lsquo;<samp>include-library-declarations</samp>&rsquo;, or &lsquo;<samp>cond-expand</samp>&rsquo; library declarations.
On the other hand, the R<sup>7</sup>RS library syntax does not support phase or version specifications.

</li><li> The grouping of standardized identifiers into libraries is different from the R<sup>6</sup>RS
approach. In particular, procedures which are optional in R<sup>5</sup>RS  either expressly
or by implication, have been removed from the base library.
Only the base library itself is an absolute requirement.

</li><li> No form of identifier syntax is provided. 

</li><li> Internal syntax definitions are allowed, but uses of a syntax form
cannot appear before its definition; the &lsquo;<samp>even</samp>&rsquo;/&lsquo;<samp>odd</samp>&rsquo; example given in
R<sup>6</sup>RS is not allowed.

</li><li> The R<sup>6</sup>RS exception system was incorporated as-is, but the condition
types have been left unspecified.  In particular, where R<sup>6</sup>RS requires
a condition of a specified type to be signaled, R<sup>7</sup>RS says only
&ldquo;it is an error&rdquo;, leaving the question of signaling open.

</li><li> Full Unicode support is not required.
Normalization is not provided.
Character comparisons are
defined by Unicode, but string comparisons are implementation-dependent.
Non-Unicode characters are permitted.

</li><li> The full numeric tower is optional as in R<sup>5</sup>RS, but optional support for IEEE
infinities, NaN, and mbox -0.0 was adopted from R<sup>6</sup>RS. Most clarifications on
numeric results were also adopted, but the semantics of the R<sup>6</sup>RS procedures &lsquo;<samp>real?</samp>&rsquo;,
&lsquo;<samp>rational?</samp>&rsquo;, and &lsquo;<samp>integer</samp>&rsquo;? were not adopted.
(Note that the R<sup>5</sup>RS/R<sup>7</sup>RS semantics are available in R<sup>6</sup>RS using
&lsquo;<samp>real-valued?</samp>&rsquo;, &lsquo;<samp>rational-valued?</samp>&rsquo;, and &lsquo;<samp>integer-valued?</samp>&rsquo;).
The R<sup>6</sup>RS division operators &lsquo;<samp>div</samp>&rsquo;, &lsquo;<samp>mod</samp>&rsquo;, &lsquo;<samp>div-and-mod</samp>&rsquo;, &lsquo;<samp>div0</samp>&rsquo;, &lsquo;<samp>mod0</samp>&rsquo; and &lsquo;<samp>div0-and-mod0</samp>&rsquo; are not provided.

</li><li> When a result is unspecified, it is still required to be a single value.
However, non-final expressions
in a body can return any number of values.

</li><li> The semantics of &lsquo;<samp>map</samp>&rsquo; and &lsquo;<samp>for-each</samp>&rsquo; have been changed to use
the SRFI 1 [srfi1] early termination behavior. Likewise,
&lsquo;<samp>assoc</samp>&rsquo; and &lsquo;<samp>member</samp>&rsquo; take an optional &lsquo;<samp>equal?</samp>&rsquo; argument as in SRFI 1,
instead of the separate &lsquo;<samp>assp</samp>&rsquo; and &lsquo;<samp>memp</samp>&rsquo; procedures of R<sup>6</sup>RS.

</li><li> The R<sup>6</sup>RS &lsquo;<samp>quasiquote</samp>&rsquo; clarifications have been adopted, with the
exception of multiple-argument &lsquo;<samp>unquote</samp>&rsquo; and
&lsquo;<samp>unquote-splicing</samp>&rsquo;.

</li><li> The R<sup>6</sup>RS method of specifying mantissa widths was not adopted.

</li><li> String ports are compatible with SRFI 6 [srfi6] rather than R<sup>6</sup>RS.

</li><li> R<sup>6</sup>RS-style bytevectors are included, but 
only the unsigned byte (&lsquo;<samp>u8</samp>&rsquo;) procedures have been provided.
The lexical syntax uses &lsquo;<samp>#u8</samp>&rsquo; for compatibility
with SRFI 4 [srfi4], rather than the R<sup>6</sup>RS &lsquo;<samp>#vu8</samp>&rsquo; style.

</li><li> The utility macros &lsquo;<samp>when</samp>&rsquo; and &lsquo;<samp>unless</samp>&rsquo; are provided, but 
their result is left unspecified.

</li><li> The remaining features of the Standard Libraries document were
left to future standardization efforts.


</li></ul>


       
<hr>
</div>
</div>
<div class="unnumbered" id="Additional-material">
<div class="header">
<p>
Next: <a href="#Example" accesskey="n" rel="next">Example</a>, Previous: <a href="#Language-changes" accesskey="p" rel="prev">Language changes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Additional-material-1"></span><h2 class="unnumbered">Additional material</h2>

<span id="index-additional-material"></span>


<p>The Scheme community website at
<a href="http://schemers.org">http://schemers.org</a>
contains additional resources for learning and programming, job and
event postings, and Scheme user group information.
</p>
<p>A bibliography of Scheme-related research at
<a href="http://library.readscheme.org">http://library.readscheme.org</a>
links to technical papers and theses related to the Scheme language,
including both classic papers and recent research.
</p>
<p>On-line Scheme discussions are held using IRC
on the &lsquo;<samp>#scheme</samp>&rsquo; channel at &lsquo;<samp>irc.freenode.net</samp>&rsquo;
and on the Usenet discussion group &lsquo;<samp>comp.lang.scheme</samp>&rsquo;.
</p>  


<hr>
</div>
<div class="unnumbered" id="Example">
<div class="header">
<p>
Next: <a href="#Bibliography" accesskey="n" rel="next">Bibliography</a>, Previous: <a href="#Additional-material" accesskey="p" rel="prev">Additional material</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Example-1"></span><h2 class="unnumbered">Example</h2>
 

<span id="index-example"></span>

<p>The procedure &lsquo;<samp>integrate-system</samp>&rsquo; integrates the system 
</p>

<div align="center">y_k^^ = f_k(y_1, y_2, &hellip;, y_n),    k = 1, &hellip;, n
</div>
<p>of differential equations with the method of Runge-Kutta.
</p>
<p>The parameter <tt>system-derivative</tt> is a function that takes a system
state (a vector of values for the state variables y_1, &hellip;, y_n)
and produces a system derivative (the values y_1^^, &hellip;,y_n^^).  The parameter <tt>initial-state</tt> provides an initial
system state, and <tt>h</tt> is an initial guess for the length of the
integration step.
</p>
<p>The value returned by &lsquo;<samp>integrate-system</samp>&rsquo; is an infinite stream of
system states.
</p>

<div class="example">
<pre class="example">

(define (integrate-system system-derivative
                          initial-state
                          h)
  (let ((next (runge-kutta-4 system-derivative h)))
    (letrec ((states
              (cons initial-state
                    (delay (map-streams next
                                        states)))))
      states)))

</pre></div>


<p>The procedure &lsquo;<samp>runge-kutta-4</samp>&rsquo; takes a function, <tt>f</tt>, that produces a
system derivative from a system state.  It
produces a function that takes a system state and
produces a new system state.
</p>

<div class="example">
<pre class="example">

(define (runge-kutta-4 f h)
  (let ((*h (scale-vector h))
        (*2 (scale-vector 2))
        (*1/2 (scale-vector (/ 1 2)))
        (*1/6 (scale-vector (/ 1 6))))
    (lambda (y)
      ;; y is a system state
      (let* ((k0 (*h (f y)))
             (k1 (*h (f (add-vectors y (*1/2 k0)))))
             (k2 (*h (f (add-vectors y (*1/2 k1)))))
             (k3 (*h (f (add-vectors y k2)))))
        (add-vectors y
          (*1/6 (add-vectors k0
                             (*2 k1)
                             (*2 k2)
                             k3)))))))

(define (elementwise f)
  (lambda vectors
    (generate-vector
     (vector-length (car vectors))
     (lambda (i)
       (apply f
              (map (lambda (v) (vector-ref  v i))
                   vectors))))))

(define (generate-vector size proc)
  (let ((ans (make-vector size)))
    (letrec ((loop
              (lambda (i)
                (cond ((= i size) ans)
                      (else
                       (vector-set! ans i (proc i))
                       (loop (+ i 1)))))))
      (loop 0))))

(define add-vectors (elementwise +))

(define (scale-vector s)
  (elementwise (lambda (x) (* x s))))

</pre></div>


<p>The &lsquo;<samp>map-streams</samp>&rsquo; procedure is analogous to &lsquo;<samp>map</samp>&rsquo;: it applies its first
argument (a procedure) to all the elements of its second argument (a
stream).
</p>

<div class="example">
<pre class="example">

(define (map-streams f s)
  (cons (f (head s))
        (delay (map-streams f (tail s)))))

</pre></div>


<p>Infinite streams are implemented as pairs whose car holds the first
element of the stream and whose cdr holds a promise to deliver the rest
of the stream.
</p>

<div class="example">
<pre class="example">

(define head car)
(define (tail stream)
  (force (cdr stream)))

</pre></div>


<br>
<br>
<br>
<br>
<br>
<br>
<p>The following illustrates the use of &lsquo;<samp>integrate-system</samp>&rsquo; in
integrating the system
</p>

<div align="center">C dv_C / dt = -i_L - v_C / R
</div>


<div align="center">L di_L / dt = v_C
</div>
<p>which models a damped oscillator.
</p>

<div class="example">
<pre class="example">

(define (damped-oscillator R L C)
  (lambda (state)
    (let ((Vc (vector-ref state 0))
          (Il (vector-ref state 1)))
      (vector (- 0 (+ (/ Vc (* R C)) (/ Il C)))
              (/ Vc L)))))

(define the-states
  (integrate-system
     (damped-oscillator 10000 1000 .001)
     '#(1 0)
     .01))

</pre></div>


         






<hr>
</div>
<div class="unnumbered" id="Bibliography">
<div class="header">
<p>
Next: <a href="#Index" accesskey="n" rel="next">Alphabetic index of definitions of concepts, keywords, and procedures</a>, Previous: <a href="#Example" accesskey="p" rel="prev">Example</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Bibliography-1"></span><h2 class="unnumbered">Bibliography</h2>

<span id="index-bibliography"></span>

<ul>
<li> [SICP]
<span id="index-sicp"></span>
Harold Abelson and Gerald Jay Sussman with Julie Sussman.
<em>Structure and Interpretation of Computer Programs, second edition.</em>
MIT Press, Cambridge, 1996.

</li><li> [Bawden88]
<span id="index-bawden88"></span>
Alan Bawden and Jonathan Rees.
Syntactic closures.
In <em>Proceedings of the 1988 ACM Symposium on Lisp and
  Functional Programming</em>, pages 86&ndash;95.

</li><li> [rfc2119]
<span id="index-rfc2119"></span>
S. Bradner.
Key words for use in RFCs to Indicate Requirement Levels.
<a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>, 1997.

</li><li> [howtoprint]
<span id="index-howtoprint"></span>
Robert G. Burger and R. Kent Dybvig.
Printing floating-point numbers quickly and accurately.
In <em>Proceedings of the ACM SIGPLAN &rsquo;96 Conference
  on Programming Language Design and Implementation</em>, pages 108&ndash;116.

</li><li> [howtoread]
<span id="index-howtoread"></span>
William Clinger.
How to read floating point numbers accurately.
In <em>Proceedings of the ACM SIGPLAN &rsquo;90 Conference
  on Programming Language Design and Implementation</em>, pages 92&ndash;101.
Proceedings published as <em>SIGPLAN Notices</em> 25(6), June 1990.

</li><li> [propertailrecursion]
<span id="index-propertailrecursion"></span>
William Clinger.
Proper Tail Recursion and Space Efficiency.
In <em>Proceedings of the 1998 ACM Conference on Programming
 Language Design and Implementation</em>, June 1998.

</li><li> [srfi6]
<span id="index-srfi6"></span>
William Clinger.
SRFI 6: Basic String Ports.
<a href="http://srfi.schemers.org/srfi-6/">http://srfi.schemers.org/srfi-6/</a>, 1999.

</li><li> [RRRS]
<span id="index-rrrs"></span>
William Clinger, editor.
The revised revised report on Scheme, or an uncommon Lisp.
MIT Artificial Intelligence Memo 848, August 1985.
Also published as Computer Science Department Technical Report 174,
  Indiana University, June 1985.

</li><li> [macrosthatwork]
<span id="index-macrosthatwork"></span>
William Clinger and Jonathan Rees.
Macros that work.
In <em>Proceedings of the 1991 ACM Conference on Principles of
  Programming Languages</em>, pages 155&ndash;162.

</li><li> [R4RS]
<span id="index-r4rs"></span>
William Clinger and Jonathan Rees, editors.
The revised^4 report on the algorithmic language Scheme.
In <em>ACM Lisp Pointers</em> 4(3), pages 1&ndash;55, 1991.

</li><li> [uax44]
<span id="index-uax44"></span>
Mark Davis.
Unicode Standard Annex #44, Unicode Character Database.
<a href="http://unicode.org/reports/tr44/">http://unicode.org/reports/tr44/</a>, 2010.

</li><li> [syntacticabstraction]
<span id="index-syntacticabstraction"></span>
R. Kent Dybvig, Robert Hieb, and Carl Bruggeman.
Syntactic abstraction in Scheme.
<em>Lisp and Symbolic Computation</em> 5(4):295&ndash;326, 1993.

</li><li> [srfi4]
<span id="index-srfi4"></span>
Marc Feeley.
SRFI 4: Homogeneous Numeric Vector Datatypes.
<a href="http://srfi.schemers.org/srfi-4/">http://srfi.schemers.org/srfi-4/</a>, 1999.

</li><li> [Scheme311]
<span id="index-scheme311"></span>
Carol Fessenden, William Clinger, Daniel P. Friedman, and Christopher Haynes.
Scheme 311 version 4 reference manual.
Indiana University Computer Science Technical Report 137, February 1983.
Superseded by [Scheme84].

</li><li> [Scheme84]
<span id="index-scheme84"></span>
D. Friedman, C. Haynes, E. Kohlbecker, and M. Wand.
Scheme 84 interim reference manual.
Indiana University Computer Science Technical Report 153, January 1985.

</li><li> [life]
<span id="index-life"></span>
Martin Gardner.
Mathematical Games: The fantastic combinations of John Conway&rsquo;s new solitaire game &ldquo;Life.&rdquo;
In <em>Scientific American</em>, 223:120&ndash;123, October 1970.

</li><li> [IEEE]
<span id="index-ieee"></span>
<em>IEEE Standard 754-2008.  IEEE Standard for Floating-Point
Arithmetic.</em>  IEEE, New York, 2008.

</li><li> [IEEEScheme]
<span id="index-ieeescheme"></span>
<em>IEEE Standard 1178-1990.  IEEE Standard for the Scheme
  Programming Language.</em>  IEEE, New York, 1991.

</li><li> [srfi9]
<span id="index-srfi9"></span>
Richard Kelsey.
SRFI 9: Defining Record Types.
<a href="http://srfi.schemers.org/srfi-9/">http://srfi.schemers.org/srfi-9/</a>, 1999.

</li><li> [R5RS]
<span id="index-r5rs"></span>
Richard Kelsey, William Clinger, and Jonathan Rees, editors.
The revised^5 report on the algorithmic language Scheme.
<em>Higher-Order and Symbolic Computation</em>, 11(1):7-105, 1998.

</li><li> [Kohlbecker86]
<span id="index-kohlbecker86"></span>
Eugene E. Kohlbecker Jr.
<em>Syntactic Extensions in the Programming Language Lisp.</em>
PhD thesis, Indiana University, August 1986.

</li><li> [hygienic]
<span id="index-hygienic-1"></span>
Eugene E. Kohlbecker Jr., Daniel P. Friedman, Matthias Felleisen, and Bruce Duba.
Hygienic macro expansion.
In <em>Proceedings of the 1986 ACM Conference on Lisp
  and Functional Programming</em>, pages 151&ndash;161.

</li><li> [McCarthy]
<span id="index-mccarthy"></span>
John McCarthy.
Recursive Functions of Symbolic Expressions and Their Computation by Machine, Part I.
<em>Communications of the ACM</em> 3(4):184&ndash;195, April 1960.

</li><li> [MITScheme]
<span id="index-mitscheme"></span>
MIT Department of Electrical Engineering and Computer Science.
Scheme manual, seventh edition.
September 1984.

</li><li> [Naur63]
<span id="index-naur63"></span>
Peter Naur et al.
Revised report on the algorithmic language Algol 60.
<em>Communications of the ACM</em> 6(1):1&ndash;17, January 1963.

</li><li> [Penfield81]
<span id="index-penfield81"></span>
Paul Penfield, Jr.
Principal values and branch cuts in complex APL.
In <em>APL &rsquo;81 Conference Proceedings,</em> pages 248&ndash;256.
ACM SIGAPL, San Francisco, September 1981.
Proceedings published as <em>APL Quote Quad</em> 12(1), ACM, September 1981.

</li><li> [Rees82]
<span id="index-rees82"></span>
Jonathan A. Rees and Norman I. Adams IV.
T: A dialect of Lisp or, lambda: The ultimate software tool.
In <em>Conference Record of the 1982 ACM Symposium on Lisp and
  Functional Programming</em>, pages 114&ndash;122.

</li><li> [Rees84]
<span id="index-rees84"></span>
Jonathan A. Rees, Norman I. Adams IV, and James R. Meehan.
The T manual, fourth edition.
Yale University Computer Science Department, January 1984.

</li><li> [R3RS]
<span id="index-r3rs"></span>
Jonathan Rees and William Clinger, editors.
The revised^3 report on the algorithmic language Scheme.
In <em>ACM SIGPLAN Notices</em> 21(12), pages 37&ndash;79, December 1986.

</li><li> [srfi1]
<span id="index-srfi1"></span>
Olin Shivers.
SRFI 1: List Library.
<a href="http://srfi.schemers.org/srfi-1/">http://srfi.schemers.org/srfi-1/</a>, 1999.

</li><li> [Scheme78]
<span id="index-scheme78"></span>
Guy Lewis Steele Jr. and Gerald Jay Sussman.
The revised report on Scheme, a dialect of Lisp.
MIT Artificial Intelligence Memo 452, January 1978.

</li><li> [Rabbit]
<span id="index-rabbit"></span>
Guy Lewis Steele Jr.
Rabbit: a compiler for Scheme.
MIT Artificial Intelligence Laboratory Technical Report 474, May 1978.

</li><li> [R6RS]
<span id="index-r6rs"></span>
Michael Sperber, R. Kent Dybvig, Mathew Flatt, and Anton van Straaten, editors.
<em>The revised^6 report on the algorithmic language Scheme.</em>
Cambridge University Press, 2010.

</li><li> [CLtL]
<span id="index-cltl"></span>
Guy Lewis Steele Jr.
<em>Common Lisp: The Language, second edition.</em>
Digital Press, Burlington MA, 1990.

</li><li> [Scheme75]
<span id="index-scheme75"></span>
Gerald Jay Sussman and Guy Lewis Steele Jr.
Scheme: an interpreter for extended lambda calculus.
MIT Artificial Intelligence Memo 349, December 1975.

</li><li> [Stoy77]
<span id="index-stoy77"></span>
Joseph E. Stoy.
<em>Denotational Semantics: The Scott-Strachey Approach to
  Programming Language Theory.</em>
MIT Press, Cambridge, 1977.

</li><li> [TImanual85]
<span id="index-timanual85"></span>
Texas Instruments, Inc.
TI Scheme Language Reference Manual.
Preliminary version 1.0, November 1985. 

</li><li> [srfi45]
<span id="index-srfi45"></span>
Andre van Tonder.
SRFI 45: Primitives for Expressing Iterative Lazy Algorithms.
<a href="http://srfi.schemers.org/srfi-45/">http://srfi.schemers.org/srfi-45/</a>, 2002.

</li><li> [GasbichlerKnauelSperberKelsey2003]
<span id="index-gasbichlerknauelsperberkelsey2003"></span>
Martin Gasbichler, Eric Knauel, Michael Sperber and Richard Kelsey.
How to Add Threads to a Sequential Language Without Getting Tangled Up.
<em>Proceedings of the Fourth Workshop on Scheme and Functional Programming</em>, November 2003.

</li><li> [TAI]
<span id="index-tai"></span>
International Earth Rotation Service.
Historical table of TAI-UTC offsets.
<a href="http://maia.usno.navy.mil/ser7/tai-utc.dat">http://maia.usno.navy.mil/ser7/tai-utc.dat</a>

</li></ul>

       





<hr>
</div>
<div class="unnumbered" id="Index">
<div class="header">
<p>
Previous: <a href="#Bibliography" accesskey="p" rel="prev">Bibliography</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Alphabetic-index-of-definitions-of-concepts_002c-keywords_002c-and-procedures"></span><h2 class="unnumbered">Alphabetic index of definitions of concepts, keywords, and procedures</h2>

<span id="index-alphabetic-index-of-definitions-of-concepts_002c-keywords_002c-and-procedures"></span>


<p>The principal entry for each term, procedure, or keyword is listed
first, separated from the other entries by a semicolon.
</p>
<br>
<br>
<br>
<br>
<br>
<br>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_cp_symbol-1"><b>&quot;</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-2"><b>#</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-3"><b>'</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-4"><b>,</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-5"><b>;</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-6"><b>=</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-7"><b>_</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-8"><b>`</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-K"><b>K</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-1">&quot;</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0022_007c_0023_0040_007c_0023">&quot;|#@<tt><tt>|</tt>#</tt><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Whitespace-and-comments">Whitespace and comments</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-2">#</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0022_007c_0040_0023_007c">#&quot;|@<tt>#<tt>|</tt></tt><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Whitespace-and-comments">Whitespace and comments</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-3">'</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0027">&rsquo;<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Literal-expressions">Literal expressions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-4">,</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002c">,<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotation">Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002c_0040">,@<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotation">Quasiquotation</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-5">;</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003b">;<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Whitespace-and-comments">Whitespace and comments</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-6">=</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003d_003e">=&gt;<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional">Conditional</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-7">_</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005f"><span class="nolinebreak">_</span><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-language">Pattern language</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_symbol-8">`</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0060">&lsquo;<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotation">Quasiquotation</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-A">A</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-acknowledgments">acknowledgments<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-additional-material">additional&nbsp;material<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Additional-material">Additional material</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alphabetic-index-of-definitions-of-concepts_002c-keywords_002c-and-procedures">alphabetic&nbsp;index&nbsp;of&nbsp;definitions&nbsp;of&nbsp;concepts,&nbsp;keywords,&nbsp;and&nbsp;procedures<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Index">Index</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assignments">assignments<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Assignments">Assignments</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-B">B</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-background">background<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Background">Background</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-backquote">backquote<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotation">Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-base-and-optional-features">base&nbsp;and&nbsp;optional&nbsp;features<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Base-and-optional-features">Base and optional features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-base-library">base&nbsp;library<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Base-and-optional-features">Base and optional features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-basic-concepts">basic&nbsp;concepts<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Basic-concepts">Basic concepts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bibliography">bibliography<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bibliography">Bibliography</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binding">binding<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binding-construct">binding&nbsp;construct<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binding-constructs">binding&nbsp;constructs<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Binding-constructs">Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-binding-constructs-for-syntactic-keywords">binding&nbsp;constructs&nbsp;for&nbsp;syntactic&nbsp;keywords<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Binding-constructs-for-syntactic-keywords">Binding constructs for syntactic keywords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-body">body<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Binding-constructs">Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-booleans">booleans<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Booleans">Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bound">bound<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-byte">byte<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bytevectors">Bytevectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bytevectors">bytevectors<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bytevectors">Bytevectors</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-caaaar">caaaar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caaadr">caaadr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caadar">caadar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caaddr">caaddr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cadaar">cadaar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cadadr">cadadr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cadar">cadar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caddar">caddar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cadddr">cadddr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-caddr">caddr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call">call<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Procedure-calls">Procedure calls</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-call-by-need">call&nbsp;by&nbsp;need<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Delayed-evaluation">Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-case_002dlambda"><span class="nolinebreak">case-lambda</span><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Case_002dlambda">Case-lambda</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdaaar">cdaaar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdaadr">cdaadr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdaar">cdaar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdadar">cdadar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdaddr">cdaddr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdadr">cdadr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cddaar">cddaar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cddadr">cddadr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cddar">cddar<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-cdddr">cdddr<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-characters">characters<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters">Characters</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comma">comma<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotation">Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command">command<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Naming-conventions">Naming conventions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comment">comment<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Whitespace-and-comments">Whitespace and comments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comment-1">comment<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Lexical-structure">Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conditionals">conditionals<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditionals">Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-conditionals-1">conditionals<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional">Conditional</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-constant">constant<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Storage-model">Storage model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-continuation">continuation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Control-features">Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-control-features">control&nbsp;features<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Control-features">Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-current-exception-handler">current&nbsp;exception&nbsp;handler<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exceptions">Exceptions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-datum-labels">datum&nbsp;labels<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Datum-labels">Datum labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define">define<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-definitions">Variable definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002dlibrary"><span class="nolinebreak">define-library</span><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Library-Syntax">Library Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002drecord_002dtype"><span class="nolinebreak">define-record-type</span><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Record_002dtype-definitions">Record-type definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-define_002dsyntax"><span class="nolinebreak">define-syntax</span><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-definitions">Syntax definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-definition">definition<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programs">Programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-delayed-evaluation">delayed&nbsp;evaluation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Delayed-evaluation">Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-derived-expression-types">derived&nbsp;expression&nbsp;types<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Derived-expression-types">Derived expression types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-derived-expression-types-1">derived&nbsp;expression&nbsp;types<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Derived-expression-type">Derived expression type</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-disjointness-of-types">disjointness&nbsp;of&nbsp;types<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Disjointness-of-types">Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do">do<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Iteration">Iteration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dotted-pair">dotted&nbsp;pair<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dynamic-">dynamic&nbsp;<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dynamic-bindings">Dynamic bindings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dynamic-bindings">dynamic&nbsp;bindings<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dynamic-bindings">Dynamic bindings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dynamic-extent">dynamic&nbsp;extent<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dynamic-bindings">Dynamic bindings</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-E">E</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-else">else<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional">Conditional</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list">empty&nbsp;list<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Disjointness-of-types">Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-1">empty&nbsp;list<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Booleans">Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-empty-list-2">empty&nbsp;list<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-entry-format">entry&nbsp;format<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Entry-format">Entry format</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-environment">environment<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#System-interface">System interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-environment-variables">environment&nbsp;variables<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#System-interface">System interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-environments-and-evaluation">environments&nbsp;and&nbsp;evaluation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Environments-and-evaluation">Environments and evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-equivalence-predicate">equivalence&nbsp;predicate<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Equivalence-predicates">Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-equivalence-predicates">equivalence&nbsp;predicates<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Equivalence-predicates">Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error">error<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">Error situations and unspecified behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-error-situations-and-unspecified-behavior">error&nbsp;situations&nbsp;and&nbsp;unspecified&nbsp;behavior<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">Error situations and unspecified behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-escape-procedure">escape&nbsp;procedure<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Control-features">Control features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-escape-sequence">escape&nbsp;sequence<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Strings">Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-evaluation-examples">evaluation&nbsp;examples<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Evaluation-examples">Evaluation examples</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exact-complex-number">exact&nbsp;complex&nbsp;number<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exactness">Exactness</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exactness">exactness<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exactness">Exactness</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example">example<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Example">Example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exception-handler">exception&nbsp;handler<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exceptions">Exceptions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exception-handling">exception&nbsp;handling<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exception-handling">Exception handling</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exceptions">exceptions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exceptions">Exceptions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expressions">expressions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Expressions">Expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expressions-1">expressions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Expression">Expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-external-representations">external&nbsp;representations<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#External-representations">External representations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-external-representations-1">external&nbsp;representations<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#External-representation">External representation</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-F">F</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-false">false<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Disjointness-of-types">Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-false-1">false<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Booleans">Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fields">fields<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Record_002dtype-definitions">Record-type definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-formal-semantics">formal&nbsp;semantics<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Formal-semantics">Formal semantics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-formal-syntax">formal&nbsp;syntax<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Formal-syntax">Formal syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-formal-syntax-and-semantics">formal&nbsp;syntax&nbsp;and&nbsp;semantics<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Formal-syntax-and-semantics">Formal syntax and semantics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fresh">fresh<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Procedures">Procedures</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-G">G</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-global-environment">global&nbsp;environment<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-global-environment-1">global&nbsp;environment<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-procedures">Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-guard">guard<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exception-handling">Exception handling</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-H">H</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hygienic">hygienic<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-I">I</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier">identifier<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Identifiers">Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier-1">identifier<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifier-2">identifier<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Lexical-structure">Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifiers">identifiers<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Identifiers">Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-immutable">immutable<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Storage-model">Storage model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-extension">implementation&nbsp;extension<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implementation-extensions">Implementation extensions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-extensions">implementation&nbsp;extensions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implementation-extensions">Implementation extensions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-restriction">implementation&nbsp;restriction<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">Error situations and unspecified behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-restriction-1">implementation&nbsp;restriction<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implementation-restrictions">Implementation restrictions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implementation-restrictions">implementation&nbsp;restrictions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Implementation-restrictions">Implementation restrictions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-import">import<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Import-declarations">Import declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-import-declarations">import&nbsp;declarations<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Import-declarations">Import declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-improper-list">improper&nbsp;list<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inclusion">inclusion<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Inclusion">Inclusion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-incompatibilities-with-r5rs">incompatibilities&nbsp;with&nbsp;r<sup>5</sup>rs<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Incompatibilities-with-R5RS">Incompatibilities with R<sup>5</sup>RS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-incompatibilities-with-r6rs">incompatibilities&nbsp;with&nbsp;r<sup>6</sup>rs<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Incompatibilities-with-R6RS">Incompatibilities with R<sup>6</sup>RS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-inexact-">inexact&nbsp;<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exactness">Exactness</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-initial-environment">initial&nbsp;environment<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-procedures">Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-input">input<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Input">Input</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-input-and-output">input&nbsp;and&nbsp;output<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Input-and-output">Input and output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-definition">internal&nbsp;definition<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Internal-definitions">Internal definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-definitions">internal&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Internal-definitions">Internal definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-internal-syntax-definition">internal&nbsp;syntax&nbsp;definition<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-definitions">Syntax definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-introduction">introduction<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-irritants">irritants<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Exceptions">Exceptions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-iteration">iteration<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Iteration">Iteration</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-J">J</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-jiffies">jiffies<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#System-interface">System interface</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-K">K</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-keyword">keyword<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-L">L</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-language-changes">language&nbsp;changes<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Language-changes">Language changes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lazy-evaluation">lazy&nbsp;evaluation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Delayed-evaluation">Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lexical-conventions">lexical&nbsp;conventions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Lexical-conventions">Lexical conventions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lexical-structure">lexical&nbsp;structure<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Lexical-structure">Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libraries">libraries<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Base-and-optional-features">Base and optional features</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libraries-1">libraries<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Libraries">Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-libraries-2">libraries<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Librarie">Librarie</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library-example">library&nbsp;example<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Library-example">Library example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-library-syntax">library&nbsp;syntax<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Library-Syntax">Library Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-list">list<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-literal-expressions">literal&nbsp;expressions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Literal-expressions">Literal expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-location">location<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Storage-model">Storage model</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-M">M</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro">macro<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-keyword">macro&nbsp;keyword<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-transformer">macro&nbsp;transformer<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macro-use">macro&nbsp;use<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macros">macros<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple_002dvalue-definitions"><span class="nolinebreak">multiple-value</span>&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multiple_002dvalue-definitions">Multiple-value definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mutable">mutable<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Storage-model">Storage model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mutation-procedures">mutation&nbsp;procedures<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Naming-conventions">Naming conventions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-N">N</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-naming-conventions">naming&nbsp;conventions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Naming-conventions">Naming conventions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-newly-allocated">newly&nbsp;allocated<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-procedures">Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notation-and-terminology">notation&nbsp;and&nbsp;terminology<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Notation-and-terminology">Notation and terminology</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-number">number<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numbers">Numbers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numbers">numbers<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numbers">Numbers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numerical-input-and-output">numerical&nbsp;input&nbsp;and&nbsp;output<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numerical-input-and-output">Numerical input and output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numerical-operations">numerical&nbsp;operations<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numerical-operations">Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numerical-types">numerical&nbsp;types<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numerical-types">Numerical types</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-O">O</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-object">object<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Semantics">Semantics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-other-language-changes-since-r5rs">other&nbsp;language&nbsp;changes&nbsp;since&nbsp;r<sup>5</sup>rs<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-language-changes-since-R5RS">Other language changes since R<sup>5</sup>RS</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-other-notations">other&nbsp;notations<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Other-notations">Other notations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output">output<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output">Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overview-of-scheme">overview&nbsp;of&nbsp;scheme<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview-of-Scheme">Overview of Scheme</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-P">P</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-pair">pair<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pairs-and-lists">pairs&nbsp;and&nbsp;lists<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pairs-and-lists">Pairs and lists</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parameter-objects">parameter&nbsp;objects<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dynamic-bindings">Dynamic bindings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parameterize">parameterize<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dynamic-bindings">Dynamic bindings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pattern-language">pattern&nbsp;language<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Pattern-language">Pattern language</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-polar-notation">polar&nbsp;notation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-numerical-constants">Syntax of numerical constants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-port">port<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Ports">Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ports">ports<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Ports">Ports</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-predicate">predicate<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Equivalence-predicates">Equivalence predicates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-predicates">predicates<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Naming-conventions">Naming conventions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-primitive-expression-types">primitive&nbsp;expression&nbsp;types<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Primitive-expression-types">Primitive expression types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-procedure">procedure<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-procedures">Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-procedure-call">procedure&nbsp;call<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Procedure-calls">Procedure calls</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-procedure-calls">procedure&nbsp;calls<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Procedure-calls">Procedure calls</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-procedures">procedures<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Procedures">Procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-program-structure">program&nbsp;structure<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Program-structure">Program structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-programs">programs<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programs">Programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-programs-and-definitions">programs&nbsp;and&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Programs-and-definitions">Programs and definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-promise">promise<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Delayed-evaluation">Delayed evaluation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-proper-tail-recursion">proper&nbsp;tail&nbsp;recursion<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Proper-tail-recursion">Proper tail recursion</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-Q">Q</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-quasiquotation">quasiquotation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotation">Quasiquotation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quasiquotations">quasiquotations<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Quasiquotations">Quasiquotations</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-R">R</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-record-types">record&nbsp;types<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Record_002dtype-definitions">Record-type definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-record_002dtype-definitions"><span class="nolinebreak">record-type</span>&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Record_002dtype-definitions">Record-type definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-records">records<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Record_002dtype-definitions">Record-type definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rectangular-notation">rectangular&nbsp;notation<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-numerical-constants">Syntax of numerical constants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-referentially-transparent">referentially&nbsp;transparent<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region">region<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-1">region<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Assignments">Assignments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-2">region<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Binding-constructs">Binding constructs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-region-3">region<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Iteration">Iteration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-repl">repl<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-REPL">The REPL</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-S">S</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-semantics">semantics<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Semantics">Semantics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sequencing">sequencing<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Sequencing">Sequencing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-signaling-errors-in-macro-transformers">signaling&nbsp;errors&nbsp;in&nbsp;macro&nbsp;transformers<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Signaling-errors-in-macro-transformers">Signaling errors in macro transformers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-simplest-rational">simplest&nbsp;rational<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Numerical-operations">Numerical operations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-feature-identifiers">standard&nbsp;feature&nbsp;identifiers<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-Feature-Identifiers">Standard Feature Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-libraries">standard&nbsp;libraries<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-Libraries">Standard Libraries</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-standard-procedures">standard&nbsp;procedures<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Standard-procedures">Standard procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-storage-model">storage&nbsp;model<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Storage-model">Storage model</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-strings">strings<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Strings">Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-summary">summary<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Introduction">Introduction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-symbols">symbols<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Symbols">Symbols</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword">syntactic&nbsp;keyword<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Identifiers">Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword-1">syntactic&nbsp;keyword<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntactic-keyword-2">syntactic&nbsp;keyword<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Macros">Macros</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax">syntax<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax">Syntax</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax-definition">syntax&nbsp;definition<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-definitions">Syntax definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax-definitions">syntax&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-definitions">Syntax definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax-of-numerical-constants">syntax&nbsp;of&nbsp;numerical&nbsp;constants<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Syntax-of-numerical-constants">Syntax of numerical constants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax_002derror"><span class="nolinebreak">syntax-error</span><!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Signaling-errors-in-macro-transformers">Signaling errors in macro transformers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-system-interface">system&nbsp;interface<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#System-interface">System interface</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-T">T</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tail-call">tail&nbsp;call<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Proper-tail-recursion">Proper tail recursion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-the-repl">the&nbsp;repl<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-REPL">The REPL</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thunk">thunk<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Naming-conventions">Naming conventions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-token">token<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Lexical-structure">Lexical structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-top-level-definitions">top&nbsp;level&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Top-level-definitions">Top level definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transformers">transformers<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Transformers">Transformers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true">true<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Disjointness-of-types">Disjointness of types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-1">true<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditionals">Conditionals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-2">true<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Conditional">Conditional</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-true-3">true<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Booleans">Booleans</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-type">type<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Disjointness-of-types">Disjointness of types</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-U">U</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-unbound">unbound<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unbound-1">unbound<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-references">Variable references</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unbound-2">unbound<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Top-level-definitions">Top level definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unspecified">unspecified<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Error-situations-and-unspecified-behavior">Error situations and unspecified behavior</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-V">V</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-valid-indexes">valid&nbsp;indexes<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Strings">Strings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-valid-indexes-1">valid&nbsp;indexes<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Vectors">Vectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-valid-indexes-2">valid&nbsp;indexes<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Bytevectors">Bytevectors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable">variable<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Identifiers">Identifiers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-1">variable<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-2">variable<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-references">Variable references</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-definition">variable&nbsp;definition<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-definitions">Variable definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-definitions">variable&nbsp;definitions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-definitions">Variable definitions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-references">variable&nbsp;references<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-references">Variable references</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_003b-syntactic-keywords_003b-and-regions">variables;&nbsp;syntactic&nbsp;keywords;&nbsp;and&nbsp;regions<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variables_003b-syntactic-keywords_003b-and-regions">Variables; syntactic keywords; and regions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vectors">vectors<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Vectors">Vectors</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index_cp_letter-W">W</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-whitespace">whitespace<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Whitespace-and-comments">Whitespace and comments</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-whitespace-and-comments">whitespace&nbsp;and&nbsp;comments<!-- /@w --></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Whitespace-and-comments">Whitespace and comments</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index_cp_symbol-1"><b>&quot;</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-2"><b>#</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-3"><b>'</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-4"><b>,</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-5"><b>;</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-6"><b>=</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-7"><b>_</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_symbol-8"><b>`</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-K"><b>K</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>



</div>



</body>
</html>
